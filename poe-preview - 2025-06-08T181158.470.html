<!DOCTYPE html><html lang="fa" dir="rtl"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø±Ø¨ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ - Ø³ÛŒØ³ØªÙ… ØªØ­Ù„ÛŒÙ„ Ø¹Ù„Ù…ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        secondary: '#667eea',
                        accent: '#764ba2',
                        dark: '#0f0f23',
                        'dark-card': '#1a1a2e',
                        'dark-hover': '#16213e'
                    },
                    fontFamily: {
                        'vazir': ['Vazirmatn', 'Tahoma', 'Arial', 'sans-serif']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.4s ease-out',
                        'pulse-soft': 'pulseSoft 2s infinite',
                        'bounce-soft': 'bounceSoft 1s infinite',
                        'shake': 'shake 0.5s ease-in-out'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        pulseSoft: {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '0.8' }
                        },
                        bounceSoft: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-5px)' }
                        },
                        shake: {
                            '0%, 100%': { transform: 'translateX(0)' },
                            '25%': { transform: 'translateX(-5px)' },
                            '75%': { transform: 'translateX(5px)' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Vazirmatn', 'Tahoma', 'Arial', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }
        
        .gradient-primary {
            background: linear-gradient(135deg, #5D5CDE 0%, #667eea 50%, #764ba2 100%);
        }
        
        .gradient-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .input-field {
            background-color: #ffffff;
            border: 2px solid #e5e7eb;
            color: #1f2937;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .input-field:focus {
            border-color: #5D5CDE;
            box-shadow: 0 0 0 3px rgba(93, 92, 222, 0.1);
            outline: none;
            background-color: #ffffff;
        }
        
        .dark .input-field {
            background-color: #374151;
            border-color: #4b5563;
            color: #f9fafb;
        }
        
        .dark .input-field:focus {
            background-color: #374151;
            border-color: #5D5CDE;
            color: #f9fafb;
        }
        
        .select-field {
            background-color: #ffffff;
            border: 2px solid #e5e7eb;
            color: #1f2937;
            font-size: 16px;
        }
        
        .select-field:focus {
            border-color: #5D5CDE;
            box-shadow: 0 0 0 3px rgba(93, 92, 222, 0.1);
            outline: none;
        }
        
        .dark .select-field {
            background-color: #374151;
            border-color: #4b5563;
            color: #f9fafb;
        }
        
        .dark .select-field:focus {
            border-color: #5D5CDE;
            color: #f9fafb;
        }
        
        .card-shadow {
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.1);
        }
        
        .card-shadow:hover {
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .progress-glow {
            background: linear-gradient(90deg, #5D5CDE 0%, #667eea 50%, #764ba2 100%);
            box-shadow: 0 0 20px rgba(93, 92, 222, 0.3);
        }
        
        .tab-active {
            background: linear-gradient(135deg, #5D5CDE 0%, #667eea 100%);
            color: white;
        }
        
        .metric-card {
            background: linear-gradient(145deg, rgba(93, 92, 222, 0.05) 0%, rgba(102, 126, 234, 0.03) 100%);
            border: 1px solid rgba(93, 92, 222, 0.1);
        }
        
        .dark .metric-card {
            background: linear-gradient(145deg, rgba(93, 92, 222, 0.1) 0%, rgba(102, 126, 234, 0.05) 100%);
            border: 1px solid rgba(93, 92, 222, 0.2);
        }
        
        .option-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .option-card:hover {
            background-color: rgba(93, 92, 222, 0.1);
            transform: translateY(-2px);
        }
        
        .option-card.selected {
            background: linear-gradient(135deg, rgba(93, 92, 222, 0.15) 0%, rgba(102, 126, 234, 0.1) 100%);
            border: 2px solid #5D5CDE;
        }
        
        input[type="radio"]:checked + .option-card {
            background: linear-gradient(135deg, rgba(93, 92, 222, 0.15) 0%, rgba(102, 126, 234, 0.1) 100%);
            border: 2px solid #5D5CDE;
        }
        
        input[type="checkbox"]:checked + .option-card {
            background: linear-gradient(135deg, rgba(93, 92, 222, 0.15) 0%, rgba(102, 126, 234, 0.1) 100%);
            border: 2px solid #5D5CDE;
        }

        .analysis-result {
            background: linear-gradient(135deg, rgba(93, 92, 222, 0.1) 0%, rgba(102, 126, 234, 0.05) 100%);
            border: 2px solid rgba(93, 92, 222, 0.2);
            border-radius: 16px;
            padding: 20px;
            margin: 10px 0;
        }

        .progress-indicator {
            position: relative;
            height: 4px;
            background: rgba(93, 92, 222, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-indicator::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, #5D5CDE, #667eea);
            border-radius: 2px;
            transition: width 0.7s ease;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #5D5CDE, #667eea);
            border-radius: 10px;
        }
        
        .dark ::-webkit-scrollbar-track {
            background: #2d2d44;
        }

        .error-input {
            border-color: #ef4444 !important;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1) !important;
            animation: shake 0.5s ease-in-out;
        }

        .success-input {
            border-color: #10b981 !important;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1) !important;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-dark text-gray-900 dark:text-white transition-all duration-300 font-vazir">
    <div id="app" class="min-h-screen">
        <!-- Header -->
        <header class="bg-white dark:bg-dark-card shadow-lg border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50 backdrop-blur-lg">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center gap-4">
                        <div class="w-10 h-10 gradient-primary rounded-full flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                            </svg>
                        </div>
                        <h1 class="text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">Ù…Ø±Ø¨ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</h1>
                    </div>
                    <div class="flex items-center gap-4">
                        <button id="exportData" class="hidden p-2 rounded-lg bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors" title="Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¨Ø±Ù†Ø§Ù…Ù‡">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>
                            </svg>
                        </button>
                        <button id="themeToggle" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                            <svg id="sunIcon" class="w-5 h-5 hidden dark:block" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path>
                            </svg>
                            <svg id="moonIcon" class="w-5 h-5 block dark:hidden" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Welcome Section -->
            <div id="welcomeSection" class="text-center mb-12 animate-fade-in">
                <div class="gradient-primary rounded-3xl p-12 text-white mb-8 card-shadow">
                    <h2 class="text-4xl font-bold mb-6">ğŸ§  Ø³ÛŒØ³ØªÙ… ØªØ­Ù„ÛŒÙ„ Ø¹Ù„Ù…ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h2>
                    <p class="text-xl opacity-90 max-w-3xl mx-auto mb-8 leading-relaxed">
                        Ø¨Ø§ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø¹Ù„Ù…ÛŒ Ùˆ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒØŒ Ø¨Ø±Ù†Ø§Ù…Ù‡ ÙˆØ±Ø²Ø´ÛŒ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒâ€ŒØ´Ø¯Ù‡ Ùˆ Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                        <div class="glass-effect rounded-2xl p-6">
                            <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4">
                                <span class="text-2xl">ğŸ”¬</span>
                            </div>
                            <h3 class="font-semibold mb-2">ØªØ­Ù„ÛŒÙ„ Ø¹Ù„Ù…ÛŒ 100% Ø¯Ù‚ÛŒÙ‚</h3>
                            <p class="text-sm opacity-80">Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ø¢Ø®Ø±ÛŒÙ† ØªØ­Ù‚ÛŒÙ‚Ø§Øª ÙˆØ±Ø²Ø´ÛŒ</p>
                        </div>
                        <div class="glass-effect rounded-2xl p-6">
                            <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4">
                                <span class="text-2xl">ğŸ¯</span>
                            </div>
                            <h3 class="font-semibold mb-2">Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒ Ù…Ø·Ù„Ù‚</h3>
                            <p class="text-sm opacity-80">Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú©Ø§Ø±Ø¨Ø±</p>
                        </div>
                        <div class="glass-effect rounded-2xl p-6">
                            <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4">
                                <span class="text-2xl">ğŸ“Š</span>
                            </div>
                            <h3 class="font-semibold mb-2">Ù†ØªØ§ÛŒØ¬ ØªØ¶Ù…ÛŒÙ†â€ŒØ´Ø¯Ù‡</h3>
                            <p class="text-sm opacity-80">Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ø¯Ù‚ÛŒÙ‚ Ù¾ÛŒØ´Ø±ÙØª Ùˆ ØªÙ†Ø¸ÛŒÙ… Ø®ÙˆØ¯Ú©Ø§Ø±</p>
                        </div>
                    </div>
                </div>
                <button id="startAssessment" class="gradient-primary text-white px-12 py-4 rounded-2xl text-lg font-semibold transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105 animate-pulse-soft">
                    ğŸš€ Ø´Ø±ÙˆØ¹ ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´Ù…Ù†Ø¯
                </button>
            </div>

            <!-- Assessment Form -->
            <div id="assessmentForm" class="hidden animate-slide-up">
                <div class="bg-white dark:bg-dark-card rounded-3xl shadow-2xl overflow-hidden">
                    <!-- Progress Header -->
                    <div class="gradient-primary p-6 text-white">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-2xl font-bold">ØªØ­Ù„ÛŒÙ„ Ø¹Ù„Ù…ÛŒ Ø¬Ø§Ù…Ø¹</h3>
                            <div class="flex items-center gap-3">
                                <span class="text-sm opacity-80">Ù…Ø±Ø­Ù„Ù‡</span>
                                <span id="currentStep" class="text-lg font-bold bg-white/20 px-3 py-1 rounded-full">1</span>
                                <span class="text-sm opacity-80">Ø§Ø²</span>
                                <span id="totalSteps" class="text-lg font-bold">8</span>
                            </div>
                        </div>
                        <div class="w-full bg-white/20 rounded-full h-3 overflow-hidden">
                            <div id="progressBar" class="progress-glow h-3 rounded-full transition-all duration-700 ease-out" style="width: 12.5%"></div>
                        </div>
                        <div class="flex justify-between mt-2 text-xs opacity-70">
                            <span>Ø´Ø±ÙˆØ¹</span>
                            <span id="progressPercent">12.5%</span>
                            <span>Ø§ØªÙ…Ø§Ù…</span>
                        </div>
                    </div>

                    <!-- Form Content -->
                    <div class="p-8">
                        <!-- Step 1: Basic Info -->
                        <div id="step1" class="step space-y-6">
                            <div class="text-center mb-8">
                                <h4 class="text-2xl font-bold mb-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">ğŸ“Š Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨ÛŒÙˆÙ…ØªØ±ÛŒÚ©</h4>
                                <p class="text-gray-600 dark:text-gray-400">Ù¾Ø§ÛŒÙ‡ Ø¹Ù„Ù…ÛŒ ØªØ­Ù„ÛŒÙ„ Ø´Ù…Ø§</p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <div class="space-y-2">
                                    <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300">Ø³Ù† (Ø³Ø§Ù„) *</label>
                                    <input type="number" id="age" class="w-full p-4 rounded-xl input-field" placeholder="Ù…Ø«Ø§Ù„: 25" min="15" max="80" required="">
                                    <div id="ageHelp" class="text-xs text-gray-500">Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ BMR Ùˆ Ù‡ÙˆØ±Ù…ÙˆÙ†â€ŒÙ‡Ø§</div>
                                </div>
                                
                                <div class="space-y-2">
                                    <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300">Ø¬Ù†Ø³ÛŒØª *</label>
                                    <div class="grid grid-cols-2 gap-2">
                                        <label class="option-card p-4 rounded-xl border-2 border-gray-200 dark:border-gray-600 cursor-pointer">
                                            <input type="radio" name="gender" value="male" class="hidden" required="">
                                            <div class="text-center">
                                                <span class="text-2xl mb-2 block">ğŸ‘¨</span>
                                                <span class="font-medium">Ù…Ø±Ø¯</span>
                                            </div>
                                        </label>
                                        <label class="option-card p-4 rounded-xl border-2 border-gray-200 dark:border-gray-600 cursor-pointer">
                                            <input type="radio" name="gender" value="female" class="hidden" required="">
                                            <div class="text-center">
                                                <span class="text-2xl mb-2 block">ğŸ‘©</span>
                                                <span class="font-medium">Ø²Ù†</span>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="space-y-2">
                                    <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300">Ù‚Ø¯ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±) *</label>
                                    <input type="number" id="height" class="w-full p-4 rounded-xl input-field" placeholder="Ù…Ø«Ø§Ù„: 175" min="140" max="220" step="0.5" required="">
                                    <div class="text-xs text-gray-500">ØµØ¨Ø­ØŒ Ø¨Ø¯ÙˆÙ† Ú©ÙØ´ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ú©Ù†ÛŒØ¯</div>
                                </div>
                                
                                <div class="space-y-2">
                                    <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300">ÙˆØ²Ù† ÙØ¹Ù„ÛŒ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…) *</label>
                                    <input type="number" id="weight" class="w-full p-4 rounded-xl input-field" placeholder="Ù…Ø«Ø§Ù„: 70" min="35" max="200" step="0.1" required="">
                                    <div class="text-xs text-gray-500">ØµØ¨Ø­ØŒ Ù†Ø§Ø´ØªØ§ Ùˆ Ø¨Ø¯ÙˆÙ† Ù„Ø¨Ø§Ø³</div>
                                </div>
                                
                                <div class="space-y-2">
                                    <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300">ÙˆØ²Ù† Ù‡Ø¯Ù (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…) *</label>
                                    <input type="number" id="targetWeight" class="w-full p-4 rounded-xl input-field" placeholder="Ù…Ø«Ø§Ù„: 65" min="35" max="200" step="0.1" required="">
                                    <div class="text-xs text-gray-500">Ù‡Ø¯Ù ÙˆØ§Ù‚Ø¹â€ŒØ¨ÛŒÙ†Ø§Ù†Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</div>
                                </div>
                                
                                <div class="space-y-2">
                                    <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300">Ø¯Ø±ØµØ¯ Ú†Ø±Ø¨ÛŒ Ø¨Ø¯Ù†</label>
                                    <input type="number" id="bodyFat" class="w-full p-4 rounded-xl input-field" placeholder="Ø§Ø®ØªÛŒØ§Ø±ÛŒ" min="5" max="50" step="0.1">
                                    <div class="text-xs text-gray-500">Ø§Ú¯Ø± Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ DEXA ÛŒØ§ Bod Pod Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø´Ø¯Ù‡</div>
                                </div>
                            </div>

                            <!-- Real-time BMI Calculator -->
                            <div id="bmiResult" class="hidden analysis-result">
                                <h5 class="font-semibold text-primary mb-3 flex items-center">
                                    <span class="text-xl mr-2">ğŸ“</span>
                                    ØªØ­Ù„ÛŒÙ„ Ø§ÙˆÙ„ÛŒÙ‡ ØªØ±Ú©ÛŒØ¨ Ø¨Ø¯Ù†:
                                </h5>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                                    <div class="text-center p-3 bg-white dark:bg-gray-800 rounded-lg">
                                        <div class="text-lg font-bold text-primary" id="bmiValue"></div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400">BMI</div>
                                    </div>
                                    <div class="text-center p-3 bg-white dark:bg-gray-800 rounded-lg">
                                        <div class="text-lg font-bold" id="bmiCategory"></div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400">Ø·Ø¨Ù‚Ù‡â€ŒØ¨Ù†Ø¯ÛŒ</div>
                                    </div>
                                    <div class="text-center p-3 bg-white dark:bg-gray-800 rounded-lg">
                                        <div class="text-lg font-bold text-blue-600" id="bmrEstimate"></div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400">BMR ØªØ®Ù…ÛŒÙ†ÛŒ</div>
                                    </div>
                                    <div class="text-center p-3 bg-white dark:bg-gray-800 rounded-lg">
                                        <div class="text-lg font-bold text-green-600" id="bodyFatEstimate"></div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400">Ú†Ø±Ø¨ÛŒ ØªØ®Ù…ÛŒÙ†ÛŒ</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 2: Fitness Assessment -->
                        <div id="step2" class="step hidden space-y-6">
                            <div class="text-center mb-8">
                                <h4 class="text-2xl font-bold mb-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">ğŸ’ª Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ø¢Ù…Ø§Ø¯Ú¯ÛŒ ÙØ¹Ù„ÛŒ</h4>
                                <p class="text-gray-600 dark:text-gray-400">ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯</p>
                            </div>

                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div class="space-y-6">
                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ‹ï¸</span>
                                            ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù‚Ø¯Ø±Øª
                                        </h5>
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø´Ù†Ø§ÛŒ Ø³ÛŒÙ†Ù‡ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ (ØªØ¹Ø¯Ø§Ø¯)</label>
                                                <input type="number" id="pushupMax" class="w-full p-3 rounded-lg input-field" placeholder="0" min="0" max="100">
                                                <div class="text-xs text-gray-500 mt-1">Ø¨Ø¯ÙˆÙ† Ø§Ø³ØªØ±Ø§Ø­ØªØŒ ÙØ±Ù… Ú©Ø§Ù…Ù„</div>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ù¾Ù„Ø§Ù†Ú© Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ (Ø«Ø§Ù†ÛŒÙ‡)</label>
                                                <input type="number" id="plankTime" class="w-full p-3 rounded-lg input-field" placeholder="0" min="0" max="600">
                                                <div class="text-xs text-gray-500 mt-1">Ø­Ø¯Ø§Ú©Ø«Ø± Ø²Ù…Ø§Ù† Ø­ÙØ¸ ÙØ±Ù… ØµØ­ÛŒØ­</div>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø¨Ø§Ø±ÙÛŒÚ©Ø³ (ØªØ¹Ø¯Ø§Ø¯)</label>
                                                <input type="number" id="pullupMax" class="w-full p-3 rounded-lg input-field" placeholder="0" min="0" max="50">
                                                <div class="text-xs text-gray-500 mt-1">Ø§Ø®ØªÛŒØ§Ø±ÛŒ - Ú©Ø§Ù…Ù„ Ø§Ø² Ø¨Ø§Ù„Ø§ ØªØ§ Ù¾Ø§ÛŒÛŒÙ†</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ¤¸</span>
                                            Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±ÛŒ
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="flexibility" value="poor" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¶Ø¹ÛŒÙ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¯Ø³Øª Ø¨Ù‡ Ø²Ø§Ù†Ùˆ Ù†Ù…ÛŒâ€ŒØ±Ø³Ø¯</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="flexibility" value="fair" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ù…ØªÙˆØ³Ø·</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¯Ø³Øª Ø¨Ù‡ Ù‚ÙˆØ²Ú© Ù¾Ø§ Ù…ÛŒâ€ŒØ±Ø³Ø¯</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="flexibility" value="good" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø®ÙˆØ¨</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¯Ø³Øª Ø¨Ù‡ Ú©Ù Ù¾Ø§ Ù…ÛŒâ€ŒØ±Ø³Ø¯</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="flexibility" value="excellent" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¹Ø§Ù„ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ú©Ù Ø¯Ø³Øª Ø±ÙˆÛŒ Ø²Ù…ÛŒÙ† Ù…ÛŒâ€ŒÙ†Ø´ÛŒÙ†Ø¯</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="space-y-6">
                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">â¤ï¸</span>
                                            Ø§Ø³ØªÙ‚Ø§Ù…Øª Ù‚Ù„Ø¨ÛŒ-Ø¹Ø±ÙˆÙ‚ÛŒ
                                        </h5>
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø¯ÙˆÛŒØ¯Ù† Ù…Ø¯Ø§ÙˆÙ… (Ø¯Ù‚ÛŒÙ‚Ù‡)</label>
                                                <input type="number" id="runningTime" class="w-full p-3 rounded-lg input-field" placeholder="0" min="0" max="120">
                                                <div class="text-xs text-gray-500 mt-1">Ø¨Ø¯ÙˆÙ† ØªÙˆÙ‚ÙØŒ Ø³Ø±Ø¹Øª Ù…ØªÙˆØ³Ø·</div>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø¶Ø±Ø¨Ø§Ù† Ù‚Ù„Ø¨ Ø§Ø³ØªØ±Ø§Ø­Øª (BPM)</label>
                                                <input type="number" id="restingHR" class="w-full p-3 rounded-lg input-field" placeholder="70" min="40" max="120">
                                                <div class="text-xs text-gray-500 mt-1">ØµØ¨Ø­ØŒ 5 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¨Ø¹Ø¯ Ø§Ø² Ø¨ÛŒØ¯Ø§Ø± Ø´Ø¯Ù†</div>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø¨Ø§Ø²ÛŒØ§ÙØª Ù‚Ù„Ø¨ÛŒ (Ø¯Ù‚ÛŒÙ‚Ù‡)</label>
                                                <select id="recoveryRate" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="fast">Ø³Ø±ÛŒØ¹ (Ú©Ù…ØªØ± Ø§Ø² 2 Ø¯Ù‚ÛŒÙ‚Ù‡)</option>
                                                    <option value="normal">Ù…ØªÙˆØ³Ø· (2-5 Ø¯Ù‚ÛŒÙ‚Ù‡)</option>
                                                    <option value="slow">Ú©Ù†Ø¯ (Ø¨ÛŒØ´ Ø§Ø² 5 Ø¯Ù‚ÛŒÙ‚Ù‡)</option>
                                                </select>
                                                <div class="text-xs text-gray-500 mt-1">Ø²Ù…Ø§Ù† Ø¨Ø±Ú¯Ø´Øª Ø¶Ø±Ø¨Ø§Ù† Ø¨Ù‡ Ø­Ø§Ù„Øª Ø¹Ø§Ø¯ÛŒ</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ“ˆ</span>
                                            Ø³Ø§Ø¨Ù‚Ù‡ ÙˆØ±Ø²Ø´ÛŒ
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="experience" value="none" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ù‡ÛŒÚ† Ø³Ø§Ø¨Ù‚Ù‡ Ù†Ø¯Ø§Ø±Ù…</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø§ÙˆÙ„ÛŒÙ† Ø¨Ø§Ø±</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="experience" value="beginner" class="hidden">
                                                <div>
                                                    <div class="font-medium">ØªØ§Ø²Ù‡â€ŒÚ©Ø§Ø±</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ú©Ù…ØªØ± Ø§Ø² 6 Ù…Ø§Ù‡</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="experience" value="intermediate" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ù…ØªÙˆØ³Ø·</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">6 Ù…Ø§Ù‡ ØªØ§ 2 Ø³Ø§Ù„</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="experience" value="advanced" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ù¾ÛŒØ´Ø±ÙØªÙ‡</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">2 ØªØ§ 5 Ø³Ø§Ù„</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="experience" value="expert" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¨ÛŒØ´ Ø§Ø² 5 Ø³Ø§Ù„</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Fitness Level Analysis -->
                            <div id="fitnessResult" class="hidden analysis-result">
                                <h5 class="font-semibold text-primary mb-3 flex items-center">
                                    <span class="text-xl mr-2">ğŸ“Š</span>
                                    ØªØ­Ù„ÛŒÙ„ Ø³Ø·Ø­ Ø¢Ù…Ø§Ø¯Ú¯ÛŒ:
                                </h5>
                                <div id="fitnessAnalysis"></div>
                            </div>
                        </div>

                        <!-- Step 3: Body Type & Metabolism -->
                        <div id="step3" class="step hidden space-y-6">
                            <div class="text-center mb-8">
                                <h4 class="text-2xl font-bold mb-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">ğŸ§¬ ØªØ­Ù„ÛŒÙ„ Ú˜Ù†ØªÛŒÚ© ÙˆØ±Ø²Ø´ÛŒ</h4>
                                <p class="text-gray-600 dark:text-gray-400">Ø³ÙˆÙ…Ø§ØªÙˆØªØ§ÛŒÙ¾ Ùˆ Ù†Ø±Ø® Ù…ØªØ§Ø¨ÙˆÙ„ÛŒØ³Ù… Ø´Ù…Ø§</p>
                            </div>
                            
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div class="space-y-6">
                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">âš–ï¸</span>
                                            Ø§Ù„Ú¯ÙˆÛŒ ØªØºÛŒÛŒØ± ÙˆØ²Ù†
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="weightPattern" value="gain_very_easy" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø®ÛŒÙ„ÛŒ Ø¢Ø³Ø§Ù† ÙˆØ²Ù† Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†Ù…</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ÙÙ‚Ø· Ù†Ú¯Ø§Ù‡ Ú©Ù†Ù… Ø¨Ù‡ ØºØ°Ø§!</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="weightPattern" value="gain_easy" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¨Ù‡ Ø±Ø§Ø­ØªÛŒ ÙˆØ²Ù† Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†Ù…</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ú†Ù†Ø¯ Ø±ÙˆØ² Ø¨ÛŒâ€ŒØ§Ø­ØªÛŒØ§Ø·ÛŒ Ú©Ø§ÙÛŒÙ‡</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="weightPattern" value="stable" class="hidden">
                                                <div>
                                                    <div class="font-medium">ÙˆØ²Ù†Ù… Ø«Ø§Ø¨Øª Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ØªØºÛŒÛŒØ±Ø§Øª Ø®ÛŒÙ„ÛŒ Ú©Ù…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="weightPattern" value="lose_easy" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¨Ù‡ Ø±Ø§Ø­ØªÛŒ ÙˆØ²Ù† Ú©Ù… Ù…ÛŒâ€ŒÚ©Ù†Ù…</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ú©Ù… ØºØ°Ø§ Ø¨Ø®ÙˆØ±Ù…ØŒ ÙÙˆØ±ÛŒ Ù„Ø§ØºØ± Ù…ÛŒâ€ŒØ´Ù…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="weightPattern" value="lose_very_hard" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø®ÛŒÙ„ÛŒ Ø³Ø®Øª ÙˆØ²Ù† Ú©Ù… Ù…ÛŒâ€ŒÚ©Ù†Ù…</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¨Ø§ Ø³Ø®Øªâ€ŒØªØ±ÛŒÙ† Ø±Ú˜ÛŒÙ… Ù‡Ù… Ù†ØªÛŒØ¬Ù‡ Ù†Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù…</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ¦´</span>
                                            Ø³Ø§Ø®ØªØ§Ø± Ø§Ø³ØªØ®ÙˆØ§Ù†
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="frameSize" value="small" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¸Ø±ÛŒÙ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù…Ú†â€ŒÙ‡Ø§ Ú©ÙˆÚ†Ú©ØŒ Ø´Ø§Ù†Ù‡â€ŒÙ‡Ø§ Ø¨Ø§Ø±ÛŒÚ©</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="frameSize" value="medium" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ù…ØªÙˆØ³Ø·</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ØªÙ†Ø§Ø³Ø¨ Ø·Ø¨ÛŒØ¹ÛŒ</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="frameSize" value="large" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¯Ø±Ø´Øª</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù…Ú†â€ŒÙ‡Ø§ Ø¨Ø²Ø±Ú¯ØŒ Ø´Ø§Ù†Ù‡â€ŒÙ‡Ø§ Ù¾Ù‡Ù†</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ’ª</span>
                                            ØªÙˆØ§Ù†Ø§ÛŒÛŒ Ø¹Ø¶Ù„Ù‡â€ŒØ³Ø§Ø²ÛŒ
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="muscleGain" value="very_easy" class="hidden">
                                                <div>
                                                    <div class="font-medium">ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡ Ø¢Ø³Ø§Ù†</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ú†Ù†Ø¯ Ù‡ÙØªÙ‡ ØªÙ…Ø±ÛŒÙ†ØŒ ØªØºÛŒÛŒØ± Ù…Ø­Ø³ÙˆØ³</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="muscleGain" value="easy" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¢Ø³Ø§Ù†</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¨Ø§ ØªÙ…Ø±ÛŒÙ† Ù…Ù†Ø¸Ù… Ø¹Ø¶Ù„Ù‡ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="muscleGain" value="moderate" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ù…ØªÙˆØ³Ø·</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ„Ø§Ø´ Ù‚Ø§Ø¨Ù„ ØªÙˆØ¬Ù‡</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="muscleGain" value="hard" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø³Ø®Øª</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ØªÙ„Ø§Ø´ Ø²ÛŒØ§Ø¯ Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ±Ø§Øª Ú©Ù…</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="space-y-6">
                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ½ï¸</span>
                                            Ø§Ù„Ú¯ÙˆÛŒ Ø§Ø´ØªÙ‡Ø§
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="appetitePattern" value="always_hungry" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ù‡Ù…ÛŒØ´Ù‡ Ú¯Ø±Ø³Ù†Ù‡â€ŒØ§Ù…</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ÛŒÚ© Ø³Ø§Ø¹Øª Ø¨Ø¹Ø¯ Ø§Ø² ØºØ°Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡!</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="appetitePattern" value="normal" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø§Ø´ØªÙ‡Ø§ÛŒ Ø·Ø¨ÛŒØ¹ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">3 ÙˆØ¹Ø¯Ù‡ Ù…Ø¹Ù…ÙˆÙ„ÛŒ</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="appetitePattern" value="low" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø§Ø´ØªÙ‡Ø§ÛŒ Ú©Ù…</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¨Ø§ÛŒØ¯ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ú©Ù†Ù… Ú©Ù‡ ØºØ°Ø§ Ø¨Ø®ÙˆØ±Ù…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="appetitePattern" value="very_low" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø§Ø´ØªÙ‡Ø§ÛŒ Ø®ÛŒÙ„ÛŒ Ú©Ù…</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù…Ø¬Ø¨ÙˆØ± Ù…ÛŒâ€ŒØ´Ù… Ø®ÙˆØ¯Ù… Ø±Ùˆ ÙˆØ§Ø¯Ø§Ø± Ú©Ù†Ù…</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ”¥</span>
                                            Ù†Ø±Ø® Ø³ÙˆØ®Øªâ€ŒÙˆØ³Ø§Ø²
                                        </h5>
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø¯Ù…Ø§ÛŒ Ø¨Ø¯Ù† Ù…Ø¹Ù…ÙˆÙ„ÛŒ</label>
                                                <select id="bodyTemp" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="cold">Ù‡Ù…ÛŒØ´Ù‡ Ø³Ø±Ø¯Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯</option>
                                                    <option value="normal">Ø·Ø¨ÛŒØ¹ÛŒ</option>
                                                    <option value="warm">Ù‡Ù…ÛŒØ´Ù‡ Ú¯Ø±Ù…Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø§Ù†Ø±Ú˜ÛŒ Ù¾Ø³ Ø§Ø² ØºØ°Ø§</label>
                                                <select id="postMealEnergy" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="sleepy">Ø®ÙˆØ§Ø¨â€ŒØ¢Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ…</option>
                                                    <option value="normal">Ø¹Ø§Ø¯ÛŒ</option>
                                                    <option value="energetic">Ù¾Ø±Ø§Ù†Ø±Ú˜ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ…</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ°</span>
                                            ØªØ±Ø¬ÛŒØ­Ø§Øª ØºØ°Ø§ÛŒÛŒ
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="foodCravings" value="carbs" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ù†Ø§Ù†ØŒ Ø¨Ø±Ù†Ø¬ØŒ Ø´ÛŒØ±ÛŒÙ†ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø®ÛŒÙ„ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="foodCravings" value="protein" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ú¯ÙˆØ´ØªØŒ Ù…Ø±ØºØŒ Ù…Ø§Ù‡ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù…ÛŒÙ„ Ø²ÛŒØ§Ø¯ÛŒ Ø¯Ø§Ø±Ù…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="foodCravings" value="fats" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¢Ø¬ÛŒÙ„ØŒ Ø±ÙˆØºÙ†ØŒ Ù¾Ù†ÛŒØ±</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¯ÙˆØ³Øª Ø¯Ø§Ø±Ù…</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Body Type Result -->
                            <div id="bodyTypeResult" class="hidden analysis-result">
                                <h5 class="font-semibold text-primary mb-3 flex items-center">
                                    <span class="text-xl mr-2">ğŸ§¬</span>
                                    ØªØ­Ù„ÛŒÙ„ Ù†ÙˆØ¹ Ø¨Ø¯Ù† (Ø³ÙˆÙ…Ø§ØªÙˆØªØ§ÛŒÙ¾):
                                </h5>
                                <div id="bodyTypeAnalysis"></div>
                            </div>
                        </div>

                        <!-- Step 4: Goals & Timeline -->
                        <div id="step4" class="step hidden space-y-6">
                            <div class="text-center mb-8">
                                <h4 class="text-2xl font-bold mb-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">ğŸ¯ Ù‡Ø¯Ùâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</h4>
                                <p class="text-gray-600 dark:text-gray-400">ØªØ¹ÛŒÛŒÙ† Ø§Ù‡Ø¯Ø§Ù SMART Ùˆ Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ</p>
                            </div>

                            <div class="space-y-8">
                                <div class="metric-card p-6 rounded-2xl">
                                    <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                        <span class="text-xl mr-2">ğŸ†</span>
                                        Ù‡Ø¯Ù Ø§ØµÙ„ÛŒ Ø´Ù…Ø§ *
                                    </h5>
                                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <label class="option-card p-4 rounded-xl cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="radio" name="primaryGoal" value="weight_loss" class="hidden" required="">
                                            <div class="text-center">
                                                <span class="text-3xl mb-2 block">âš–ï¸</span>
                                                <div class="font-medium">Ú©Ø§Ù‡Ø´ ÙˆØ²Ù†</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ø³ÙˆØ²Ø§Ù†Ø¯Ù† Ú†Ø±Ø¨ÛŒ</div>
                                            </div>
                                        </label>
                                        <label class="option-card p-4 rounded-xl cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="radio" name="primaryGoal" value="muscle_gain" class="hidden">
                                            <div class="text-center">
                                                <span class="text-3xl mb-2 block">ğŸ’ª</span>
                                                <div class="font-medium">Ø§ÙØ²Ø§ÛŒØ´ Ø¹Ø¶Ù„Ù‡</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ù‡Ø§ÛŒÙ¾Ø±ØªØ±ÙˆÙÛŒ</div>
                                            </div>
                                        </label>
                                        <label class="option-card p-4 rounded-xl cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="radio" name="primaryGoal" value="strength" class="hidden">
                                            <div class="text-center">
                                                <span class="text-3xl mb-2 block">ğŸ‹ï¸</span>
                                                <div class="font-medium">Ø§ÙØ²Ø§ÛŒØ´ Ù‚Ø¯Ø±Øª</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ù¾Ø§ÙˆØ±Ù„ÛŒÙØªÛŒÙ†Ú¯</div>
                                            </div>
                                        </label>
                                        <label class="option-card p-4 rounded-xl cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="radio" name="primaryGoal" value="endurance" class="hidden">
                                            <div class="text-center">
                                                <span class="text-3xl mb-2 block">ğŸƒ</span>
                                                <div class="font-medium">Ø§Ø³ØªÙ‚Ø§Ù…Øª</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ù‚Ù„Ø¨ÛŒ-Ø¹Ø±ÙˆÙ‚ÛŒ</div>
                                            </div>
                                        </label>
                                        <label class="option-card p-4 rounded-xl cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="radio" name="primaryGoal" value="martial_arts" class="hidden">
                                            <div class="text-center">
                                                <span class="text-3xl mb-2 block">ğŸ¥‹</span>
                                                <div class="font-medium">Ù‡Ù†Ø±Ù‡Ø§ÛŒ Ø±Ø²Ù…ÛŒ</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ù‚Ø¯Ø±Øª Ø¹Ù…Ù„Ú©Ø±Ø¯ÛŒ</div>
                                            </div>
                                        </label>
                                        <label class="option-card p-4 rounded-xl cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="radio" name="primaryGoal" value="flexibility" class="hidden">
                                            <div class="text-center">
                                                <span class="text-3xl mb-2 block">ğŸ¤¸</span>
                                                <div class="font-medium">Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±ÛŒ</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">ÛŒÙˆÚ¯Ø§ Ùˆ Ù…ÙˆØ¨ÛŒÙ„ÛŒØªÛŒ</div>
                                            </div>
                                        </label>
                                        <label class="option-card p-4 rounded-xl cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="radio" name="primaryGoal" value="athletic" class="hidden">
                                            <div class="text-center">
                                                <span class="text-3xl mb-2 block">âš½</span>
                                                <div class="font-medium">Ø¹Ù…Ù„Ú©Ø±Ø¯ ÙˆØ±Ø²Ø´ÛŒ</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">ÙˆØ±Ø²Ø´ Ø®Ø§Øµ</div>
                                            </div>
                                        </label>
                                        <label class="option-card p-4 rounded-xl cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="radio" name="primaryGoal" value="general_health" class="hidden">
                                            <div class="text-center">
                                                <span class="text-3xl mb-2 block">â¤ï¸</span>
                                                <div class="font-medium">Ø³Ù„Ø§Ù…Øª Ú©Ù„ÛŒ</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">ØªÙ†Ø§Ø³Ø¨ Ø§Ù†Ø¯Ø§Ù…</div>
                                            </div>
                                        </label>
                                        <label class="option-card p-4 rounded-xl cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="radio" name="primaryGoal" value="rehabilitation" class="hidden">
                                            <div class="text-center">
                                                <span class="text-3xl mb-2 block">ğŸ©¹</span>
                                                <div class="font-medium">Ø¨Ø§Ø²ØªÙˆØ§Ù†ÛŒ</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ø¯Ø±Ù…Ø§Ù† Ùˆ ØªØ±Ù…ÛŒÙ…</div>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ“…</span>
                                            Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø²Ù…Ø§Ù†ÛŒ *
                                        </h5>
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø±ÙˆØ²Ù‡Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ø¯Ø± Ù‡ÙØªÙ‡</label>
                                                <select id="trainingDays" class="w-full p-3 rounded-lg select-field" required="">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="2">2 Ø±ÙˆØ² Ø¯Ø± Ù‡ÙØªÙ‡</option>
                                                    <option value="3">3 Ø±ÙˆØ² Ø¯Ø± Ù‡ÙØªÙ‡</option>
                                                    <option value="4">4 Ø±ÙˆØ² Ø¯Ø± Ù‡ÙØªÙ‡</option>
                                                    <option value="5">5 Ø±ÙˆØ² Ø¯Ø± Ù‡ÙØªÙ‡</option>
                                                    <option value="6">6 Ø±ÙˆØ² Ø¯Ø± Ù‡ÙØªÙ‡</option>
                                                    <option value="7">Ø±ÙˆØ²Ø§Ù†Ù‡</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ù…Ø¯Øª Ù‡Ø± Ø¬Ù„Ø³Ù‡ (Ø¯Ù‚ÛŒÙ‚Ù‡)</label>
                                                <select id="sessionLength" class="w-full p-3 rounded-lg select-field" required="">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="20">20 Ø¯Ù‚ÛŒÙ‚Ù‡ (Ø³Ø±ÛŒØ¹)</option>
                                                    <option value="30">30 Ø¯Ù‚ÛŒÙ‚Ù‡ (Ú©ÙˆØªØ§Ù‡)</option>
                                                    <option value="45">45 Ø¯Ù‚ÛŒÙ‚Ù‡ (Ù…ØªÙˆØ³Ø·)</option>
                                                    <option value="60">60 Ø¯Ù‚ÛŒÙ‚Ù‡ (Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯)</option>
                                                    <option value="75">75 Ø¯Ù‚ÛŒÙ‚Ù‡ (Ø·ÙˆÙ„Ø§Ù†ÛŒ)</option>
                                                    <option value="90">90 Ø¯Ù‚ÛŒÙ‚Ù‡ (Ú©Ø§Ù…Ù„)</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø²Ù…Ø§Ù† Ù…Ø·Ù„ÙˆØ¨ ØªÙ…Ø±ÛŒÙ†</label>
                                                <select id="preferredTime" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="early_morning">ØµØ¨Ø­ Ø²ÙˆØ¯ (5-7)</option>
                                                    <option value="morning">ØµØ¨Ø­ (7-10)</option>
                                                    <option value="midday">Ø¸Ù‡Ø± (10-14)</option>
                                                    <option value="afternoon">Ø¨Ø¹Ø¯Ø§Ø²Ø¸Ù‡Ø± (14-18)</option>
                                                    <option value="evening">Ø¹ØµØ± (18-21)</option>
                                                    <option value="night">Ø´Ø¨ (21-23)</option>
                                                    <option value="flexible">Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸšï¸</span>
                                            Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ ØªÙ…Ø±ÛŒÙ†Ø§Øª
                                        </h5>
                                        <div class="space-y-4">
                                            <div class="flex items-center justify-between">
                                                <span class="text-sm">ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‚Ø¯Ø±ØªÛŒ:</span>
                                                <div class="flex items-center gap-2">
                                                    <input type="range" id="strengthPriority" min="0" max="10" value="5" class="w-20">
                                                    <span id="strengthValue" class="text-sm w-6 font-bold text-primary">5</span>
                                                </div>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <span class="text-sm">ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‡ÙˆØ§Ø²ÛŒ:</span>
                                                <div class="flex items-center gap-2">
                                                    <input type="range" id="cardioPriority" min="0" max="10" value="5" class="w-20">
                                                    <span id="cardioValue" class="text-sm w-6 font-bold text-primary">5</span>
                                                </div>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <span class="text-sm">Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±ÛŒ:</span>
                                                <div class="flex items-center gap-2">
                                                    <input type="range" id="flexibilityPriority" min="0" max="10" value="5" class="w-20">
                                                    <span id="flexibilityValue" class="text-sm w-6 font-bold text-primary">5</span>
                                                </div>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <span class="text-sm">ØªØ¹Ø§Ø¯Ù„ Ùˆ Ø«Ø¨Ø§Øª:</span>
                                                <div class="flex items-center gap-2">
                                                    <input type="range" id="balancePriority" min="0" max="10" value="5" class="w-20">
                                                    <span id="balanceValue" class="text-sm w-6 font-bold text-primary">5</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Goal Analysis -->
                                <div id="goalAnalysis" class="hidden analysis-result">
                                    <h5 class="font-semibold text-primary mb-3 flex items-center">
                                        <span class="text-xl mr-2">ğŸ¯</span>
                                        ØªØ­Ù„ÛŒÙ„ Ù‡Ø¯Ù Ø§Ù†ØªØ®Ø§Ø¨ÛŒ:
                                    </h5>
                                    <div id="goalAnalysisContent"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 5: Equipment & Environment -->
                        <div id="step5" class="step hidden space-y-6">
                            <div class="text-center mb-8">
                                <h4 class="text-2xl font-bold mb-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">ğŸ‹ï¸ ØªØ¬Ù‡ÛŒØ²Ø§Øª Ùˆ Ù…Ø­ÛŒØ·</h4>
                                <p class="text-gray-600 dark:text-gray-400">Ø§Ù…Ú©Ø§Ù†Ø§Øª Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ†</p>
                            </div>

                            <div class="space-y-8">
                                <div class="metric-card p-6 rounded-2xl">
                                    <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                        <span class="text-xl mr-2">ğŸƒ</span>
                                        Ù†ÙˆØ¹ ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù…ÙˆØ±Ø¯ Ø¹Ù„Ø§Ù‚Ù‡ *
                                    </h5>
                                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                                        <label class="option-card p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="exerciseTypes" value="weightlifting" class="hidden">
                                            <div class="text-center">
                                                <span class="text-2xl mb-1 block">ğŸ‹ï¸</span>
                                                <span class="text-sm">ÙˆØ²Ù†Ù‡â€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ</span>
                                            </div>
                                        </label>
                                        <label class="option-card p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="exerciseTypes" value="bodyweight" class="hidden">
                                            <div class="text-center">
                                                <span class="text-2xl mb-1 block">ğŸ¤¸</span>
                                                <span class="text-sm">ÙˆØ²Ù† Ø¨Ø¯Ù†</span>
                                            </div>
                                        </label>
                                        <label class="option-card p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="exerciseTypes" value="cardio" class="hidden">
                                            <div class="text-center">
                                                <span class="text-2xl mb-1 block">ğŸƒ</span>
                                                <span class="text-sm">Ù‡ÙˆØ§Ø²ÛŒ</span>
                                            </div>
                                        </label>
                                        <label class="option-card p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="exerciseTypes" value="hiit" class="hidden">
                                            <div class="text-center">
                                                <span class="text-2xl mb-1 block">âš¡</span>
                                                <span class="text-sm">HIIT</span>
                                            </div>
                                        </label>
                                        <label class="option-card p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="exerciseTypes" value="yoga" class="hidden">
                                            <div class="text-center">
                                                <span class="text-2xl mb-1 block">ğŸ§˜</span>
                                                <span class="text-sm">ÛŒÙˆÚ¯Ø§</span>
                                            </div>
                                        </label>
                                        <label class="option-card p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="exerciseTypes" value="pilates" class="hidden">
                                            <div class="text-center">
                                                <span class="text-2xl mb-1 block">ğŸƒâ€â™€ï¸</span>
                                                <span class="text-sm">Ù¾ÛŒÙ„Ø§ØªØ³</span>
                                            </div>
                                        </label>
                                        <label class="option-card p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="exerciseTypes" value="swimming" class="hidden">
                                            <div class="text-center">
                                                <span class="text-2xl mb-1 block">ğŸŠ</span>
                                                <span class="text-sm">Ø´Ù†Ø§</span>
                                            </div>
                                        </label>
                                        <label class="option-card p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="exerciseTypes" value="running" class="hidden">
                                            <div class="text-center">
                                                <span class="text-2xl mb-1 block">ğŸƒâ€â™‚ï¸</span>
                                                <span class="text-sm">Ø¯ÙˆÛŒØ¯Ù†</span>
                                            </div>
                                        </label>
                                        <label class="option-card p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="exerciseTypes" value="cycling" class="hidden">
                                            <div class="text-center">
                                                <span class="text-2xl mb-1 block">ğŸš´</span>
                                                <span class="text-sm">Ø¯ÙˆÚ†Ø±Ø®Ù‡</span>
                                            </div>
                                        </label>
                                        <label class="option-card p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="exerciseTypes" value="martial_arts" class="hidden">
                                            <div class="text-center">
                                                <span class="text-2xl mb-1 block">ğŸ¥‹</span>
                                                <span class="text-sm">Ø±Ø²Ù…ÛŒ</span>
                                            </div>
                                        </label>
                                        <label class="option-card p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="exerciseTypes" value="crossfit" class="hidden">
                                            <div class="text-center">
                                                <span class="text-2xl mb-1 block">ğŸ’ª</span>
                                                <span class="text-sm">Ú©Ø±Ø§Ø³â€ŒÙÛŒØª</span>
                                            </div>
                                        </label>
                                        <label class="option-card p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="exerciseTypes" value="functional" class="hidden">
                                            <div class="text-center">
                                                <span class="text-2xl mb-1 block">âš–ï¸</span>
                                                <span class="text-sm">Ø¹Ù…Ù„Ú©Ø±Ø¯ÛŒ</span>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ¯</span>
                                            ØªØ¬Ù‡ÛŒØ²Ø§Øª Ù…ÙˆØ¬ÙˆØ¯ *
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="equipment" value="full_gym" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ú©Ø§Ù…Ù„</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ØªÙ…Ø§Ù… ØªØ¬Ù‡ÛŒØ²Ø§Øª Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="equipment" value="home_gym" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø³Ø§Ù„Ù† Ø®Ø§Ù†Ú¯ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ØªØ¬Ù‡ÛŒØ²Ø§Øª Ø´Ø®ØµÛŒ</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="equipment" value="dumbbells" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¯Ù…Ø¨Ù„</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ÙˆØ²Ù†â€ŒÙ‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="equipment" value="barbell" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ù‡Ø§Ù„ØªØ±</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù…ÛŒÙ„Ù‡â€ŒÛŒ Ø§Ù„Ù…Ù¾ÛŒÚ©</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="equipment" value="resistance_bands" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ú©Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ù‚Ø§ÙˆÙ…ØªÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø§Ù†ÙˆØ§Ø¹ Ù…Ù‚Ø§ÙˆÙ…Øª</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="equipment" value="kettlebells" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ú©ØªÙ„â€ŒØ¨Ù„</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ØªÙ…Ø±ÛŒÙ†Ø§Øª Ø¹Ù…Ù„Ú©Ø±Ø¯ÛŒ</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="equipment" value="pull_up_bar" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¨Ø§Ø± Ø¨Ø§Ø±ÙÛŒÚ©Ø³</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù†ØµØ¨ Ø¯Ø±Ø¨ ÛŒØ§ Ø¯ÛŒÙˆØ§Ø±</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="equipment" value="cardio_machine" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¯Ø³ØªÚ¯Ø§Ù‡ Ù‡ÙˆØ§Ø²ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ØªØ±Ø¯Ù…ÛŒÙ„ØŒ Ø¯ÙˆÚ†Ø±Ø®Ù‡ Ø«Ø§Ø¨Øª</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="equipment" value="bodyweight_only" class="hidden">
                                                <div>
                                                    <div class="font-medium">ÙÙ‚Ø· ÙˆØ²Ù† Ø¨Ø¯Ù†</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¨Ø¯ÙˆÙ† Ù‡ÛŒÚ† ØªØ¬Ù‡ÛŒØ²Ø§Øª</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ </span>
                                            Ù…Ø­ÛŒØ· ØªÙ…Ø±ÛŒÙ† *
                                        </h5>
                                        <div class="space-y-3 mb-6">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="environment" value="gym" class="hidden" required="">
                                                <div>
                                                    <div class="font-medium">Ø¨Ø§Ø´Ú¯Ø§Ù‡</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¯Ø³ØªØ±Ø³ÛŒ Ø¢Ø²Ø§Ø¯ Ø¨Ù‡ ØªØ¬Ù‡ÛŒØ²Ø§Øª</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="environment" value="home" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø®Ø§Ù†Ù‡</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø±Ø§Ø­ØªÛŒ Ùˆ Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±ÛŒ</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="environment" value="outdoor" class="hidden">
                                                <div>
                                                    <div class="font-medium">ÙØ¶Ø§ÛŒ Ø¨Ø§Ø²</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù¾Ø§Ø±Ú©ØŒ Ø®ÛŒØ§Ø¨Ø§Ù†ØŒ Ø·Ø¨ÛŒØ¹Øª</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="environment" value="mixed" class="hidden">
                                                <div>
                                                    <div class="font-medium">ØªØ±Ú©ÛŒØ¨ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ø´Ø±Ø§ÛŒØ·</div>
                                                </div>
                                            </label>
                                        </div>
                                        
                                        <div>
                                            <h6 class="font-medium mb-3 text-amber-600">Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ ÙØ¶Ø§ÛŒÛŒ</h6>
                                            <div class="space-y-2">
                                                <label class="flex items-center option-card p-2 rounded-lg cursor-pointer border border-gray-200 dark:border-gray-600">
                                                    <input type="checkbox" name="spaceConstraints" value="noise" class="hidden">
                                                    <span class="text-sm">Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ø³Ø± Ùˆ ØµØ¯Ø§ Ú©Ù†Ù…</span>
                                                </label>
                                                <label class="flex items-center option-card p-2 rounded-lg cursor-pointer border border-gray-200 dark:border-gray-600">
                                                    <input type="checkbox" name="spaceConstraints" value="jumping" class="hidden">
                                                    <span class="text-sm">Ø§Ù…Ú©Ø§Ù† Ù¾Ø±Ø´ Ù†Ø¯Ø§Ø±Ù…</span>
                                                </label>
                                                <label class="flex items-center option-card p-2 rounded-lg cursor-pointer border border-gray-200 dark:border-gray-600">
                                                    <input type="checkbox" name="spaceConstraints" value="limited_space" class="hidden">
                                                    <span class="text-sm">ÙØ¶Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯ (Ú©Ù…ØªØ± Ø§Ø² 2Ã—2 Ù…ØªØ±)</span>
                                                </label>
                                                <label class="flex items-center option-card p-2 rounded-lg cursor-pointer border border-gray-200 dark:border-gray-600">
                                                    <input type="checkbox" name="spaceConstraints" value="low_ceiling" class="hidden">
                                                    <span class="text-sm">Ø³Ù‚Ù Ú©ÙˆØªØ§Ù‡</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 6: Health & Medical -->
                        <div id="step6" class="step hidden space-y-6">
                            <div class="text-center mb-8">
                                <h4 class="text-2xl font-bold mb-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">ğŸ¥ Ø³Ù„Ø§Ù…Øª Ùˆ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§</h4>
                                <p class="text-gray-600 dark:text-gray-400">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø²Ø´Ú©ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ø§ÛŒÙ…Ù†</p>
                            </div>

                            <div class="space-y-8">
                                <div class="metric-card p-6 rounded-2xl">
                                    <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                        <span class="text-xl mr-2">â¤ï¸</span>
                                        ÙˆØ¶Ø¹ÛŒØª Ø³Ù„Ø§Ù…Øª Ú©Ù„ÛŒ
                                    </h5>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                        <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="healthConditions" value="none" class="hidden">
                                            <div>
                                                <div class="font-medium text-green-600">âœ… Ø³Ø§Ù„Ù… Ù‡Ø³ØªÙ…</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ù‡ÛŒÚ† Ù…Ø´Ú©Ù„ Ø®Ø§ØµÛŒ Ù†Ø¯Ø§Ø±Ù…</div>
                                            </div>
                                        </label>
                                        <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="healthConditions" value="heart_disease" class="hidden">
                                            <div>
                                                <div class="font-medium text-red-600">â¤ï¸ Ù…Ø´Ú©Ù„ Ù‚Ù„Ø¨ÛŒ</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ø¢Ø±ÛŒØªÙ…ÛŒØŒ Ù†Ø§Ø±Ø³Ø§ÛŒÛŒ Ù‚Ù„Ø¨</div>
                                            </div>
                                        </label>
                                        <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="healthConditions" value="hypertension" class="hidden">
                                            <div>
                                                <div class="font-medium text-orange-600">ğŸ“ˆ ÙØ´Ø§Ø± Ø®ÙˆÙ† Ø¨Ø§Ù„Ø§</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ù‡ÛŒÙ¾Ø±ØªÙ†Ø´Ù†</div>
                                            </div>
                                        </label>
                                        <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="healthConditions" value="diabetes" class="hidden">
                                            <div>
                                                <div class="font-medium text-blue-600">ğŸ©¸ Ø¯ÛŒØ§Ø¨Øª</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ù†ÙˆØ¹ 1 ÛŒØ§ 2</div>
                                            </div>
                                        </label>
                                        <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="healthConditions" value="asthma" class="hidden">
                                            <div>
                                                <div class="font-medium text-purple-600">ğŸ« Ø¢Ø³Ù…</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ù…Ø´Ú©Ù„ ØªÙ†ÙØ³ÛŒ</div>
                                            </div>
                                        </label>
                                        <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="healthConditions" value="arthritis" class="hidden">
                                            <div>
                                                <div class="font-medium text-yellow-600">ğŸ¦´ Ø¢Ø±ØªØ±ÛŒØª</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ø§Ù„ØªÙ‡Ø§Ø¨ Ù…ÙØ§ØµÙ„</div>
                                            </div>
                                        </label>
                                        <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="healthConditions" value="thyroid" class="hidden">
                                            <div>
                                                <div class="font-medium text-indigo-600">ğŸ§¬ Ù…Ø´Ú©Ù„ ØªÛŒØ±ÙˆØ¦ÛŒØ¯</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ú©Ù…â€ŒÚ©Ø§Ø±ÛŒ ÛŒØ§ Ù¾Ø±Ú©Ø§Ø±ÛŒ</div>
                                            </div>
                                        </label>
                                        <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                            <input type="checkbox" name="healthConditions" value="other" class="hidden">
                                            <div>
                                                <div class="font-medium text-gray-600">â“ Ø³Ø§ÛŒØ± Ù…ÙˆØ§Ø±Ø¯</div>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">Ø¯Ø± Ù‚Ø³Ù…Øª ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯</div>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ©¹</span>
                                            Ø¢Ø³ÛŒØ¨â€ŒÙ‡Ø§ Ùˆ Ø¯Ø±Ø¯
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="injuries" value="none" class="hidden">
                                                <div>
                                                    <div class="font-medium text-green-600">âœ… Ø¨Ø¯ÙˆÙ† Ø¢Ø³ÛŒØ¨</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù‡ÛŒÚ† Ø¯Ø±Ø¯ ÛŒØ§ Ù…Ø´Ú©Ù„ÛŒ Ù†Ø¯Ø§Ø±Ù…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="injuries" value="back_pain" class="hidden">
                                                <div>
                                                    <div class="font-medium text-red-600">ğŸ”´ Ø¯Ø±Ø¯ Ú©Ù…Ø±</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù…Ø²Ù…Ù† ÛŒØ§ Ú¯Ø§Ù‡â€ŒØ¨Ù‡â€ŒÚ¯Ø§Ù‡</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="injuries" value="neck_pain" class="hidden">
                                                <div>
                                                    <div class="font-medium text-orange-600">ğŸŸ  Ø¯Ø±Ø¯ Ú¯Ø±Ø¯Ù†</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ú©Ø§Ø± Ø·ÙˆÙ„Ø§Ù†ÛŒ Ù¾Ø´Øª Ù…ÛŒØ²</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="injuries" value="knee_pain" class="hidden">
                                                <div>
                                                    <div class="font-medium text-blue-600">ğŸ”µ Ø¯Ø±Ø¯ Ø²Ø§Ù†Ùˆ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¢Ø³ÛŒØ¨ Ù‚Ø¯ÛŒÙ…ÛŒ ÛŒØ§ ÙØ¹Ù„ÛŒ</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="injuries" value="shoulder_pain" class="hidden">
                                                <div>
                                                    <div class="font-medium text-purple-600">ğŸŸ£ Ø¯Ø±Ø¯ Ø´Ø§Ù†Ù‡</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø­Ø±Ú©ØªÛŒ</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="injuries" value="wrist_pain" class="hidden">
                                                <div>
                                                    <div class="font-medium text-yellow-600">ğŸŸ¡ Ø¯Ø±Ø¯ Ù…Ú† Ø¯Ø³Øª</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ú©Ø§Ø±Ù¾Ø§Ù„ ØªÙˆÙ†Ù„ ÛŒØ§ Ø§Ù„ØªÙ‡Ø§Ø¨</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="injuries" value="ankle_pain" class="hidden">
                                                <div>
                                                    <div class="font-medium text-pink-600">ğŸ©· Ø¯Ø±Ø¯ Ù…Ú† Ù¾Ø§</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù¾ÛŒÚ† Ø®ÙˆØ±Ø¯Ú¯ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸš¶</span>
                                            Ø³Ø·Ø­ ÙØ¹Ø§Ù„ÛŒØª Ø±ÙˆØ²Ø§Ù†Ù‡
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="dailyActivity" value="sedentary" class="hidden">
                                                <div>
                                                    <div class="font-medium">ğŸª‘ Ù†Ø´Ø³ØªÙ‡</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ú©Ø§Ø± Ø§Ø¯Ø§Ø±ÛŒØŒ Ø¨ÛŒØ´ Ø§Ø² 8 Ø³Ø§Ø¹Øª Ù†Ø´Ø³ØªÙ†</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="dailyActivity" value="light" class="hidden">
                                                <div>
                                                    <div class="font-medium">ğŸš¶ ÙØ¹Ø§Ù„ÛŒØª Ø³Ø¨Ú©</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ú¯Ø§Ù‡ÛŒ Ø±Ø§Ù‡ Ø±ÙØªÙ†ØŒ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø®Ø§Ù†Ù‡</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="dailyActivity" value="moderate" class="hidden">
                                                <div>
                                                    <div class="font-medium">ğŸš´ ÙØ¹Ø§Ù„ÛŒØª Ù…ØªÙˆØ³Ø·</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ú©Ø§Ø± Ø§ÛŒØ³ØªØ§Ø¯Ù‡ØŒ Ø¬Ø§Ø¨Ù‡â€ŒØ¬Ø§ÛŒÛŒ Ø²ÛŒØ§Ø¯</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="dailyActivity" value="active" class="hidden">
                                                <div>
                                                    <div class="font-medium">ğŸƒ ÙØ¹Ø§Ù„</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ú©Ø§Ø± ÙÛŒØ²ÛŒÚ©ÛŒØŒ Ø­Ø±Ú©Øª Ù…Ø¯Ø§ÙˆÙ…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="dailyActivity" value="very_active" class="hidden">
                                                <div>
                                                    <div class="font-medium">ğŸ’ª Ø¨Ø³ÛŒØ§Ø± ÙØ¹Ø§Ù„</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ú©Ø§Ø± Ø³Ù†Ú¯ÛŒÙ† ÙÛŒØ²ÛŒÚ©ÛŒ</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="metric-card p-6 rounded-2xl">
                                    <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                        <span class="text-xl mr-2">ğŸ’Š</span>
                                        Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ
                                    </h5>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium mb-2">Ø¯Ø§Ø±Ùˆ ÛŒØ§ Ù…Ú©Ù…Ù„â€ŒÙ‡Ø§ÛŒ ÙØ¹Ù„ÛŒ</label>
                                            <textarea id="medications" class="w-full p-3 rounded-lg input-field" rows="3" placeholder="Ù…Ø«Ø§Ù„: ÙˆÛŒØªØ§Ù…ÛŒÙ† Ø¯ÛŒØŒ Ø§ÙˆÙ…Ú¯Ø§ 3ØŒ Ù‚Ø±Øµ ÙØ´Ø§Ø± Ø®ÙˆÙ†..."></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-2">ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø¬Ø±Ø§Ø­ÛŒ ÛŒØ§ Ø¢Ø³ÛŒØ¨ Ù…Ù‡Ù…</label>
                                            <textarea id="medicalHistory" class="w-full p-3 rounded-lg input-field" rows="3" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ù…Ù„ Ø²Ø§Ù†Ùˆ Ø¯Ø± Ø³Ø§Ù„ Ú¯Ø°Ø´ØªÙ‡ØŒ Ø´Ú©Ø³ØªÚ¯ÛŒ Ù…Ú† Ø¯Ø³Øª..."></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 7: Lifestyle -->
                        <div id="step7" class="step hidden space-y-6">
                            <div class="text-center mb-8">
                                <h4 class="text-2xl font-bold mb-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">ğŸŒ± Ø³Ø¨Ú© Ø²Ù†Ø¯Ú¯ÛŒ</h4>
                                <p class="text-gray-600 dark:text-gray-400">Ø¹Ø§Ø¯Ø§Øª Ø±ÙˆØ²Ø§Ù†Ù‡ ØªØ£Ø«ÛŒØ±Ú¯Ø°Ø§Ø± Ø¨Ø± Ù†ØªØ§ÛŒØ¬</p>
                            </div>

                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div class="space-y-6">
                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ˜´</span>
                                            Ø§Ù„Ú¯ÙˆÛŒ Ø®ÙˆØ§Ø¨
                                        </h5>
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø³Ø§Ø¹Ø§Øª Ø®ÙˆØ§Ø¨ Ø´Ø¨Ø§Ù†Ù‡</label>
                                                <select id="sleepHours" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="less_5">Ú©Ù…ØªØ± Ø§Ø² 5 Ø³Ø§Ø¹Øª</option>
                                                    <option value="5_6">5-6 Ø³Ø§Ø¹Øª</option>
                                                    <option value="6_7">6-7 Ø³Ø§Ø¹Øª</option>
                                                    <option value="7_8">7-8 Ø³Ø§Ø¹Øª</option>
                                                    <option value="8_9">8-9 Ø³Ø§Ø¹Øª</option>
                                                    <option value="more_9">Ø¨ÛŒØ´ Ø§Ø² 9 Ø³Ø§Ø¹Øª</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ú©ÛŒÙÛŒØª Ø®ÙˆØ§Ø¨</label>
                                                <select id="sleepQuality" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="poor">Ø¶Ø¹ÛŒÙ (Ù…Ú©Ø±Ø± Ø¨ÛŒØ¯Ø§Ø± Ù…ÛŒâ€ŒØ´ÙˆÙ…)</option>
                                                    <option value="fair">Ù…ØªÙˆØ³Ø· (Ú¯Ø§Ù‡ÛŒ Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±Ù…)</option>
                                                    <option value="good">Ø®ÙˆØ¨ (Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø±Ø§Ø­Øª Ù…ÛŒâ€ŒØ®ÙˆØ§Ø¨Ù…)</option>
                                                    <option value="excellent">Ø¹Ø§Ù„ÛŒ (Ø¹Ù…ÛŒÙ‚ Ùˆ Ø¨Ø¯ÙˆÙ† ÙˆÙ‚ÙÙ‡)</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø²Ù…Ø§Ù† Ø®ÙˆØ§Ø¨ Ù…Ø¹Ù…ÙˆÙ„ÛŒ</label>
                                                <select id="bedTime" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="early">Ø²ÙˆØ¯ (21-22)</option>
                                                    <option value="normal">Ù…ØªÙˆØ³Ø· (22-23)</option>
                                                    <option value="late">Ø¯ÛŒØ± (23-24)</option>
                                                    <option value="very_late">Ø®ÛŒÙ„ÛŒ Ø¯ÛŒØ± (Ø¨Ø¹Ø¯ Ø§Ø² 24)</option>
                                                    <option value="irregular">Ù†Ø§Ù…Ù†Ø¸Ù…</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ§ </span>
                                            Ø§Ø³ØªØ±Ø³ Ùˆ Ø§Ù†Ø±Ú˜ÛŒ
                                        </h5>
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ù…ÛŒØ²Ø§Ù† Ø§Ø³ØªØ±Ø³ Ø±ÙˆØ²Ø§Ù†Ù‡</label>
                                                <select id="stressLevel" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="very_low">Ø®ÛŒÙ„ÛŒ Ú©Ù… (Ø¢Ø±Ø§Ù… Ùˆ Ø±Ø§Ø­Øª)</option>
                                                    <option value="low">Ú©Ù… (Ø§Ø³ØªØ±Ø³ Ù…Ø¹Ù…ÙˆÙ„ÛŒ)</option>
                                                    <option value="moderate">Ù…ØªÙˆØ³Ø· (ÙØ´Ø§Ø± Ú©Ø§Ø±ÛŒ)</option>
                                                    <option value="high">Ø²ÛŒØ§Ø¯ (Ø§Ø³ØªØ±Ø³ Ù…Ø¯Ø§ÙˆÙ…)</option>
                                                    <option value="very_high">Ø®ÛŒÙ„ÛŒ Ø²ÛŒØ§Ø¯ (Ø¨Ø­Ø±Ø§Ù†ÛŒ)</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø³Ø·Ø­ Ø§Ù†Ø±Ú˜ÛŒ Ù…Ø¹Ù…ÙˆÙ„ÛŒ</label>
                                                <select id="energyLevel" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="very_low">Ø®ÛŒÙ„ÛŒ Ú©Ù… (Ù‡Ù…ÛŒØ´Ù‡ Ø®Ø³ØªÙ‡)</option>
                                                    <option value="low">Ú©Ù… (Ø§Ú©Ø«Ø± Ø§ÙˆÙ‚Ø§Øª Ú©Ø³Ù„)</option>
                                                    <option value="moderate">Ù…ØªÙˆØ³Ø· (Ù†Ø±Ù…Ø§Ù„)</option>
                                                    <option value="high">Ø²ÛŒØ§Ø¯ (Ù¾Ø±Ø§Ù†Ø±Ú˜ÛŒ)</option>
                                                    <option value="very_high">Ø®ÛŒÙ„ÛŒ Ø²ÛŒØ§Ø¯ (Ø´Ø§Ø¯Ø§Ø¨)</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø¨Ù‡ØªØ±ÛŒÙ† Ø²Ù…Ø§Ù† Ø§Ù†Ø±Ú˜ÛŒ</label>
                                                <select id="energyPeak" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="morning">ØµØ¨Ø­ (6-12)</option>
                                                    <option value="afternoon">Ø¨Ø¹Ø¯Ø§Ø²Ø¸Ù‡Ø± (12-18)</option>
                                                    <option value="evening">Ø¹ØµØ± (18-21)</option>
                                                    <option value="night">Ø´Ø¨ (21-24)</option>
                                                    <option value="variable">Ù…ØªØºÛŒØ±</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="space-y-6">
                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ½ï¸</span>
                                            Ø¹Ø§Ø¯Ø§Øª ØºØ°Ø§ÛŒÛŒ
                                        </h5>
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">ØªØ¹Ø¯Ø§Ø¯ ÙˆØ¹Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØºØ°Ø§ÛŒÛŒ</label>
                                                <select id="mealsPerDay" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="1">1 ÙˆØ¹Ø¯Ù‡ (OMAD)</option>
                                                    <option value="2">2 ÙˆØ¹Ø¯Ù‡ (ØµØ¨Ø­Ø§Ù†Ù‡ + Ù†Ù‡Ø§Ø± ÛŒØ§ Ø´Ø§Ù…)</option>
                                                    <option value="3">3 ÙˆØ¹Ø¯Ù‡ (Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯)</option>
                                                    <option value="4">4 ÙˆØ¹Ø¯Ù‡ (+ ÛŒÚ© Ù…ÛŒØ§Ù†â€ŒÙˆØ¹Ø¯Ù‡)</option>
                                                    <option value="5">5 ÙˆØ¹Ø¯Ù‡ (+ Ø¯Ùˆ Ù…ÛŒØ§Ù†â€ŒÙˆØ¹Ø¯Ù‡)</option>
                                                    <option value="6">6 ÙˆØ¹Ø¯Ù‡ (ÙˆØ¹Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú©)</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ù…ÛŒØ²Ø§Ù† Ù…ØµØ±Ù Ø¢Ø¨ (Ù„ÛŒØªØ± Ø¯Ø± Ø±ÙˆØ²)</label>
                                                <input type="number" id="waterIntake" class="w-full p-3 rounded-lg input-field" placeholder="Ù…Ø«Ø§Ù„: 2.5" min="0.5" max="6" step="0.1">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø±Ú˜ÛŒÙ… ØºØ°Ø§ÛŒÛŒ Ø®Ø§Øµ</label>
                                                <select id="dietType" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ù†Ø¯Ø§Ø±Ù…</option>
                                                    <option value="vegetarian">Ú¯ÛŒØ§Ù‡â€ŒØ®ÙˆØ§Ø±</option>
                                                    <option value="vegan">ÙˆÚ¯Ø§Ù†</option>
                                                    <option value="keto">Ú©ØªÙˆÚ˜Ù†ÛŒÚ©</option>
                                                    <option value="low_carb">Ú©Ù… Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª</option>
                                                    <option value="mediterranean">Ù…Ø¯ÛŒØªØ±Ø§Ù†Ù‡â€ŒØ§ÛŒ</option>
                                                    <option value="intermittent">Ø±ÙˆØ²Ù‡ Ù…ØªÙ†Ø§ÙˆØ¨</option>
                                                    <option value="paleo">Ù¾Ø§Ù„Ø¦Ùˆ</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø³Ø±Ø¹Øª Ø®ÙˆØ±Ø¯Ù† ØºØ°Ø§</label>
                                                <select id="eatingSpeed" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="very_fast">Ø®ÛŒÙ„ÛŒ Ø³Ø±ÛŒØ¹ (Ø¹Ø¬Ù„Ù‡â€ŒØ§ÛŒ)</option>
                                                    <option value="fast">Ø³Ø±ÛŒØ¹</option>
                                                    <option value="normal">Ù…ØªÙˆØ³Ø·</option>
                                                    <option value="slow">Ø¢Ù‡Ø³ØªÙ‡ (Ù…Ø¯ÛŒØªÛŒÙˆ)</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">â°</span>
                                            Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="timeConstraints" value="early_morning" class="hidden">
                                                <div>
                                                    <div class="font-medium">ÙÙ‚Ø· ØµØ¨Ø­ Ø²ÙˆØ¯ ÙˆÙ‚Øª Ø¯Ø§Ø±Ù…</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù‚Ø¨Ù„ Ø§Ø² Ø´Ø±ÙˆØ¹ Ú©Ø§Ø±</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="timeConstraints" value="irregular_schedule" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù†Ø§Ù…Ù†Ø¸Ù… Ø¯Ø§Ø±Ù…</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø³Ø§Ø¹Ø§Øª Ú©Ø§Ø± Ù…ØªØºÛŒØ±</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="timeConstraints" value="shift_work" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ú©Ø§Ø± Ø´ÛŒÙØªÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø´Ø¨â€ŒÚ©Ø§Ø±ÛŒ ÛŒØ§ Ø´ÛŒÙØª Ø¯Ø± Ú¯Ø±Ø¯Ø´</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="timeConstraints" value="family_commitments" class="hidden">
                                                <div>
                                                    <div class="font-medium">ØªØ¹Ù‡Ø¯Ø§Øª Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø²ÛŒØ§Ø¯</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù…Ø±Ø§Ù‚Ø¨Øª Ø§Ø² ÙØ±Ø²Ù†Ø¯ØŒ ÙˆØ§Ù„Ø¯ÛŒÙ†</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="timeConstraints" value="long_commute" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ù…Ø³ÛŒØ± Ø·ÙˆÙ„Ø§Ù†ÛŒ Ú©Ø§Ø±</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¨ÛŒØ´ Ø§Ø² Ø³Ø§Ø¹Øª Ø¯Ø± Ø±ÙˆØ²</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="timeConstraints" value="weekend_only" class="hidden">
                                                <div>
                                                    <div class="font-medium">ÙÙ‚Ø· Ø¢Ø®Ø± Ù‡ÙØªÙ‡</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù‡ÙØªÙ‡ Ú©Ø§Ø±ÛŒ Ù¾Ø±Ù…Ø´ØºÙ„Ù‡</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Final Analysis Display -->
                            <div id="finalAnalysis" class="hidden analysis-result">
                                <h5 class="font-semibold text-primary mb-3 flex items-center">
                                    <span class="text-xl mr-2">ğŸ§ </span>
                                    Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ ØªØ­Ù„ÛŒÙ„ Ù†Ù‡Ø§ÛŒÛŒ:
                                </h5>
                                <div id="analysisPreview"></div>
                            </div>
                        </div>

                        <!-- Step 8: Motivation & Psychology -->
                        <div id="step8" class="step hidden space-y-6">
                            <div class="text-center mb-8">
                                <h4 class="text-2xl font-bold mb-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">ğŸ§  Ø§Ù†Ú¯ÛŒØ²Ù‡ Ùˆ Ø±ÙˆØ§Ù†Ø´Ù†Ø§Ø³ÛŒ</h4>
                                <p class="text-gray-600 dark:text-gray-400">Ø¹ÙˆØ§Ù…Ù„ Ø°Ù‡Ù†ÛŒ Ù…ÙˆØ«Ø± Ø¨Ø± Ù…ÙˆÙÙ‚ÛŒØª</p>
                            </div>

                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div class="space-y-6">
                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ’¡</span>
                                            Ø§Ù†Ú¯ÛŒØ²Ù‡ Ø§ØµÙ„ÛŒ
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="motivation" value="health" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø³Ù„Ø§Ù…ØªÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¨Ù‡Ø¨ÙˆØ¯ Ø³Ù„Ø§Ù…Øª Ø¬Ø³Ù…ÛŒ Ùˆ Ø±ÙˆØ­ÛŒ</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="motivation" value="appearance" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¸Ø§Ù‡Ø±</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¨Ù‡Ø¨ÙˆØ¯ Ø´Ú©Ù„ Ø¸Ø§Ù‡Ø±ÛŒ Ø¨Ø¯Ù†</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="motivation" value="performance" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¹Ù…Ù„Ú©Ø±Ø¯</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¨Ù‡Ø¨ÙˆØ¯ Ù‚Ø¯Ø±Øª Ùˆ ØªÙˆØ§Ù†Ø§ÛŒÛŒ</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="motivation" value="confidence" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¨Ù‡ Ù†ÙØ³</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø§Ø­Ø³Ø§Ø³ Ø¨Ù‡ØªØ± Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø®ÙˆØ¯Ù…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="motivation" value="medical" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ù¾Ø²Ø´Ú©ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ØªÙˆØµÛŒÙ‡ Ù¾Ø²Ø´Ú©</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="motivation" value="social" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ÙØ¹Ø§Ù„ÛŒØª Ø¨Ø§ Ø¯ÙˆØ³ØªØ§Ù†</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ¯</span>
                                            Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª ÙˆØ±Ø²Ø´ÛŒ
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="personality" value="competitor" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø±Ù‚Ø§Ø¨ØªÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¯ÙˆØ³Øª Ø¯Ø§Ø±Ù… Ø±Ú©ÙˆØ±Ø¯ Ø¨Ø²Ù†Ù…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="personality" value="social" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¨Ø§ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ø¨Ù‡ØªØ± ØªÙ…Ø±ÛŒÙ† Ù…ÛŒâ€ŒÚ©Ù†Ù…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="personality" value="individual" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø§Ù†ÙØ±Ø§Ø¯ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ØªÙ†Ù‡Ø§ Ø¨Ù‡ØªØ± ØªÙ…Ø±ÛŒÙ† Ù…ÛŒâ€ŒÚ©Ù†Ù…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="personality" value="routine" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ§ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø³Ø§Ø®ØªØ§Ø± Ù…Ø´Ø®Øµ Ø¯Ø§Ø±Ù…</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="radio" name="personality" value="flexible" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¯ÙˆØ³Øª Ø¯Ø§Ø±Ù… ØªÙ†ÙˆØ¹ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù…</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="space-y-6">
                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ“ˆ</span>
                                            Ø³Ø§Ø¨Ù‚Ù‡ Ù…ÙˆÙÙ‚ÛŒØª/Ø´Ú©Ø³Øª
                                        </h5>
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">ØªØ¬Ø±Ø¨Ù‡ Ù‚Ø¨Ù„ÛŒ Ø¨Ø§ ÙˆØ±Ø²Ø´</label>
                                                <select id="pastExperience" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="never_tried">Ù‡Ø±Ú¯Ø² Ø§Ù…ØªØ­Ø§Ù† Ù†Ú©Ø±Ø¯Ù…</option>
                                                    <option value="failed_multiple">Ú†Ù†Ø¯Ø¨Ø§Ø± Ø´Ø±ÙˆØ¹ Ú©Ø±Ø¯Ù… ÙˆÙ„ÛŒ Ù…ÙˆÙÙ‚ Ù†Ø´Ø¯Ù…</option>
                                                    <option value="some_success">Ú¯Ø§Ù‡ÛŒ Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯Ù…</option>
                                                    <option value="mostly_successful">Ø¨ÛŒØ´ØªØ± Ø§ÙˆÙ‚Ø§Øª Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯Ù…</option>
                                                    <option value="always_successful">Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ù‡ Ø§Ù‡Ø¯Ø§ÙÙ… Ø±Ø³ÛŒØ¯Ù…</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø¨Ø²Ø±Ú¯ØªØ±ÛŒÙ† Ù…Ø§Ù†Ø¹ Ù‚Ø¨Ù„ÛŒ</label>
                                                <select id="biggestBarrier" class="w-full p-3 rounded-lg select-field">
                                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                                    <option value="time">Ú©Ù…Ø¨ÙˆØ¯ ÙˆÙ‚Øª</option>
                                                    <option value="motivation">Ú©Ù…Ø¨ÙˆØ¯ Ø§Ù†Ú¯ÛŒØ²Ù‡</option>
                                                    <option value="knowledge">Ù†Ø¯Ø§Ø´ØªÙ† Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§ÙÛŒ</option>
                                                    <option value="injury">Ø¢Ø³ÛŒØ¨ ÛŒØ§ Ø¯Ø±Ø¯</option>
                                                    <option value="boredom">Ø®Ø³ØªÙ‡â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø¨ÙˆØ¯Ù†</option>
                                                    <option value="results">Ù†Ø¨ÙˆØ¯Ù† Ù†ØªÛŒØ¬Ù‡ Ø³Ø±ÛŒØ¹</option>
                                                    <option value="social">Ú©Ù…Ø¨ÙˆØ¯ Ø­Ù…Ø§ÛŒØª Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Ø¯Ø±Ø¬Ù‡ ØªØ¹Ù‡Ø¯ ÙØ¹Ù„ÛŒ (1-10)</label>
                                                <div class="flex items-center gap-2">
                                                    <span class="text-sm">1</span>
                                                    <input type="range" id="commitment" min="1" max="10" value="5" class="flex-1">
                                                    <span class="text-sm">10</span>
                                                    <span id="commitmentValue" class="text-lg font-bold text-primary w-8">5</span>
                                                </div>
                                                <div class="text-xs text-gray-500 mt-1">1: Ø´Ø§ÛŒØ¯ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†Ù… | 10: Ú©Ø§Ù…Ù„Ø§Ù‹ Ù…ØªØ¹Ù‡Ø¯Ù…</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="metric-card p-6 rounded-2xl">
                                        <h5 class="font-semibold text-lg mb-4 text-primary flex items-center">
                                            <span class="text-xl mr-2">ğŸ†</span>
                                            ØªØ±Ø¬ÛŒØ­Ø§Øª ØªØ´ÙˆÛŒÙ‚
                                        </h5>
                                        <div class="space-y-3">
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="rewards" value="visual_progress" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¯ÛŒØ¯Ù† Ù¾ÛŒØ´Ø±ÙØª</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù†Ù…ÙˆØ¯Ø§Ø±ØŒ Ø¹Ú©Ø³ØŒ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="rewards" value="achievement_badges" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ù…Ø¯Ø§Ù„ Ùˆ Ù†Ø´Ø§Ù†</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø¯Ø³ØªØ§ÙˆØ±Ø¯ Ùˆ Ø±Ú©ÙˆØ±Ø¯ Ø´Ø®ØµÛŒ</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="rewards" value="social_recognition" class="hidden">
                                                <div>
                                                    <div class="font-medium">ØªÙ‚Ø¯ÛŒØ± Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">ØªØ´ÙˆÛŒÙ‚ Ø¯ÙˆØ³ØªØ§Ù† Ùˆ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="rewards" value="tangible_rewards" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø¬Ø§ÛŒØ²Ù‡ Ù…Ø­Ø³ÙˆØ³</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ù„Ø¨Ø§Ø³ Ø¬Ø¯ÛŒØ¯ØŒ Ù…Ú©Ù…Ù„ØŒ ØªØ¬Ù‡ÛŒØ²Ø§Øª</div>
                                                </div>
                                            </label>
                                            <label class="option-card flex items-center p-3 rounded-lg cursor-pointer border-2 border-gray-200 dark:border-gray-600">
                                                <input type="checkbox" name="rewards" value="feeling_good" class="hidden">
                                                <div>
                                                    <div class="font-medium">Ø§Ø­Ø³Ø§Ø³ Ø®ÙˆØ¨</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Ø§Ù†Ø±Ú˜ÛŒØŒ Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¨Ù‡ Ù†ÙØ³ØŒ Ø´Ø§Ø¯ÛŒ</div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Final Summary -->
                            <div class="analysis-result">
                                <h5 class="font-semibold text-primary mb-4 flex items-center">
                                    <span class="text-xl mr-2">âœ…</span>
                                    Ø®Ù„Ø§ØµÙ‡ ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹ - Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø§Ø®ØªØµØ§ØµÛŒ
                                </h5>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-center">
                                    <div class="p-3 bg-white dark:bg-gray-800 rounded-lg">
                                        <div class="font-bold text-primary">Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400">ØªØ­Ù„ÛŒÙ„ 50+ Ù¾Ø§Ø±Ø§Ù…ØªØ±</div>
                                    </div>
                                    <div class="p-3 bg-white dark:bg-gray-800 rounded-lg">
                                        <div class="font-bold text-green-600">Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒ</div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400">Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯ Ø´Ù…Ø§</div>
                                    </div>
                                    <div class="p-3 bg-white dark:bg-gray-800 rounded-lg">
                                        <div class="font-bold text-blue-600">Ø¹Ù„Ù…ÛŒ</div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400">Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ø¢Ø®Ø±ÛŒÙ† ØªØ­Ù‚ÛŒÙ‚Ø§Øª</div>
                                    </div>
                                    <div class="p-3 bg-white dark:bg-gray-800 rounded-lg">
                                        <div class="font-bold text-purple-600">Ø¬Ø§Ù…Ø¹</div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400">ØªÙ…Ø±ÛŒÙ† + ØªØºØ°ÛŒÙ‡ + Ø¨Ø§Ø²ÛŒØ§ÙØª</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Navigation Buttons -->
                        <div class="flex justify-between items-center mt-12 pt-8 border-t border-gray-200 dark:border-gray-700">
                            <button id="prevBtn" class="hidden bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl">
                                â† Ù…Ø±Ø­Ù„Ù‡ Ù‚Ø¨Ù„
                            </button>
                            <div class="flex-1"></div>
                            <button id="nextBtn" class="gradient-primary text-white px-8 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105">
                                Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ â†’
                            </button>
                            <button id="generateBtn" class="hidden bg-green-600 hover:bg-green-700 text-white px-12 py-4 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl animate-bounce-soft">
                                ğŸš€ ØªÙˆÙ„ÛŒØ¯ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Dashboard -->
            <div id="resultsDashboard" class="hidden animate-fade-in">
                <!-- Results will be dynamically generated here -->
            </div>
        </main>
    </div>

    <script>
        // Scientific Analysis Engine - Real Intelligence
        class AdvancedScientificEngine {
            constructor() {
                this.userData = {};
                this.analysisResults = {};
                this.scientificConstants = {
                    BMR_MALE: { base: 10, weight: 6.25, height: 5, age: 5 },
                    BMR_FEMALE: { base: 10, weight: 6.25, height: 5, age: 161 },
                    ACTIVITY_FACTORS: {
                        sedentary: 1.2,
                        light: 1.375,
                        moderate: 1.55,
                        active: 1.725,
                        very_active: 1.9
                    },
                    FITNESS_NORMS: {
                        pushup: {
                            male: { excellent: 39, good: 30, average: 22, below: 17 },
                            female: { excellent: 20, good: 15, average: 10, below: 7 }
                        },
                        plank: { excellent: 120, good: 90, average: 60, below: 30 }
                    }
                };
            }

            // Advanced BMI calculation with WHO categories
            calculateAdvancedBMI(weight, height, age, gender) {
                const bmi = weight / Math.pow(height / 100, 2);
                let category, risk, recommendation;
                
                // Age-adjusted BMI categories
                const ageAdjustment = age > 65 ? 1 : 0;
                const adjustedBMI = bmi + ageAdjustment;
                
                if (adjustedBMI < 16) {
                    category = 'Ú©Ù…â€ŒÙˆØ²Ù† Ø´Ø¯ÛŒØ¯';
                    risk = 'Ø¨Ø³ÛŒØ§Ø± Ø¨Ø§Ù„Ø§';
                    recommendation = 'Ù…Ø±Ø§Ø¬Ø¹Ù‡ ÙÙˆØ±ÛŒ Ø¨Ù‡ Ù¾Ø²Ø´Ú©';
                } else if (adjustedBMI < 17) {
                    category = 'Ú©Ù…â€ŒÙˆØ²Ù† Ù…ØªÙˆØ³Ø·';
                    risk = 'Ø¨Ø§Ù„Ø§';
                    recommendation = 'Ø§ÙØ²Ø§ÛŒØ´ ÙˆØ²Ù† ØªØ¯Ø±ÛŒØ¬ÛŒ';
                } else if (adjustedBMI < 18.5) {
                    category = 'Ú©Ù…â€ŒÙˆØ²Ù† Ø®ÙÛŒÙ';
                    risk = 'Ù…ØªÙˆØ³Ø·';
                    recommendation = 'ØªÙ‚ÙˆÛŒØª Ø¹Ø¶Ù„Ø§Øª';
                } else if (adjustedBMI < 25) {
                    category = 'Ø·Ø¨ÛŒØ¹ÛŒ';
                    risk = 'Ú©Ù…';
                    recommendation = 'Ø­ÙØ¸ ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ';
                } else if (adjustedBMI < 30) {
                    category = 'Ø§Ø¶Ø§ÙÙ‡â€ŒÙˆØ²Ù†';
                    risk = 'Ù…ØªÙˆØ³Ø·';
                    recommendation = 'Ú©Ø§Ù‡Ø´ ØªØ¯Ø±ÛŒØ¬ÛŒ ÙˆØ²Ù†';
                } else if (adjustedBMI < 35) {
                    category = 'Ú†Ø§Ù‚ÛŒ Ø¯Ø±Ø¬Ù‡ 1';
                    risk = 'Ø¨Ø§Ù„Ø§';
                    recommendation = 'Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ø§Ù‡Ø´ ÙˆØ²Ù† Ø¬Ø¯ÛŒ';
                } else if (adjustedBMI < 40) {
                    category = 'Ú†Ø§Ù‚ÛŒ Ø¯Ø±Ø¬Ù‡ 2';
                    risk = 'Ø®ÛŒÙ„ÛŒ Ø¨Ø§Ù„Ø§';
                    recommendation = 'Ù…Ø¯Ø§Ø®Ù„Ù‡ Ù¾Ø²Ø´Ú©ÛŒ Ø¶Ø±ÙˆØ±ÛŒ';
                } else {
                    category = 'Ú†Ø§Ù‚ÛŒ Ø¯Ø±Ø¬Ù‡ 3';
                    risk = 'Ø¨Ø­Ø±Ø§Ù†ÛŒ';
                    recommendation = 'Ù…Ø¯Ø§Ø®Ù„Ù‡ ÙÙˆØ±ÛŒ Ù¾Ø²Ø´Ú©ÛŒ';
                }

                return { 
                    bmi: bmi.toFixed(1), 
                    adjustedBMI: adjustedBMI.toFixed(1),
                    category, 
                    risk, 
                    recommendation 
                };
            }

            // Precision BMR calculation (Mifflin-St Jeor + Harris-Benedict comparison)
            calculatePrecisionBMR(weight, height, age, gender) {
                // Mifflin-St Jeor (more accurate)
                let mifflinBMR;
                if (gender === 'male') {
                    mifflinBMR = (10 * weight) + (6.25 * height) - (5 * age) + 5;
                } else {
                    mifflinBMR = (10 * weight) + (6.25 * height) - (5 * age) - 161;
                }

                // Harris-Benedict (for comparison)
                let harrisBMR;
                if (gender === 'male') {
                    harrisBMR = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
                } else {
                    harrisBMR = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
                }

                // Use Mifflin as primary, Harris as validation
                const avgBMR = (mifflinBMR + harrisBMR) / 2;
                const accuracy = 100 - Math.abs(mifflinBMR - harrisBMR) / mifflinBMR * 100;

                return {
                    bmr: Math.round(mifflinBMR),
                    alternativeBMR: Math.round(harrisBMR),
                    averageBMR: Math.round(avgBMR),
                    accuracy: accuracy.toFixed(1)
                };
            }

            // Advanced TDEE with activity and metabolic corrections
            calculateAdvancedTDEE(bmr, activityLevel, age, bodyFat = null, muscleMass = null) {
                let baseTDEE = bmr * this.scientificConstants.ACTIVITY_FACTORS[activityLevel];
                
                // Age correction (metabolism slows with age)
                const ageCorrection = age > 30 ? 1 - ((age - 30) * 0.01) : 1;
                
                // Body composition correction
                let compositionCorrection = 1;
                if (bodyFat) {
                    // Higher muscle mass = higher metabolism
                    const leanBodyMass = 100 - bodyFat;
                    compositionCorrection = 0.8 + (leanBodyMass / 100) * 0.4;
                }
                
                const correctedTDEE = baseTDEE * ageCorrection * compositionCorrection;
                
                return {
                    baseTDEE: Math.round(baseTDEE),
                    correctedTDEE: Math.round(correctedTDEE),
                    ageCorrection: ageCorrection.toFixed(3),
                    compositionCorrection: compositionCorrection.toFixed(3)
                };
            }

            // Scientific body fat estimation (multiple methods)
            estimateBodyFat(bmi, age, gender, waist = null, neck = null, hip = null) {
                // Method 1: BMI-based estimation (Deurenberg et al.)
                let deurenbergBF;
                if (gender === 'male') {
                    deurenbergBF = (1.20 * bmi) + (0.23 * age) - 16.2;
                } else {
                    deurenbergBF = (1.20 * bmi) + (0.23 * age) - 5.4;
                }

                // Method 2: US Navy formula (if measurements available)
                let navyBF = null;
                if (waist && neck && (gender === 'male' || hip)) {
                    if (gender === 'male') {
                        navyBF = 495 / (1.0324 - 0.19077 * Math.log10(waist - neck) + 0.15456 * Math.log10(height)) - 450;
                    } else {
                        navyBF = 495 / (1.29579 - 0.35004 * Math.log10(waist + hip - neck) + 0.22100 * Math.log10(height)) - 450;
                    }
                }

                // Age and gender adjustments
                const minBF = gender === 'male' ? 3 : 8;
                const maxBF = gender === 'male' ? 35 : 45;
                
                const estimatedBF = Math.max(minBF, Math.min(maxBF, deurenbergBF));
                
                return {
                    estimated: estimatedBF.toFixed(1),
                    navy: navyBF ? navyBF.toFixed(1) : null,
                    method: navyBF ? 'Navy + Deurenberg' : 'Deurenberg',
                    confidence: navyBF ? 'High' : 'Medium'
                };
            }

            // Advanced somatotype determination (Heath-Carter method)
            calculateSomatotype(userData) {
                let endomorphy = 0;
                let mesomorphy = 0;
                let ectomorphy = 0;

                // Weight pattern analysis (40% weight)
                const weightPatternScores = {
                    'gain_very_easy': { endo: 3, meso: 0, ecto: 0 },
                    'gain_easy': { endo: 2, meso: 1, ecto: 0 },
                    'stable': { endo: 1, meso: 2, ecto: 1 },
                    'lose_easy': { endo: 0, meso: 1, ecto: 2 },
                    'lose_very_hard': { endo: 3, meso: 0, ecto: 0 }
                };

                const weightScore = weightPatternScores[userData.weightPattern] || { endo: 1, meso: 1, ecto: 1 };
                endomorphy += weightScore.endo * 0.4;
                mesomorphy += weightScore.meso * 0.4;
                ectomorphy += weightScore.ecto * 0.4;

                // Frame size analysis (25% weight)
                const frameScores = {
                    'small': { endo: 0, meso: 0, ecto: 2 },
                    'medium': { endo: 1, meso: 2, ecto: 1 },
                    'large': { endo: 2, meso: 1, ecto: 0 }
                };

                const frameScore = frameScores[userData.frameSize] || { endo: 1, meso: 1, ecto: 1 };
                endomorphy += frameScore.endo * 0.25;
                mesomorphy += frameScore.meso * 0.25;
                ectomorphy += frameScore.ecto * 0.25;

                // Muscle gain ability (20% weight)
                const muscleScores = {
                    'very_easy': { endo: 1, meso: 3, ecto: 0 },
                    'easy': { endo: 1, meso: 2, ecto: 0 },
                    'moderate': { endo: 1, meso: 1, ecto: 1 },
                    'hard': { endo: 0, meso: 0, ecto: 2 }
                };

                const muscleScore = muscleScores[userData.muscleGain] || { endo: 1, meso: 1, ecto: 1 };
                endomorphy += muscleScore.endo * 0.2;
                mesomorphy += muscleScore.meso * 0.2;
                ectomorphy += muscleScore.ecto * 0.2;

                // Appetite pattern (15% weight)
                const appetiteScores = {
                    'always_hungry': { endo: 2, meso: 1, ecto: 0 },
                    'normal': { endo: 1, meso: 1, ecto: 1 },
                    'low': { endo: 0, meso: 0, ecto: 2 },
                    'very_low': { endo: 0, meso: 0, ecto: 3 }
                };

                const appetiteScore = appetiteScores[userData.appetitePattern] || { endo: 1, meso: 1, ecto: 1 };
                endomorphy += appetiteScore.endo * 0.15;
                mesomorphy += appetiteScore.meso * 0.15;
                ectomorphy += appetiteScore.ecto * 0.15;

                // Determine dominant type
                const scores = { endomorphy, mesomorphy, ectomorphy };
                const dominantType = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
                
                // Calculate secondary type
                const sortedTypes = Object.entries(scores).sort(([,a], [,b]) => b - a);
                const secondaryType = sortedTypes[1][0];
                const dominantScore = sortedTypes[0][1];
                const secondaryScore = sortedTypes[1][1];
                
                // Determine if pure type or combination
                const scoreDifference = dominantScore - secondaryScore;
                const isPure = scoreDifference > 1;

                const somatotypes = {
                    endomorphy: {
                        name: 'Ø§Ù†Ø¯ÙˆÙ…ÙˆØ±Ù',
                        description: 'Ø·Ø¨ÛŒØ¹Øª Ø´Ù…Ø§ Ø¨Ù‡ Ø°Ø®ÛŒØ±Ù‡ Ø§Ù†Ø±Ú˜ÛŒ Ùˆ Ú†Ø±Ø¨ÛŒ ØªÙ…Ø§ÛŒÙ„ Ø¯Ø§Ø±Ø¯. Ù…ØªØ§Ø¨ÙˆÙ„ÛŒØ³Ù… Ú©Ù†Ø¯ØªØ± Ùˆ Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ø¹Ø¶Ù„Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ØªÙˆØ³Ø·.',
                        characteristics: [
                            'Ø°Ø®ÛŒØ±Ù‡ Ø¢Ø³Ø§Ù† Ú†Ø±Ø¨ÛŒ Ùˆ Ø§Ù†Ø±Ú˜ÛŒ',
                            'Ù…ØªØ§Ø¨ÙˆÙ„ÛŒØ³Ù… Ù¾Ø§ÛŒÙ‡ Ú©Ù†Ø¯ØªØ±',
                            'Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ù†ØªØ±Ù„ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ú©Ø§Ù„Ø±ÛŒ',
                            'Ù¾Ø§Ø³Ø® Ø¹Ø§Ù„ÛŒ Ø¨Ù‡ ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‚Ø¯Ø±ØªÛŒ',
                            'Ø§Ø­ØªÛŒØ§Ø¬ Ø¨ÛŒØ´ØªØ± Ø¨Ù‡ ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‡ÙˆØ§Ø²ÛŒ'
                        ],
                        advantages: [
                            'Ø¹Ø¶Ù„Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù†Ø³Ø¨ØªØ§Ù‹ Ø¢Ø³Ø§Ù†',
                            'Ù‚Ø¯Ø±Øª Ø·Ø¨ÛŒØ¹ÛŒ Ø¨Ø§Ù„Ø§',
                            'Ø¨Ø§Ø²ÛŒØ§ÙØª Ø³Ø±ÛŒØ¹ Ø¨ÛŒÙ† ØªÙ…Ø±ÛŒÙ†Ø§Øª'
                        ],
                        challenges: [
                            'Ú©Ø§Ù‡Ø´ Ú†Ø±Ø¨ÛŒ Ø³Ø®Øªâ€ŒØªØ±',
                            'Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø±Ú˜ÛŒÙ… ØºØ°Ø§ÛŒÛŒ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ±',
                            'Ø­Ø³Ø§Ø³ÛŒØª Ø¨Ø§Ù„Ø§ Ø¨Ù‡ Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª'
                        ],
                        recommendations: {
                            training: [
                                'ØªØ±Ú©ÛŒØ¨ ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‚Ø¯Ø±ØªÛŒ Ùˆ Ù‡ÙˆØ§Ø²ÛŒ',
                                'ØªÙ…Ø±ÛŒÙ†Ø§Øª HIIT Ø¨Ø±Ø§ÛŒ Ø³ÙˆØ²Ø§Ù†Ø¯Ù† Ú†Ø±Ø¨ÛŒ',
                                'ØªÙ…Ø±ÛŒÙ†Ø§Øª Ú©Ù„ Ø¨Ø¯Ù†',
                                'Ú©Ø§Ù‡Ø´ Ø§Ø³ØªØ±Ø§Ø­Øª Ø¨ÛŒÙ† Ø³Øªâ€ŒÙ‡Ø§'
                            ],
                            nutrition: [
                                'Ú©Ù†ØªØ±Ù„ Ú©Ø§Ù„Ø±ÛŒ Ø¯Ù‚ÛŒÙ‚',
                                'Ú©Ø§Ù‡Ø´ Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª Ø³Ø§Ø¯Ù‡',
                                'Ø§ÙØ²Ø§ÛŒØ´ Ù¾Ø±ÙˆØªØ¦ÛŒÙ† (2.2-2.5g/kg)',
                                'ØªØ§ÛŒÙ…ÛŒÙ†Ú¯ Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª Ø­ÙˆÙ„ ØªÙ…Ø±ÛŒÙ†'
                            ]
                        }
                    },
                    mesomorphy: {
                        name: 'Ù…Ø²ÙˆÙ…ÙˆØ±Ù',
                        description: 'Ø´Ù…Ø§ Ø·Ø¨ÛŒØ¹ØªØ§Ù‹ Ø¹Ø¶Ù„Ø§Ù†ÛŒ Ùˆ Ù…ØªØ¹Ø§Ø¯Ù„ Ù‡Ø³ØªÛŒØ¯. Ù…ØªØ§Ø¨ÙˆÙ„ÛŒØ³Ù… Ù…Ù†Ø§Ø³Ø¨ Ùˆ Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø§Ù„Ø§ÛŒ Ø¹Ø¶Ù„Ù‡â€ŒØ³Ø§Ø²ÛŒ.',
                        characteristics: [
                            'Ø¹Ø¶Ù„Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¢Ø³Ø§Ù† Ùˆ Ø³Ø±ÛŒØ¹',
                            'Ù…ØªØ§Ø¨ÙˆÙ„ÛŒØ³Ù… Ù…ØªØ¹Ø§Ø¯Ù„ Ùˆ Ù…Ù†Ø§Ø³Ø¨',
                            'Ù¾Ø§Ø³Ø® Ø³Ø±ÛŒØ¹ Ø¨Ù‡ ØªÙ…Ø±ÛŒÙ†Ø§Øª',
                            'ØªØ±Ú©ÛŒØ¨ Ø¨Ø¯Ù†ÛŒ Ø·Ø¨ÛŒØ¹ÛŒ Ù…Ù†Ø§Ø³Ø¨',
                            'Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¯Ø± Ø±Ú˜ÛŒÙ… ØºØ°Ø§ÛŒÛŒ'
                        ],
                        advantages: [
                            'Ù†ØªØ§ÛŒØ¬ Ø³Ø±ÛŒØ¹ Ø§Ø² ØªÙ…Ø±ÛŒÙ†Ø§Øª',
                            'ØªØ¹Ø§Ø¯Ù„ Ø·Ø¨ÛŒØ¹ÛŒ Ú†Ø±Ø¨ÛŒ-Ø¹Ø¶Ù„Ù‡',
                            'Ù…ØªØ§Ø¨ÙˆÙ„ÛŒØ³Ù… Ú©Ø§Ø±Ø¢Ù…Ø¯'
                        ],
                        challenges: [
                            'Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø§Ù‡Ø¯Ø§Ù Ø±Ø§ Ø¯Ø³Øª Ú©Ù… Ø¨Ú¯ÛŒØ±Ø¯',
                            'Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú†Ø§Ù„Ø´ Ù…Ø¯Ø§ÙˆÙ…',
                            'Ø®Ø·Ø± Ú©Ù…â€ŒÚ©Ø§Ø±ÛŒ Ø¯Ø± Ø±Ú˜ÛŒÙ…'
                        ],
                        recommendations: {
                            training: [
                                'ØªÙ…Ø±ÛŒÙ†Ø§Øª ØªØ±Ú©ÛŒØ¨ÛŒ Ùˆ Ù…ØªÙ†ÙˆØ¹',
                                'ØªÙˆØ§Ø²Ù† Ø¨ÛŒÙ† Ù‚Ø¯Ø±Øª Ùˆ Ù‡ÙˆØ§Ø²ÛŒ',
                                'ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ùˆ Ú†Ø§Ù„Ø´ÛŒ',
                                'ØªØºÛŒÛŒØ± Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡Ø± 4-6 Ù‡ÙØªÙ‡'
                            ],
                            nutrition: [
                                'Ø±Ú˜ÛŒÙ… Ù…ØªØ¹Ø§Ø¯Ù„ Ù…Ø§Ú©Ø±ÙˆÙ†ÙˆØªØ±ÛŒÙ†Øª',
                                'Ù¾Ø±ÙˆØªØ¦ÛŒÙ† Ù…ØªÙˆØ³Ø· (1.8-2.2g/kg)',
                                'Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ Ø§Ù†Ø±Ú˜ÛŒ',
                                'Ú†Ø±Ø¨ÛŒâ€ŒÙ‡Ø§ÛŒ Ø³Ø§Ù„Ù… Ú©Ø§ÙÛŒ'
                            ]
                        }
                    },
                    ectomorphy: {
                        name: 'Ø§Ú©ØªÙˆÙ…ÙˆØ±Ù',
                        description: 'Ø´Ù…Ø§ Ø·Ø¨ÛŒØ¹ØªØ§Ù‹ Ù„Ø§ØºØ± Ø¨Ø§ Ù…ØªØ§Ø¨ÙˆÙ„ÛŒØ³Ù… Ø¨Ø§Ù„Ø§ Ù‡Ø³ØªÛŒØ¯. Ø³Ø®Øª ÙˆØ²Ù† Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ Ø§Ù…Ø§ Ú†Ø±Ø¨ÛŒ Ú©Ù… Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.',
                        characteristics: [
                            'Ù…ØªØ§Ø¨ÙˆÙ„ÛŒØ³Ù… Ø¨Ø³ÛŒØ§Ø± Ø³Ø±ÛŒØ¹',
                            'Ø¯Ø´ÙˆØ§Ø±ÛŒ Ø¯Ø± ÙˆØ²Ù†â€ŒÚ¯ÛŒØ±ÛŒ',
                            'Ø¯Ø±ØµØ¯ Ú†Ø±Ø¨ÛŒ Ø·Ø¨ÛŒØ¹ØªØ§Ù‹ Ú©Ù…',
                            'Ø§Ù†Ø¯Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø±ÛŒÚ© Ùˆ Ø·ÙˆÙ„Ø§Ù†ÛŒ',
                            'Ø§Ù†Ø±Ú˜ÛŒ Ø²ÛŒØ§Ø¯ Ùˆ Ø¨ÛŒâ€ŒÙ‚Ø±Ø§Ø±ÛŒ'
                        ],
                        advantages: [
                            'Ù‡ÛŒÚ†â€ŒÙˆÙ‚Øª Ú†Ø§Ù‚ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯',
                            'ØªØ¹Ø±ÛŒÙ Ø¹Ø¶Ù„Ø§Ù†ÛŒ Ø¹Ø§Ù„ÛŒ',
                            'Ø¨Ø§Ø²ÛŒØ§ÙØª Ø³Ø±ÛŒØ¹',
                            'Ø§Ø³ØªÙ‚Ø§Ù…Øª Ø·Ø¨ÛŒØ¹ÛŒ Ø¨Ø§Ù„Ø§'
                        ],
                        challenges: [
                            'Ø¹Ø¶Ù„Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø³ÛŒØ§Ø± Ø³Ø®Øª',
                            'Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ø§Ù„Ø±ÛŒ Ø¨Ø³ÛŒØ§Ø± Ø²ÛŒØ§Ø¯',
                            'Ø­Ø³Ø§Ø³ÛŒØª Ø¨Ù‡ Ø­Ø¬Ù… ØªÙ…Ø±ÛŒÙ† Ø²ÛŒØ§Ø¯'
                        ],
                        recommendations: {
                            training: [
                                'ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‚Ø¯Ø±ØªÛŒ Ø³Ù†Ú¯ÛŒÙ†',
                                'Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Ø¯ÛŒÙˆ',
                                'Ø§Ø³ØªØ±Ø§Ø­Øª Ø·ÙˆÙ„Ø§Ù†ÛŒ Ø¨ÛŒÙ† Ø³Øªâ€ŒÙ‡Ø§',
                                'ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ø­Ø±Ú©Ø§Øª Ú©Ø§Ù…Ù¾ÙˆÙ†Ø¯'
                            ],
                            nutrition: [
                                'Ú©Ø§Ù„Ø±ÛŒ Ø¨Ø³ÛŒØ§Ø± Ø¨Ø§Ù„Ø§',
                                'Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª Ø²ÛŒØ§Ø¯ (50-60%)',
                                'Ù¾Ø±ÙˆØªØ¦ÛŒÙ† Ú©Ø§ÙÛŒ (2-2.5g/kg)',
                                'ÙˆØ¹Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ú©Ø±Ø± Ùˆ Ù¾Ø±Ú©Ø§Ù„Ø±ÛŒ'
                            ]
                        }
                    }
                };

                return {
                    ...somatotypes[dominantType],
                    scores: {
                        endomorphy: endomorphy.toFixed(1),
                        mesomorphy: mesomorphy.toFixed(1),
                        ectomorphy: ectomorphy.toFixed(1)
                    },
                    dominantType: dominantType,
                    secondaryType: isPure ? null : secondaryType,
                    isPure: isPure,
                    confidence: scoreDifference > 2 ? 'High' : scoreDifference > 1 ? 'Medium' : 'Low'
                };
            }

            // Advanced fitness assessment with age/gender norms
            assessAdvancedFitness(userData) {
                const age = parseInt(userData.age);
                const gender = userData.gender;
                let totalScore = 0;
                let maxScore = 0;
                let components = {};

                // Strength assessment (Push-ups)
                const pushups = parseInt(userData.pushupMax) || 0;
                let pushupScore = 0;
                const pushupNorms = this.scientificConstants.FITNESS_NORMS.pushup[gender];
                
                if (pushups >= pushupNorms.excellent) pushupScore = 5;
                else if (pushups >= pushupNorms.good) pushupScore = 4;
                else if (pushups >= pushupNorms.average) pushupScore = 3;
                else if (pushups >= pushupNorms.below) pushupScore = 2;
                else if (pushups > 0) pushupScore = 1;

                components.strength = pushupScore;
                totalScore += pushupScore;
                maxScore += 5;

                // Core stability (Plank)
                const plankTime = parseInt(userData.plankTime) || 0;
                let plankScore = 0;
                const plankNorms = this.scientificConstants.FITNESS_NORMS.plank;
                
                if (plankTime >= plankNorms.excellent) plankScore = 5;
                else if (plankTime >= plankNorms.good) plankScore = 4;
                else if (plankTime >= plankNorms.average) plankScore = 3;
                else if (plankTime >= plankNorms.below) plankScore = 2;
                else if (plankTime > 0) plankScore = 1;

                components.core = plankScore;
                totalScore += plankScore;
                maxScore += 5;

                // Cardiovascular endurance
                const runningTime = parseInt(userData.runningTime) || 0;
                let cardioScore = 0;
                
                // Age-adjusted cardio norms
                const expectedRunning = age < 30 ? 25 : age < 40 ? 20 : age < 50 ? 15 : 10;
                
                if (runningTime >= expectedRunning * 1.5) cardioScore = 5;
                else if (runningTime >= expectedRunning * 1.2) cardioScore = 4;
                else if (runningTime >= expectedRunning) cardioScore = 3;
                else if (runningTime >= expectedRunning * 0.7) cardioScore = 2;
                else if (runningTime > 0) cardioScore = 1;

                components.cardio = cardioScore;
                totalScore += cardioScore;
                maxScore += 5;

                // Flexibility assessment
                const flexibilityScores = {
                    'excellent': 5,
                    'good': 4,
                    'fair': 3,
                    'poor': 2
                };
                const flexibilityScore = flexibilityScores[userData.flexibility] || 0;
                components.flexibility = flexibilityScore;
                totalScore += flexibilityScore;
                maxScore += 5;

                // Experience factor
                const experienceScores = {
                    'expert': 5,
                    'advanced': 4,
                    'intermediate': 3,
                    'beginner': 2,
                    'none': 1
                };
                const experienceScore = experienceScores[userData.experience] || 1;
                components.experience = experienceScore;
                totalScore += experienceScore;
                maxScore += 5;

                // Heart rate analysis (if available)
                let hrScore = 3; // default
                const restingHR = parseInt(userData.restingHR);
                if (restingHR) {
                    const excellentHR = gender === 'male' ? 55 : 60;
                    const goodHR = gender === 'male' ? 65 : 70;
                    const avgHR = gender === 'male' ? 75 : 80;
                    
                    if (restingHR <= excellentHR) hrScore = 5;
                    else if (restingHR <= goodHR) hrScore = 4;
                    else if (restingHR <= avgHR) hrScore = 3;
                    else if (restingHR <= avgHR + 10) hrScore = 2;
                    else hrScore = 1;
                }
                components.heartRate = hrScore;
                totalScore += hrScore;
                maxScore += 5;

                const percentage = (totalScore / maxScore) * 100;
                
                // Determine fitness level with more nuanced categories
                let level, description, nextSteps;
                if (percentage >= 90) {
                    level = 'ÙˆØ±Ø²Ø´Ú©Ø§Ø±';
                    description = 'Ø¢Ù…Ø§Ø¯Ú¯ÛŒ ÙˆØ±Ø²Ø´Ú©Ø§Ø±ÛŒ. Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ùˆ Ø±Ù‚Ø§Ø¨ØªÛŒ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯.';
                    nextSteps = ['Ø­ÙØ¸ Ø³Ø·Ø­ ÙØ¹Ù„ÛŒ', 'ØªÙ…Ø±ÛŒÙ†Ø§Øª ØªØ®ØµØµÛŒ', 'Ø±Ù‚Ø§Ø¨Øªâ€ŒÙ‡Ø§ÛŒ ÙˆØ±Ø²Ø´ÛŒ'];
                } else if (percentage >= 80) {
                    level = 'Ù¾ÛŒØ´Ø±ÙØªÙ‡';
                    description = 'Ø¢Ù…Ø§Ø¯Ú¯ÛŒ Ø¹Ø§Ù„ÛŒ. Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ùˆ Ù¾Ø±Ø´Ø¯Øª Ø¢Ù…Ø§Ø¯Ù‡ Ù‡Ø³ØªÛŒØ¯.';
                    nextSteps = ['Ø§ÙØ²Ø§ÛŒØ´ Ø´Ø¯Øª', 'ØªÙ…Ø±ÛŒÙ†Ø§Øª ØªØ±Ú©ÛŒØ¨ÛŒ', 'Ø§Ù‡Ø¯Ø§Ù Ú†Ø§Ù„Ø´ÛŒ'];
                } else if (percentage >= 65) {
                    level = 'Ù…ØªÙˆØ³Ø· Ø¨Ø§Ù„Ø§';
                    description = 'Ø¢Ù…Ø§Ø¯Ú¯ÛŒ Ø®ÙˆØ¨. Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù…ØªÙˆØ³Ø· ØªØ§ Ø³Ø®Øª Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯.';
                    nextSteps = ['Ú¯Ø³ØªØ±Ø´ Ø¨Ø±Ù†Ø§Ù…Ù‡', 'Ø§ÙØ²Ø§ÛŒØ´ ØªÙ†ÙˆØ¹', 'ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‚Ø¯Ø±ØªÛŒ'];
                } else if (percentage >= 50) {
                    level = 'Ù…ØªÙˆØ³Ø·';
                    description = 'Ø¢Ù…Ø§Ø¯Ú¯ÛŒ Ù¾Ø§ÛŒÙ‡ Ù…Ù†Ø§Ø³Ø¨. Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù…ØªÙˆØ³Ø· Ø¢Ù…Ø§Ø¯Ù‡ Ù‡Ø³ØªÛŒØ¯.';
                    nextSteps = ['Ø«Ø¨Ø§Øª Ø¯Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡', 'Ø§ÙØ²Ø§ÛŒØ´ ØªØ¯Ø±ÛŒØ¬ÛŒ Ø­Ø¬Ù…', 'ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ø¶Ø¹Ùâ€ŒÙ‡Ø§'];
                } else if (percentage >= 35) {
                    level = 'Ù…Ø¨ØªØ¯ÛŒ';
                    description = 'Ø´Ø±ÙˆØ¹ Ø®ÙˆØ¨. Ø¨Ø§ ØªÙ…Ø±ÛŒÙ†Ø§Øª Ø³Ø§Ø¯Ù‡ Ùˆ ØªØ¯Ø±ÛŒØ¬ÛŒ Ù¾ÛŒØ´ Ø¨Ø±ÙˆÛŒØ¯.';
                    nextSteps = ['Ø§ÛŒØ¬Ø§Ø¯ Ø¹Ø§Ø¯Øª', 'ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù¾Ø§ÛŒÙ‡', 'Ø§ÙØ²Ø§ÛŒØ´ ØªØ¯Ø±ÛŒØ¬ÛŒ'];
                } else {
                    level = 'ØªØ§Ø²Ù‡â€ŒÚ©Ø§Ø±';
                    description = 'Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø´Ø±ÙˆØ¹ Ø¨Ø³ÛŒØ§Ø± ØªØ¯Ø±ÛŒØ¬ÛŒ. ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ø§ÛŒØ¬Ø§Ø¯ Ø¹Ø§Ø¯Øª Ùˆ ÙØ±Ù… ØµØ­ÛŒØ­.';
                    nextSteps = ['Ø´Ø±ÙˆØ¹ Ø¨Ø³ÛŒØ§Ø± Ø¢Ù‡Ø³ØªÙ‡', 'ØªÙ…Ø±Ú©Ø² Ø¨Ø± ØªÚ©Ù†ÛŒÚ©', 'ØµØ¨Ø± Ùˆ Ø§Ø³ØªÙ‚Ø§Ù…Øª'];
                }

                return {
                    totalScore,
                    maxScore,
                    percentage: Math.round(percentage),
                    level,
                    description,
                    nextSteps,
                    components,
                    weakestArea: Object.keys(components).reduce((a, b) => 
                        components[a] < components[b] ? a : b
                    ),
                    strongestArea: Object.keys(components).reduce((a, b) => 
                        components[a] > components[b] ? a : b
                    )
                };
            }

            // Complete metabolic analysis
            performMetabolicAnalysis(userData) {
                const weight = parseFloat(userData.weight);
                const height = parseFloat(userData.height);
                const age = parseInt(userData.age);
                const gender = userData.gender;
                const bodyFat = userData.bodyFat ? parseFloat(userData.bodyFat) : null;

                // BMI Analysis
                const bmiData = this.calculateAdvancedBMI(weight, height, age, gender);
                
                // BMR Analysis
                const bmrData = this.calculatePrecisionBMR(weight, height, age, gender);
                
                // TDEE Analysis
                const tdeeData = this.calculateAdvancedTDEE(
                    bmrData.bmr, 
                    userData.dailyActivity, 
                    age, 
                    bodyFat
                );
                
                // Body Fat Analysis
                const bodyFatData = this.estimateBodyFat(parseFloat(bmiData.bmi), age, gender);
                
                // Lean Body Mass
                const estimatedBF = bodyFat || parseFloat(bodyFatData.estimated);
                const leanBodyMass = weight * (1 - estimatedBF / 100);
                const fatMass = weight - leanBodyMass;
                
                // Metabolic flexibility assessment
                const metabolicFactors = {
                    age: age < 30 ? 'High' : age < 45 ? 'Medium' : 'Low',
                    bodyComp: estimatedBF < 15 ? 'High' : estimatedBF < 25 ? 'Medium' : 'Low',
                    activity: ['active', 'very_active'].includes(userData.dailyActivity) ? 'High' : 'Medium'
                };

                return {
                    bmi: bmiData,
                    bmr: bmrData,
                    tdee: tdeeData,
                    bodyFat: bodyFatData,
                    bodyComposition: {
                        totalWeight: weight,
                        leanBodyMass: leanBodyMass.toFixed(1),
                        fatMass: fatMass.toFixed(1),
                        bodyFatPercentage: estimatedBF.toFixed(1)
                    },
                    metabolicProfile: {
                        flexibility: metabolicFactors,
                        type: this.determineMetabolicType(userData),
                        efficiency: this.calculateMetabolicEfficiency(userData)
                    }
                };
            }

            // Determine metabolic type based on responses
            determineMetabolicType(userData) {
                let carboScore = 0;
                let proteinScore = 0;
                let fatScore = 0;

                // Weight pattern influence
                if (userData.weightPattern === 'gain_very_easy') carboScore += 2;
                else if (userData.weightPattern === 'lose_very_hard') carboScore += 1;
                else if (userData.weightPattern === 'lose_easy') fatScore += 2;

                // Appetite pattern
                if (userData.appetitePattern === 'always_hungry') carboScore += 1;
                else if (userData.appetitePattern === 'very_low') fatScore += 2;

                // Food cravings
                if (userData.foodCravings) {
                    if (userData.foodCravings.includes('carbs')) carboScore += 2;
                    if (userData.foodCravings.includes('protein')) proteinScore += 2;
                    if (userData.foodCravings.includes('fats')) fatScore += 2;
                }

                // Energy after meals
                if (userData.postMealEnergy === 'sleepy') carboScore += 1;
                else if (userData.postMealEnergy === 'energetic') proteinScore += 1;

                const maxScore = Math.max(carboScore, proteinScore, fatScore);
                let metabolicType;
                
                if (carboScore === maxScore) {
                    metabolicType = {
                        type: 'Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øªâ€ŒÙ…Ø­ÙˆØ±',
                        description: 'Ø¨Ø¯Ù† Ø´Ù…Ø§ Ø¨Ù‡ Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª Ù¾Ø§Ø³Ø® Ø¨Ù‡ØªØ±ÛŒ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯',
                        macroRatio: { carbs: 50, protein: 25, fat: 25 },
                        recommendations: [
                            'Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ù…ØµØ±Ù Ú©Ù†ÛŒØ¯',
                            'ØªØ§ÛŒÙ…ÛŒÙ†Ú¯ Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª Ø­ÙˆÙ„ ØªÙ…Ø±ÛŒÙ†',
                            'Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø¯Ù‡'
                        ]
                    };
                } else if (proteinScore === maxScore) {
                    metabolicType = {
                        type: 'Ù¾Ø±ÙˆØªØ¦ÛŒÙ†â€ŒÙ…Ø­ÙˆØ±',
                        description: 'Ø¨Ø¯Ù† Ø´Ù…Ø§ Ø¨Ù‡ Ù¾Ø±ÙˆØªØ¦ÛŒÙ† Ùˆ Ø¢Ù…ÛŒÙ†ÙˆØ§Ø³ÛŒØ¯Ù‡Ø§ Ù¾Ø§Ø³Ø® Ø¨Ù‡ØªØ±ÛŒ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯',
                        macroRatio: { carbs: 30, protein: 40, fat: 30 },
                        recommendations: [
                            'Ù¾Ø±ÙˆØªØ¦ÛŒÙ† Ø¯Ø± Ù‡Ø± ÙˆØ¹Ø¯Ù‡',
                            'Ø§Ù†ÙˆØ§Ø¹ Ù…Ø®ØªÙ„Ù Ù…Ù†Ø§Ø¨Ø¹ Ù¾Ø±ÙˆØªØ¦ÛŒÙ†',
                            'Ø¢Ù…ÛŒÙ†ÙˆØ§Ø³ÛŒØ¯Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ'
                        ]
                    };
                } else {
                    metabolicType = {
                        type: 'Ú†Ø±Ø¨ÛŒâ€ŒÙ…Ø­ÙˆØ±',
                        description: 'Ø¨Ø¯Ù† Ø´Ù…Ø§ Ø¨Ù‡ Ú†Ø±Ø¨ÛŒâ€ŒÙ‡Ø§ÛŒ Ø³Ø§Ù„Ù… Ù¾Ø§Ø³Ø® Ø¨Ù‡ØªØ±ÛŒ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯',
                        macroRatio: { carbs: 20, protein: 25, fat: 55 },
                        recommendations: [
                            'Ú†Ø±Ø¨ÛŒâ€ŒÙ‡Ø§ÛŒ Ø³Ø§Ù„Ù… ØºÛŒØ±Ø§Ø´Ø¨Ø§Ø¹',
                            'Ú©Ø§Ù‡Ø´ Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øªâ€ŒÙ‡Ø§',
                            'Ú©ØªÙˆÚ˜Ù†ÛŒÚ© ÛŒØ§ Ú©Ù…â€ŒÚ©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª'
                        ]
                    };
                }

                return metabolicType;
            }

            // Calculate metabolic efficiency
            calculateMetabolicEfficiency(userData) {
                let efficiency = 50; // base efficiency

                // Age factor
                const age = parseInt(userData.age);
                if (age < 25) efficiency += 10;
                else if (age < 35) efficiency += 5;
                else if (age > 45) efficiency -= 5;
                else if (age > 55) efficiency -= 10;

                // Activity factor
                const activityBonus = {
                    'sedentary': -10,
                    'light': -5,
                    'moderate': 0,
                    'active': 5,
                    'very_active': 10
                };
                efficiency += activityBonus[userData.dailyActivity] || 0;

                // Sleep factor
                const sleepBonus = {
                    'less_5': -15,
                    '5_6': -10,
                    '6_7': -5,
                    '7_8': 5,
                    '8_9': 10,
                    'more_9': 0
                };
                efficiency += sleepBonus[userData.sleepHours] || 0;

                // Stress factor
                const stressBonus = {
                    'very_low': 10,
                    'low': 5,
                    'moderate': 0,
                    'high': -5,
                    'very_high': -15
                };
                efficiency += stressBonus[userData.stressLevel] || 0;

                // Energy level factor
                const energyBonus = {
                    'very_low': -10,
                    'low': -5,
                    'moderate': 0,
                    'high': 5,
                    'very_high': 10
                };
                efficiency += energyBonus[userData.energyLevel] || 0;

                efficiency = Math.max(0, Math.min(100, efficiency));

                let category;
                if (efficiency >= 80) category = 'Ø¨Ø³ÛŒØ§Ø± Ø¨Ø§Ù„Ø§';
                else if (efficiency >= 65) category = 'Ø¨Ø§Ù„Ø§';
                else if (efficiency >= 50) category = 'Ù…ØªÙˆØ³Ø·';
                else if (efficiency >= 35) category = 'Ù¾Ø§ÛŒÛŒÙ†';
                else category = 'Ø¨Ø³ÛŒØ§Ø± Ù¾Ø§ÛŒÛŒÙ†';

                return {
                    score: efficiency,
                    category: category,
                    factors: {
                        age: age < 35 ? 'Ù…Ø«Ø¨Øª' : 'Ù…Ù†ÙÛŒ',
                        activity: ['active', 'very_active'].includes(userData.dailyActivity) ? 'Ù…Ø«Ø¨Øª' : 'Ù…Ù†ÙÛŒ',
                        sleep: ['7_8', '8_9'].includes(userData.sleepHours) ? 'Ù…Ø«Ø¨Øª' : 'Ù…Ù†ÙÛŒ',
                        stress: ['very_low', 'low'].includes(userData.stressLevel) ? 'Ù…Ø«Ø¨Øª' : 'Ù…Ù†ÙÛŒ'
                    }
                };
            }

            // Complete scientific analysis
            performCompleteAnalysis(userData) {
                this.userData = userData;
                
                // Core metrics
                const metabolicAnalysis = this.performMetabolicAnalysis(userData);
                const somatotype = this.calculateSomatotype(userData);
                const fitnessLevel = this.assessAdvancedFitness(userData);
                
                // Goal-specific calculations
                const goalAnalysis = this.analyzeGoalFeasibility(userData, metabolicAnalysis, somatotype, fitnessLevel);
                
                // Risk assessment
                const riskAssessment = this.performRiskAssessment(userData);
                
                // Generate personalized recommendations
                const recommendations = this.generateIntelligentRecommendations(
                    userData, metabolicAnalysis, somatotype, fitnessLevel, goalAnalysis
                );

                this.analysisResults = {
                    metabolic: metabolicAnalysis,
                    somatotype: somatotype,
                    fitness: fitnessLevel,
                    goals: goalAnalysis,
                    risks: riskAssessment,
                    recommendations: recommendations,
                    timestamp: new Date().toISOString(),
                    version: '2.0'
                };

                return this.analysisResults;
            }

            // Analyze goal feasibility
            analyzeGoalFeasibility(userData, metabolic, somatotype, fitness) {
                const goal = userData.primaryGoal;
                const currentWeight = parseFloat(userData.weight);
                const targetWeight = parseFloat(userData.targetWeight);
                const weightDifference = currentWeight - targetWeight;
                
                let feasibility, timeline, challenges, advantages;

                switch(goal) {
                    case 'weight_loss':
                        const safeWeightLoss = currentWeight * 0.02; // 2% per week max
                        const weeksNeeded = Math.abs(weightDifference) / safeWeightLoss;
                        
                        feasibility = weightDifference > 0 ? 'Ø¹Ø§Ù„ÛŒ' : 'Ù†Ø§Ù…Ø¹Ù‚ÙˆÙ„';
                        timeline = `${Math.ceil(weeksNeeded)} Ù‡ÙØªÙ‡`;
                        
                        if (somatotype.name === 'Ø§Ù†Ø¯ÙˆÙ…ÙˆØ±Ù') {
                            challenges = ['Ù…ØªØ§Ø¨ÙˆÙ„ÛŒØ³Ù… Ú©Ù†Ø¯', 'Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ù†ØªØ±Ù„ Ø¯Ù‚ÛŒÙ‚ Ú©Ø§Ù„Ø±ÛŒ'];
                            advantages = ['Ù¾Ø§Ø³Ø® Ø®ÙˆØ¨ Ø¨Ù‡ ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‚Ø¯Ø±ØªÛŒ'];
                        } else if (somatotype.name === 'Ù…Ø²ÙˆÙ…ÙˆØ±Ù') {
                            challenges = ['Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªØ¹Ø§Ø¯Ù„ Ø¯Ø± Ø±Ú˜ÛŒÙ…'];
                            advantages = ['Ù¾Ø§Ø³Ø® Ø³Ø±ÛŒØ¹ Ø¨Ù‡ ØªÙ…Ø±ÛŒÙ†', 'Ù…ØªØ§Ø¨ÙˆÙ„ÛŒØ³Ù… Ù…Ù†Ø§Ø³Ø¨'];
                        } else {
                            challenges = ['Ø§Ø­ØªÙ…Ø§Ù„ Ú©Ø§Ù‡Ø´ Ø¹Ø¶Ù„Ù‡'];
                            advantages = ['Ù…ØªØ§Ø¨ÙˆÙ„ÛŒØ³Ù… Ø³Ø±ÛŒØ¹', 'Ø³ÙˆØ²Ø§Ù†Ø¯Ù† Ú†Ø±Ø¨ÛŒ Ø¢Ø³Ø§Ù†'];
                        }
                        break;

                    case 'muscle_gain':
                        const expectedGain = fitness.level === 'ØªØ§Ø²Ù‡â€ŒÚ©Ø§Ø±' ? 1 : 
                                           fitness.level === 'Ù…Ø¨ØªØ¯ÛŒ' ? 0.7 : 0.4; // kg per month
                        const muscleWeeksNeeded = Math.abs(weightDifference) / (expectedGain / 4);
                        
                        feasibility = somatotype.name === 'Ù…Ø²ÙˆÙ…ÙˆØ±Ù' ? 'Ø¹Ø§Ù„ÛŒ' : 
                                     somatotype.name === 'Ø§Ù†Ø¯ÙˆÙ…ÙˆØ±Ù' ? 'Ø®ÙˆØ¨' : 'Ø³Ø®Øª';
                        timeline = `${Math.ceil(muscleWeeksNeeded)} Ù‡ÙØªÙ‡`;
                        
                        if (somatotype.name === 'Ø§Ú©ØªÙˆÙ…ÙˆØ±Ù') {
                            challenges = ['Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ø§Ù„Ø±ÛŒ Ø¨Ø³ÛŒØ§Ø± Ø²ÛŒØ§Ø¯', 'Ø¹Ø¶Ù„Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ù†Ø¯'];
                            advantages = ['ØªØ¹Ø±ÛŒÙ Ø¹Ø¶Ù„Ø§Ù†ÛŒ Ø¹Ø§Ù„ÛŒ', 'Ú©Ù…â€ŒÚ†Ø±Ø¨ÛŒ Ø·Ø¨ÛŒØ¹ÛŒ'];
                        }
                        break;

                    case 'strength':
                        const strengthGain = fitness.level === 'ØªØ§Ø²Ù‡â€ŒÚ©Ø§Ø±' ? '50-100%' : 
                                           fitness.level === 'Ù…Ø¨ØªØ¯ÛŒ' ? '25-50%' : '10-25%';
                        
                        feasibility = 'Ø¹Ø§Ù„ÛŒ';
                        timeline = '8-12 Ù‡ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ Ù†ØªØ§ÛŒØ¬ Ø§ÙˆÙ„ÛŒÙ‡';
                        challenges = ['Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ…Ø±ÛŒÙ† Ù…Ù†Ø¸Ù…', 'Ø§ÙØ²Ø§ÛŒØ´ ØªØ¯Ø±ÛŒØ¬ÛŒ Ø¨Ø§Ø±'];
                        advantages = [`Ø§Ù…Ú©Ø§Ù† Ø¨Ù‡Ø¨ÙˆØ¯ ${strengthGain}`, 'Ø¨Ù‡Ø¨ÙˆØ¯ Ú©ÛŒÙÛŒØª Ø²Ù†Ø¯Ú¯ÛŒ'];
                        break;

                    default:
                        feasibility = 'Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªÛŒØ§Ø¨ÛŒ';
                        timeline = '8-16 Ù‡ÙØªÙ‡';
                        challenges = ['Ù†ÛŒØ§Ø² Ø¨Ù‡ ØµØ¨Ø± Ùˆ Ù¾Ø´ØªÚ©Ø§Ø±'];
                        advantages = ['Ø¨Ù‡Ø¨ÙˆØ¯ Ø³Ù„Ø§Ù…Øª Ú©Ù„ÛŒ'];
                }

                return {
                    goal: goal,
                    feasibility: feasibility,
                    timeline: timeline,
                    challenges: challenges,
                    advantages: advantages,
                    currentVsTarget: {
                        current: currentWeight,
                        target: targetWeight,
                        difference: weightDifference.toFixed(1)
                    },
                    recommendations: this.getGoalSpecificRecommendations(goal, somatotype, fitness)
                };
            }

            // Risk assessment based on health data
            performRiskAssessment(userData) {
                let riskFactors = [];
                let recommendations = [];
                let overallRisk = 'Ú©Ù…';

                // Age-related risks
                const age = parseInt(userData.age);
                if (age > 50) {
                    riskFactors.push('Ø³Ù† Ø¨Ø§Ù„Ø§ÛŒ 50 Ø³Ø§Ù„');
                    recommendations.push('Ù…Ø´ÙˆØ±Øª Ø¨Ø§ Ù¾Ø²Ø´Ú© Ù‚Ø¨Ù„ Ø´Ø±ÙˆØ¹');
                }

                // BMI-related risks
                const weight = parseFloat(userData.weight);
                const height = parseFloat(userData.height);
                const bmi = weight / Math.pow(height / 100, 2);
                
                if (bmi > 30) {
                    riskFactors.push('Ú†Ø§Ù‚ÛŒ (BMI > 30)');
                    recommendations.push('Ø´Ø±ÙˆØ¹ ØªØ¯Ø±ÛŒØ¬ÛŒ ØªÙ…Ø±ÛŒÙ†Ø§Øª');
                    overallRisk = 'Ù…ØªÙˆØ³Ø·';
                } else if (bmi < 18.5) {
                    riskFactors.push('Ú©Ù…â€ŒÙˆØ²Ù†ÛŒ (BMI < 18.5)');
                    recommendations.push('ØªÙ…Ø±Ú©Ø² Ø¨Ø± ØªÙ‚ÙˆÛŒØª ØªØ¯Ø±ÛŒØ¬ÛŒ');
                }

                // Health conditions
                const healthConditions = userData.healthConditions || [];
                if (healthConditions.includes('heart_disease')) {
                    riskFactors.push('Ù…Ø´Ú©Ù„ Ù‚Ù„Ø¨ÛŒ');
                    recommendations.push('Ù…Ø´ÙˆØ±Øª Ø­ØªÙ…ÛŒ Ø¨Ø§ Ú©Ø§Ø±Ø¯ÛŒÙˆÙ„ÙˆÚ˜ÛŒØ³Øª');
                    overallRisk = 'Ø¨Ø§Ù„Ø§';
                }
                if (healthConditions.includes('hypertension')) {
                    riskFactors.push('ÙØ´Ø§Ø± Ø®ÙˆÙ† Ø¨Ø§Ù„Ø§');
                    recommendations.push('Ú©Ù†ØªØ±Ù„ ÙØ´Ø§Ø± Ø®ÙˆÙ† Ù‚Ø¨Ù„ ØªÙ…Ø±ÛŒÙ†');
                    overallRisk = 'Ù…ØªÙˆØ³Ø·';
                }
                if (healthConditions.includes('diabetes')) {
                    riskFactors.push('Ø¯ÛŒØ§Ø¨Øª');
                    recommendations.push('Ú©Ù†ØªØ±Ù„ Ù‚Ù†Ø¯ Ø®ÙˆÙ†');
                    overallRisk = 'Ù…ØªÙˆØ³Ø·';
                }

                // Injury history
                const injuries = userData.injuries || [];
                if (injuries.includes('back_pain')) {
                    riskFactors.push('Ø³Ø§Ø¨Ù‚Ù‡ Ø¯Ø±Ø¯ Ú©Ù…Ø±');
                    recommendations.push('Ø§Ø¬ØªÙ†Ø§Ø¨ Ø§Ø² Ø­Ø±Ú©Ø§Øª ÙØ´Ø§Ø±ÛŒ Ø±ÙˆÛŒ Ø³ØªÙˆÙ† ÙÙ‚Ø±Ø§Øª');
                }
                if (injuries.includes('knee_pain')) {
                    riskFactors.push('Ù…Ø´Ú©Ù„ Ø²Ø§Ù†Ùˆ');
                    recommendations.push('Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¯Ø± ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù¾Ø§ÛŒ Ù¾Ø§ÛŒÛŒÙ†');
                }

                // Lifestyle risks
                if (userData.sleepHours === 'less_5') {
                    riskFactors.push('Ú©Ù…Ø¨ÙˆØ¯ Ø®ÙˆØ§Ø¨ Ø´Ø¯ÛŒØ¯');
                    recommendations.push('Ø¨Ù‡Ø¨ÙˆØ¯ Ø§Ù„Ú¯ÙˆÛŒ Ø®ÙˆØ§Ø¨ Ø§ÙˆÙ„ÙˆÛŒØª Ø§ÙˆÙ„');
                }
                if (userData.stressLevel === 'very_high') {
                    riskFactors.push('Ø§Ø³ØªØ±Ø³ Ø¨Ø³ÛŒØ§Ø± Ø¨Ø§Ù„Ø§');
                    recommendations.push('ØªÚ©Ù†ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù‡Ø´ Ø§Ø³ØªØ±Ø³');
                }

                return {
                    overallRisk: overallRisk,
                    riskFactors: riskFactors,
                    recommendations: recommendations,
                    clearanceNeeded: overallRisk === 'Ø¨Ø§Ù„Ø§',
                    modifications: this.generateSafetyModifications(userData)
                };
            }

            // Generate safety modifications
            generateSafetyModifications(userData) {
                const modifications = [];
                const injuries = userData.injuries || [];
                const healthConditions = userData.healthConditions || [];

                if (injuries.includes('back_pain')) {
                    modifications.push({
                        area: 'Ú©Ù…Ø±',
                        avoid: ['Ø¯Ø¯Ù„ÛŒÙØª Ù…Ø¹Ù…ÙˆÙ„ÛŒ', 'Ø§Ø³Ú©ÙˆØ§Øª Ø¢Ø²Ø§Ø¯ Ø¨Ø§ ÙˆØ²Ù† Ø³Ù†Ú¯ÛŒÙ†', 'Ø¨Ø§Ù„Ø§ Ú©Ø´ÛŒØ¯Ù† Ø§Ø² Ø²Ù…ÛŒÙ†'],
                        modify: ['Ø¯Ø¯Ù„ÛŒÙØª Ø±ÙˆÙ…Ø§Ù†ÛŒ', 'Ø§Ø³Ú©ÙˆØ§Øª Ú¯Ø§Ø¨Ù„Øª', 'Ù‡Ø§ÛŒÙ¾Ø±Ø§Ú©Ø³ØªÙ†Ø´Ù†'],
                        focus: ['ØªÙ‚ÙˆÛŒØª Ø¹Ø¶Ù„Ø§Øª Ù…Ø±Ú©Ø²ÛŒ', 'Ú©Ø´Ø´ Ù‡Ù…Ø³ØªØ±ÛŒÙ†Ú¯', 'Ù…ÙˆØ¨ÛŒÙ„ÛŒØªÛŒ Ù…Ù‡Ø±Ù‡â€ŒÙ‡Ø§']
                    });
                }

                if (injuries.includes('knee_pain')) {
                    modifications.push({
                        area: 'Ø²Ø§Ù†Ùˆ',
                        avoid: ['Ø§Ø³Ú©ÙˆØ§Øª Ø¹Ù…ÛŒÙ‚', 'Ù„Ø§Ù†Ø¬ Ø¨Ø§ Ù‚Ø¯Ù… Ø¨Ù„Ù†Ø¯', 'Ø¯ÙˆÛŒØ¯Ù† Ø±ÙˆÛŒ Ø³Ø·Ø­ Ø³Ø®Øª'],
                        modify: ['Ø§Ø³Ú©ÙˆØ§Øª ØªØ§ 90 Ø¯Ø±Ø¬Ù‡', 'Ù„Ø§Ù†Ø¬ Ø§Ø³ØªØ§ØªÛŒÚ©', 'Ø¯ÙˆÛŒØ¯Ù† Ø±ÙˆÛŒ ØªØ±Ø¯Ù…ÛŒÙ„'],
                        focus: ['ØªÙ‚ÙˆÛŒØª Ú†Ù‡Ø§Ø±Ø³Ø±', 'Ú©Ø´Ø´ IT Band', 'ØªØ¹Ø§Ø¯Ù„ Ùˆ ØªØ­Ø±Ú©']
                    });
                }

                if (healthConditions.includes('hypertension')) {
                    modifications.push({
                        area: 'ÙØ´Ø§Ø± Ø®ÙˆÙ†',
                        avoid: ['ÙˆØ§Ù„Ø³Ø§Ù„ÙˆØ§ Ø´Ø¯ÛŒØ¯', 'Ø­Ø¨Ø³ Ù†ÙØ³ Ø·ÙˆÙ„Ø§Ù†ÛŒ', 'Ø­Ø±Ú©Ø§Øª Ø³Ø± Ù¾Ø§ÛŒÛŒÙ†'],
                        modify: ['ØªÙ†ÙØ³ Ù…Ù†Ø§Ø³Ø¨', 'Ø§Ø³ØªØ±Ø§Ø­Øª Ø¨ÛŒÙ† Ø³Øªâ€ŒÙ‡Ø§', 'Ú©Ù†ØªØ±Ù„ Ø´Ø¯Øª'],
                        focus: ['ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‡ÙˆØ§Ø²ÛŒ Ù…Ù„Ø§ÛŒÙ…', 'Ú©Ø§Ù‡Ø´ Ø§Ø³ØªØ±Ø³', 'Ú©Ù†ØªØ±Ù„ Ù…Ø¯Ø§ÙˆÙ…']
                    });
                }

                return modifications;
            }

            // Get goal-specific recommendations
            getGoalSpecificRecommendations(goal, somatotype, fitness) {
                const recommendations = {
                    training: [],
                    nutrition: [],
                    timeline: '',
                    expectations: []
                };

                switch(goal) {
                    case 'weight_loss':
                        recommendations.training = [
                            'ØªØ±Ú©ÛŒØ¨ 60% ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‚Ø¯Ø±ØªÛŒ + 40% Ù‡ÙˆØ§Ø²ÛŒ',
                            'ØªÙ…Ø±ÛŒÙ†Ø§Øª HIIT 2-3 Ø¨Ø§Ø± Ø¯Ø± Ù‡ÙØªÙ‡',
                            'ØªÙ…Ø±ÛŒÙ†Ø§Øª Ú©Ù„ Ø¨Ø¯Ù† Ø¨Ø±Ø§ÛŒ Ø­Ø¯Ø§Ú©Ø«Ø± Ø³ÙˆØ²Ø§Ù†Ø¯Ù† Ú©Ø§Ù„Ø±ÛŒ'
                        ];
                        recommendations.nutrition = [
                            `Ú©Ø³Ø±ÛŒ Ú©Ø§Ù„Ø±ÛŒ ${somatotype.name === 'Ø§Ù†Ø¯ÙˆÙ…ÙˆØ±Ù' ? '500-750' : '300-500'} Ú©Ø§Ù„Ø±ÛŒ`,
                            'Ù¾Ø±ÙˆØªØ¦ÛŒÙ† Ø¨Ø§Ù„Ø§: 2.2-2.5 Ú¯Ø±Ù… Ø¨Ø± Ú©ÛŒÙ„Ùˆ ÙˆØ²Ù†',
                            'ØªØ§ÛŒÙ…ÛŒÙ†Ú¯ Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª Ø­ÙˆÙ„ ØªÙ…Ø±ÛŒÙ†'
                        ];
                        recommendations.timeline = 'Ù†ØªØ§ÛŒØ¬ Ù…Ø­Ø³ÙˆØ³: 4-6 Ù‡ÙØªÙ‡ØŒ Ù‡Ø¯Ù Ù†Ù‡Ø§ÛŒÛŒ: 12-24 Ù‡ÙØªÙ‡';
                        break;

                    case 'muscle_gain':
                        recommendations.training = [
                            'ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‚Ø¯Ø±ØªÛŒ 4-5 Ø¨Ø§Ø± Ø¯Ø± Ù‡ÙØªÙ‡',
                            '6-12 ØªÚ©Ø±Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù‡Ø§ÛŒÙ¾Ø±ØªØ±ÙˆÙÛŒ',
                            'ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ø­Ø±Ú©Ø§Øª Ú©Ø§Ù…Ù¾ÙˆÙ†Ø¯'
                        ];
                        recommendations.nutrition = [
                            `Ù…Ø§Ø²Ø§Ø¯ Ú©Ø§Ù„Ø±ÛŒ ${somatotype.name === 'Ø§Ú©ØªÙˆÙ…ÙˆØ±Ù' ? '500-800' : '300-500'} Ú©Ø§Ù„Ø±ÛŒ`,
                            'Ù¾Ø±ÙˆØªØ¦ÛŒÙ†: 2-2.5 Ú¯Ø±Ù… Ø¨Ø± Ú©ÛŒÙ„Ùˆ ÙˆØ²Ù†',
                            'Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ù†Ø±Ú˜ÛŒ'
                        ];
                        recommendations.timeline = 'ØªØºÛŒÛŒØ±Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡: 6-8 Ù‡ÙØªÙ‡ØŒ Ù†ØªØ§ÛŒØ¬ Ú†Ø´Ù…Ú¯ÛŒØ±: 12-16 Ù‡ÙØªÙ‡';
                        break;

                    case 'strength':
                        recommendations.training = [
                            'ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‚Ø¯Ø±ØªÛŒ 3-4 Ø¨Ø§Ø± Ø¯Ø± Ù‡ÙØªÙ‡',
                            '1-6 ØªÚ©Ø±Ø§Ø± Ø¨Ø§ ÙˆØ²Ù† Ø³Ù†Ú¯ÛŒÙ†',
                            'ØªÙ…Ø±Ú©Ø² Ø¨Ø± big 3: Ø§Ø³Ú©ÙˆØ§ØªØŒ Ø¯Ø¯Ù„ÛŒÙØªØŒ Ù¾Ø±Ø³'
                        ];
                        recommendations.nutrition = [
                            'Ú©Ø§Ù„Ø±ÛŒ ØªØ¹Ø§Ø¯Ù„ ÛŒØ§ Ù…Ø§Ø²Ø§Ø¯ Ø¬Ø²Ø¦ÛŒ',
                            'Ù¾Ø±ÙˆØªØ¦ÛŒÙ†: 1.8-2.2 Ú¯Ø±Ù… Ø¨Ø± Ú©ÛŒÙ„Ùˆ',
                            'Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª Ø¨Ø±Ø§ÛŒ Ø§Ù†Ø±Ú˜ÛŒ ØªÙ…Ø±ÛŒÙ†'
                        ];
                        recommendations.timeline = 'Ø§ÙØ²Ø§ÛŒØ´ Ù‚Ø¯Ø±Øª: 2-4 Ù‡ÙØªÙ‡ØŒ Ù†ØªØ§ÛŒØ¬ Ù‚Ø§Ø¨Ù„ ØªÙˆØ¬Ù‡: 8-12 Ù‡ÙØªÙ‡';
                        break;
                }

                // Adjust based on fitness level
                if (fitness.level === 'ØªØ§Ø²Ù‡â€ŒÚ©Ø§Ø±') {
                    recommendations.expectations = [
                        'Ø´Ø±ÙˆØ¹ Ø¨Ø³ÛŒØ§Ø± ØªØ¯Ø±ÛŒØ¬ÛŒ',
                        'ØªÙ…Ø±Ú©Ø² Ø¨Ø± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ ØªÚ©Ù†ÛŒÚ©',
                        'Ø§ÙØ²Ø§ÛŒØ´ 10-15% Ù‡Ø± Ù‡ÙØªÙ‡'
                    ];
                } else if (fitness.level === 'Ù¾ÛŒØ´Ø±ÙØªÙ‡') {
                    recommendations.expectations = [
                        'Ù†ØªØ§ÛŒØ¬ Ø³Ø±ÛŒØ¹â€ŒØªØ±',
                        'Ø§Ù…Ú©Ø§Ù† Ø´Ø¯Øª Ø¨Ø§Ù„Ø§ØªØ±',
                        'ØªÙ†ÙˆØ¹ Ø¨ÛŒØ´ØªØ± Ø¯Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡'
                    ];
                }

                return recommendations;
            }

            // Generate intelligent recommendations
            generateIntelligentRecommendations(userData, metabolic, somatotype, fitness, goals) {
                return {
                    immediate: this.getImmediateActions(userData, metabolic, fitness),
                    shortTerm: this.getShortTermPlan(userData, somatotype, goals),
                    longTerm: this.getLongTermStrategy(userData, metabolic, goals),
                    lifestyle: this.getLifestyleOptimizations(userData),
                    supplements: this.getSupplementRecommendations(userData, goals),
                    monitoring: this.getMonitoringPlan(userData, goals)
                };
            }

            // Immediate actions (first week)
            getImmediateActions(userData, metabolic, fitness) {
                const actions = [];

                if (fitness.level === 'ØªØ§Ø²Ù‡â€ŒÚ©Ø§Ø±') {
                    actions.push('Ø´Ø±ÙˆØ¹ Ø¨Ø§ 10-15 Ø¯Ù‚ÛŒÙ‚Ù‡ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ±ÙˆÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡');
                    actions.push('ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø­Ø±Ú©Ø§Øª Ù¾Ø§ÛŒÙ‡ Ø¨Ø¯ÙˆÙ† ÙˆØ²Ù†');
                }

                if (metabolic.bmr.accuracy < 90) {
                    actions.push('Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± ØªØ±Ú©ÛŒØ¨ Ø¨Ø¯Ù†');
                }

                if (userData.sleepHours === 'less_5') {
                    actions.push('Ø§ÙˆÙ„ÙˆÛŒØª Ø§ÙˆÙ„: Ø¨Ù‡Ø¨ÙˆØ¯ Ø®ÙˆØ§Ø¨ Ø¨Ù‡ 7-8 Ø³Ø§Ø¹Øª');
                }

                if (userData.waterIntake < 2) {
                    actions.push('Ø§ÙØ²Ø§ÛŒØ´ Ù…ØµØ±Ù Ø¢Ø¨ Ø¨Ù‡ 2.5-3 Ù„ÛŒØªØ± Ø±ÙˆØ²Ø§Ù†Ù‡');
                }

                return actions;
            }

            // Short-term plan (4-8 weeks)
            getShortTermPlan(userData, somatotype, goals) {
                const plan = {
                    weeks1_2: [],
                    weeks3_4: [],
                    weeks5_8: []
                };

                // First 2 weeks: Adaptation
                plan.weeks1_2 = [
                    'Ø§ÛŒØ¬Ø§Ø¯ Ø¹Ø§Ø¯Øª ØªÙ…Ø±ÛŒÙ† Ù…Ù†Ø¸Ù…',
                    'ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ ÙØ±Ù… ØµØ­ÛŒØ­ Ø­Ø±Ú©Ø§Øª',
                    'ØªÙ†Ø¸ÛŒÙ… Ø§Ù„Ú¯ÙˆÛŒ ØºØ°Ø§ÛŒÛŒ'
                ];

                // Weeks 3-4: Progression
                plan.weeks3_4 = [
                    'Ø§ÙØ²Ø§ÛŒØ´ Ø­Ø¬Ù… ØªÙ…Ø±ÛŒÙ†',
                    'Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø­Ø±Ú©Ø§Øª Ø¬Ø¯ÛŒØ¯',
                    'Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ ØªØºØ°ÛŒÙ‡'
                ];

                // Weeks 5-8: Development
                plan.weeks5_8 = [
                    'Ø§ÙØ²Ø§ÛŒØ´ Ø´Ø¯Øª ØªÙ…Ø±ÛŒÙ†Ø§Øª',
                    'ØªØ®ØµØµÛŒ Ø´Ø¯Ù† Ø¨Ø±Ù†Ø§Ù…Ù‡',
                    'Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ù¾ÛŒØ´Ø±ÙØª Ùˆ ØªÙ†Ø¸ÛŒÙ…'
                ];

                return plan;
            }

            // Long-term strategy (3-6 months)
            getLongTermStrategy(userData, metabolic, goals) {
                const strategy = [];

                if (goals.goal === 'weight_loss') {
                    strategy.push('Ú©Ø§Ù‡Ø´ ØªØ¯Ø±ÛŒØ¬ÛŒ 0.5-1 Ú©ÛŒÙ„Ùˆ Ø¯Ø± Ù‡ÙØªÙ‡');
                    strategy.push('Ø­ÙØ¸ Ø¹Ø¶Ù„Ù‡ Ø¨Ø§ ØªÙ…Ø±ÛŒÙ†Ø§Øª Ù‚Ø¯Ø±ØªÛŒ');
                    strategy.push('Ø§ÛŒØ¬Ø§Ø¯ Ø¹Ø§Ø¯Ø§Øª ØºØ°Ø§ÛŒÛŒ Ù¾Ø§ÛŒØ¯Ø§Ø±');
                } else if (goals.goal === 'muscle_gain') {
                    strategy.push('Ø§ÙØ²Ø§ÛŒØ´ 2-4 Ú©ÛŒÙ„Ùˆ Ø¹Ø¶Ù„Ù‡ Ø¯Ø± 6 Ù…Ø§Ù‡');
                    strategy.push('Ù¾ÛŒØ´Ø±ÙØª ØªØ¯Ø±ÛŒØ¬ÛŒ Ø¯Ø± ÙˆØ²Ù†Ù‡â€ŒÙ‡Ø§');
                    strategy.push('Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§Ø²ÛŒØ§ÙØª');
                }

                strategy.push('Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ù…Ø§Ù‡Ø§Ù†Ù‡ Ùˆ ØªÙ†Ø¸ÛŒÙ… Ø¨Ø±Ù†Ø§Ù…Ù‡');
                strategy.push('ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù…Ù‡Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯');
                strategy.push('Ø§ÛŒØ¬Ø§Ø¯ Ø³Ø¨Ú© Ø²Ù†Ø¯Ú¯ÛŒ ÙØ¹Ø§Ù„');

                return strategy;
            }

            // Lifestyle optimizations
            getLifestyleOptimizations(userData) {
                const optimizations = {};

                // Sleep optimization
                if (userData.sleepQuality !== 'excellent') {
                    optimizations.sleep = [
                        'Ø§ÛŒØ¬Ø§Ø¯ Ø±ÙˆØªÛŒÙ† Ø®ÙˆØ§Ø¨ Ø«Ø§Ø¨Øª',
                        'Ø§ØªØ§Ù‚ Ø®ÙˆØ§Ø¨ ØªØ§Ø±ÛŒÚ© Ùˆ Ø®Ù†Ú©',
                        'Ø§Ø¬ØªÙ†Ø§Ø¨ Ø§Ø² ØµÙØ­Ù‡ Ù†Ù…Ø§ÛŒØ´ 1 Ø³Ø§Ø¹Øª Ù‚Ø¨Ù„ Ø®ÙˆØ§Ø¨'
                    ];
                }

                // Stress management
                if (['high', 'very_high'].includes(userData.stressLevel)) {
                    optimizations.stress = [
                        'ØªÚ©Ù†ÛŒÚ©â€ŒÙ‡Ø§ÛŒ ØªÙ†ÙØ³ Ø¹Ù…ÛŒÙ‚',
                        'Ù…Ø¯ÛŒØªÛŒØ´Ù† 10 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø±ÙˆØ²Ø§Ù†Ù‡',
                        'ØªÙ…Ø±ÛŒÙ†Ø§Øª ÛŒÙˆÚ¯Ø§ ÛŒØ§ Ú©Ø´Ø´ÛŒ'
                    ];
                }

                // Energy optimization
                if (['low', 'very_low'].includes(userData.energyLevel)) {
                    optimizations.energy = [
                        'ØµØ¨Ø­Ø§Ù†Ù‡ Ù¾Ø±Ù¾Ø±ÙˆØªØ¦ÛŒÙ†',
                        'ÙˆØ¹Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú© Ùˆ Ù…Ú©Ø±Ø±',
                        'ØªÙ…Ø±ÛŒÙ† ØµØ¨Ø­Ú¯Ø§Ù‡ÛŒ Ø³Ø¨Ú©'
                    ];
                }

                return optimizations;
            }

            // Supplement recommendations
            getSupplementRecommendations(userData, goals) {
                const supplements = {
                    essential: [
                        { name: 'Ù…ÙˆÙ„ØªÛŒ ÙˆÛŒØªØ§Ù…ÛŒÙ†', dosage: '1 Ø¹Ø¯Ø¯ Ø±ÙˆØ²Ø§Ù†Ù‡', timing: 'Ø¨Ø§ ØµØ¨Ø­Ø§Ù†Ù‡' },
                        { name: 'ÙˆÛŒØªØ§Ù…ÛŒÙ† D3', dosage: '2000 IU', timing: 'Ø±ÙˆØ²Ø§Ù†Ù‡' }
                    ],
                    conditional: [],
                    goalSpecific: []
                };

                // Conditional based on diet
                if (userData.dietType === 'vegetarian' || userData.dietType === 'vegan') {
                    supplements.conditional.push(
                        { name: 'B12', dosage: '250 mcg', timing: 'Ø±ÙˆØ²Ø§Ù†Ù‡' }
                    );
                }

                // Goal-specific
                if (goals.goal === 'muscle_gain') {
                    supplements.goalSpecific.push(
                        { name: 'Ù¾Ø±ÙˆØªØ¦ÛŒÙ† ÙˆÛŒ', dosage: '25-30g', timing: 'Ø¨Ø¹Ø¯ Ø§Ø² ØªÙ…Ø±ÛŒÙ†' },
                        { name: 'Ú©Ø±Ø§ØªÛŒÙ†', dosage: '5g', timing: 'Ø±ÙˆØ²Ø§Ù†Ù‡' }
                    );
                } else if (goals.goal === 'weight_loss') {
                    supplements.goalSpecific.push(
                        { name: 'L-Ú©Ø§Ø±Ù†ÛŒØªÛŒÙ†', dosage: '2g', timing: 'Ù‚Ø¨Ù„ Ø§Ø² ØªÙ…Ø±ÛŒÙ†' },
                        { name: 'Ú†Ø§ÛŒ Ø³Ø¨Ø²', dosage: '2 ÙÙ†Ø¬Ø§Ù†', timing: 'Ø¨ÛŒÙ† ÙˆØ¹Ø¯Ù‡â€ŒÙ‡Ø§' }
                    );
                }

                return supplements;
            }

            // Monitoring plan
            getMonitoringPlan(userData, goals) {
                return {
                    daily: [
                        'ÙˆØ²Ù† Ø¨Ø¯Ù† (ØµØ¨Ø­ Ù†Ø§Ø´ØªØ§)',
                        'Ø³Ø§Ø¹Ø§Øª Ø®ÙˆØ§Ø¨',
                        'Ø³Ø·Ø­ Ø§Ù†Ø±Ú˜ÛŒ (1-10)',
                        'Ù…ØµØ±Ù Ø¢Ø¨'
                    ],
                    weekly: [
                        'Ø¹Ú©Ø³ Ù¾ÛŒØ´Ø±ÙØª',
                        'Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø¯ÙˆØ± Ú©Ù…Ø±',
                        'ØªØ³Øª Ø¹Ù…Ù„Ú©Ø±Ø¯ÛŒ (Ø´Ù†Ø§ØŒ Ù¾Ù„Ø§Ù†Ú©)',
                        'Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ø®Ù„Ù‚ Ùˆ Ø®Ùˆ'
                    ],
                    monthly: [
                        'Ø¯Ø±ØµØ¯ Ú†Ø±Ø¨ÛŒ Ø¨Ø¯Ù†',
                        'ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø¯Ú¯ÛŒ Ú©Ø§Ù…Ù„',
                        'Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù‡Ø¯Ø§Ù Ùˆ ØªÙ†Ø¸ÛŒÙ…',
                        'Ù…Ø´ÙˆØ±Øª Ø¨Ø§ Ù…ØªØ®ØµØµ'
                    ]
                };
            }
        }

        // Advanced Program Generator with Real Intelligence
        class IntelligentProgramGenerator {
            constructor(userData, analysisResults) {
                this.userData = userData;
                this.analysis = analysisResults;
                this.exerciseDatabase = this.initializeAdvancedExerciseDatabase();
                this.nutritionDatabase = this.initializeNutritionDatabase();
            }

            // Initialize comprehensive exercise database
            initializeAdvancedExerciseDatabase() {
                return {
                    strength: {
                        compound: {
                            beginner: [
                                { 
                                    name: 'Ø§Ø³Ú©ÙˆØ§Øª ÙˆØ²Ù† Ø¨Ø¯Ù†', 
                                    muscle: ['Ú†Ù‡Ø§Ø±Ø³Ø±', 'Ú¯Ù„ÙˆØª', 'Ù‡Ù…Ø³ØªØ±ÛŒÙ†Ú¯'], 
                                    difficulty: 'Ø¢Ø³Ø§Ù†', 
                                    equipment: 'bodyweight',
                                    form: 'Ù¾Ø§Ù‡Ø§ Ø´Ø§Ù†Ù‡â€ŒØ¹Ø±Ø¶ØŒ Ø²Ø§Ù†ÙˆÙ‡Ø§ Ø®Ø· Ø§Ù†Ú¯Ø´ØªØ§Ù† Ù¾Ø§ØŒ Ø³ÛŒÙ†Ù‡ Ø¨Ø§Ù„Ø§',
                                    progression: 'Ø§ÙØ²Ø§ÛŒØ´ ØªØ¹Ø¯Ø§Ø¯ â†’ ÛŒÚ© Ù¾Ø§ â†’ Ø§Ø³Ú©ÙˆØ§Øª Ø¬Ø§Ù…Ù¾',
                                    contraindications: ['knee_pain'],
                                    modifications: {
                                        'knee_pain': 'Ø§Ø³Ú©ÙˆØ§Øª ØªØ§ 90 Ø¯Ø±Ø¬Ù‡',
                                        'back_pain': 'ØªÚ©ÛŒÙ‡ Ø¨Ù‡ Ø¯ÛŒÙˆØ§Ø±'
                                    }
                                },
                                { 
                                    name: 'Ø´Ù†Ø§ÛŒ Ø³ÛŒÙ†Ù‡', 
                                    muscle: ['Ø³ÛŒÙ†Ù‡', 'Ø³Ù‡â€ŒØ³Ø±', 'Ø´Ø§Ù†Ù‡ Ø¬Ù„Ùˆ'], 
                                    difficulty: 'Ø¢Ø³Ø§Ù†', 
                                    equipment: 'bodyweight',
                                    form: 'Ø¨Ø¯Ù† ØµØ§ÙØŒ Ø¯Ø³Øªâ€ŒÙ‡Ø§ Ø´Ø§Ù†Ù‡â€ŒØ¹Ø±Ø¶ØŒ Ù†Ú¯Ø§Ù‡ Ø±Ùˆ Ø¨Ù‡ Ø¬Ù„Ùˆ',
                                    progression: 'Ø²Ø§Ù†Ùˆ â†’ Ú©Ø§Ù…Ù„ â†’ diamond â†’ ÛŒÚ© Ø¯Ø³Øª',
                                    contraindications: ['shoulder_pain', 'wrist_pain'],
                                    modifications: {
                                        'shoulder_pain': 'Ø´Ù†Ø§ÛŒ Ø³ÛŒÙ†Ù‡ Ù…Ø§ÛŒÙ„',
                                        'wrist_pain': 'Ù…Ø´Øªâ€ŒÙ‡Ø§ Ø±ÙˆÛŒ Ø²Ù…ÛŒÙ†'
                                    }
                                }
                            ],
                            intermediate: [
                                { 
                                    name: 'Ø§Ø³Ú©ÙˆØ§Øª Ú¯Ø§Ø¨Ù„Øª', 
                                    muscle: ['Ú†Ù‡Ø§Ø±Ø³Ø±', 'Ú¯Ù„ÙˆØª', 'Ù…Ø±Ú©Ø²ÛŒ'], 
                                    difficulty: 'Ù…ØªÙˆØ³Ø·', 
                                    equipment: 'dumbbells',
                                    form: 'Ø¯Ù…Ø¨Ù„ Ù†Ø²Ø¯ÛŒÚ© Ø³ÛŒÙ†Ù‡ØŒ Ø¢Ø±Ù†Ø¬â€ŒÙ‡Ø§ Ù¾Ø§ÛŒÛŒÙ†',
                                    progression: 'Ø§ÙØ²Ø§ÛŒØ´ ÙˆØ²Ù† â†’ Ø§Ø³Ú©ÙˆØ§Øª ÙØ±Ø§Ù†Øª',
                                    contraindications: ['back_pain'],
                                    modifications: {
                                        'knee_pain': 'Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¹Ù…Ù‚'
                                    }
                                }
                            ],
                            advanced: [
                                { 
                                    name: 'Ø§Ø³Ú©ÙˆØ§Øª Ù‡Ø§Ù„ØªØ±', 
                                    muscle: ['Ú†Ù‡Ø§Ø±Ø³Ø±', 'Ú¯Ù„ÙˆØª', 'Ù…Ø±Ú©Ø²ÛŒ'], 
                                    difficulty: 'Ø³Ø®Øª', 
                                    equipment: 'barbell',
                                    form: 'Ù‡Ø§Ù„ØªØ± Ø±ÙˆÛŒ Ø°ÙˆØ²Ù†Ù‚Ù‡ØŒ Ù¾Ø§Ù‡Ø§ Ø«Ø§Ø¨Øª',
                                    progression: 'Ø§ÙØ²Ø§ÛŒØ´ ÙˆØ²Ù† â†’ Ø§Ø³Ú©ÙˆØ§Øª ÙØ±Ø§Ù†Øª â†’ Ø§Ø³Ú©ÙˆØ§Øª overhead',
                                    contraindications: ['back_pain', 'shoulder_pain'],
                                    modifications: {
                                        'back_pain': 'Ø­Ø°Ù Ø§Ø² Ø¨Ø±Ù†Ø§Ù…Ù‡'
                                    }
                                }
                            ]
                        },
                        isolation: {
                            beginner: [
                                { 
                                    name: 'Ø¯Ø±Ø§Ø² Ú©Ø´ Ø¯ÙˆØ³Ø±', 
                                    muscle: ['Ø¯ÙˆØ³Ø±'], 
                                    difficulty: 'Ø¢Ø³Ø§Ù†', 
                                    equipment: 'dumbbells'
                                }
                            ],
                            intermediate: [
                                { 
                                    name: 'Ú©Ø±Ù„ Ù‡Ø§Ù„ØªØ±', 
                                    muscle: ['Ø¯ÙˆØ³Ø±'], 
                                    difficulty: 'Ù…ØªÙˆØ³Ø·', 
                                    equipment: 'barbell'
                                }
                            ]
                        }
                    },
                    cardio: {
                        low_intensity: [
                            { 
                                name: 'Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ±ÙˆÛŒ Ø³Ø±ÛŒØ¹', 
                                duration: '20-45', 
                                intensity: 'Ú©Ù…',
                                heartRate: '60-70% HRmax',
                                fatBurn: 'Ø¨Ø§Ù„Ø§',
                                equipment: 'none'
                            },
                            { 
                                name: 'Ø¯ÙˆÚ†Ø±Ø®Ù‡ Ø¢Ø±Ø§Ù…', 
                                duration: '20-60', 
                                intensity: 'Ú©Ù…',
                                heartRate: '60-70% HRmax',
                                equipment: 'bike'
                            }
                        ],
                        moderate_intensity: [
                            { 
                                name: 'Ø¯ÙˆÛŒØ¯Ù† Ù…ØªÙˆØ³Ø·', 
                                duration: '15-30', 
                                intensity: 'Ù…ØªÙˆØ³Ø·',
                                heartRate: '70-80% HRmax',
                                equipment: 'none'
                            }
                        ],
                        high_intensity: [
                            { 
                                name: 'HIIT', 
                                duration: '15-25', 
                                intensity: 'Ø¨Ø§Ù„Ø§',
                                heartRate: '80-90% HRmax',
                                structure: '30s Ú©Ø§Ø± / 30s Ø§Ø³ØªØ±Ø§Ø­Øª',
                                equipment: 'none'
                            }
                        ]
                    },
                    flexibility: [
                        { 
                            name: 'Ú©Ø´Ø´ Ù‡Ù…Ø³ØªØ±ÛŒÙ†Ú¯', 
                            duration: '30-60s', 
                            type: 'static',
                            target: ['Ù‡Ù…Ø³ØªØ±ÛŒÙ†Ú¯', 'Ú©Ù…Ø± Ù¾Ø§ÛŒÛŒÙ†']
                        },
                        { 
                            name: 'Ú©Ø´Ø´ Ú†Ù‡Ø§Ø±Ø³Ø±', 
                            duration: '30-60s', 
                            type: 'static',
                            target: ['Ú†Ù‡Ø§Ø±Ø³Ø±']
                        }
                    ],
                    martial_arts: [
                        { 
                            name: 'Ø´Ø§Ø¯Ùˆ Ø¨Ø§Ú©Ø³ÛŒÙ†Ú¯', 
                            duration: '3-5 Ø¯Ù‚ÛŒÙ‚Ù‡', 
                            skill: 'basic',
                            focus: ['ØªÚ©Ù†ÛŒÚ©', 'Ú©Ø§Ø±Ø¯ÛŒÙˆ']
                        },
                        { 
                            name: 'Ú©ÛŒÚ© Ù¾Ø¯', 
                            duration: '2-3 Ø¯Ù‚ÛŒÙ‚Ù‡', 
                            skill: 'intermediate',
                            focus: ['Ù‚Ø¯Ø±Øª', 'Ø¯Ù‚Øª']
                        }
                    ],
                    rehabilitation: [
                        {
                            name: 'ØªØ­Ø±Ú© Ø³ØªÙˆÙ† ÙÙ‚Ø±Ø§Øª',
                            target: 'back_pain',
                            duration: '5-10 Ø¯Ù‚ÛŒÙ‚Ù‡',
                            frequency: 'Ø±ÙˆØ²Ø§Ù†Ù‡'
                        },
                        {
                            name: 'ØªÙ‚ÙˆÛŒØª Ú†Ù‡Ø§Ø±Ø³Ø±',
                            target: 'knee_pain',
                            duration: '10-15 Ø¯Ù‚ÛŒÙ‚Ù‡',
                            frequency: '3 Ø¨Ø§Ø± Ø¯Ø± Ù‡ÙØªÙ‡'
                        }
                    ]
                };
            }

            // Initialize nutrition database
            initializeNutritionDatabase() {
                return {
                    foods: {
                        protein: [
                            { name: 'Ø³ÛŒÙ†Ù‡ Ù…Ø±Øº', protein: 25, carbs: 0, fat: 3, calories: 124 },
                            { name: 'ØªØ®Ù… Ù…Ø±Øº', protein: 13, carbs: 1, fat: 11, calories: 155 },
                            { name: 'Ù…Ø§Ù‡ÛŒ Ø³Ø§Ù„Ù…ÙˆÙ†', protein: 25, carbs: 0, fat: 13, calories: 208 },
                            { name: 'Ù„ÙˆØ¨ÛŒØ§ Ù‚Ø±Ù…Ø²', protein: 9, carbs: 23, fat: 0.5, calories: 127 }
                        ],
                        carbs: [
                            { name: 'Ø¨Ø±Ù†Ø¬ Ù‚Ù‡ÙˆÙ‡â€ŒØ§ÛŒ', protein: 3, carbs: 23, fat: 0.9, calories: 111 },
                            { name: 'Ø³ÛŒØ¨â€ŒØ²Ù…ÛŒÙ†ÛŒ', protein: 2, carbs: 17, fat: 0.1, calories: 77 },
                            { name: 'Ø¬Ùˆ Ø¯ÙˆØ³Ø±', protein: 4, carbs: 28, fat: 1, calories: 135 }
                        ],
                        fats: [
                            { name: 'Ø¢ÙˆÙˆÚ©Ø§Ø¯Ùˆ', protein: 2, carbs: 9, fat: 15, calories: 160 },
                            { name: 'Ø¢Ø¬ÛŒÙ„ Ù…Ø®Ù„ÙˆØ·', protein: 6, carbs: 6, fat: 16, calories: 185 },
                            { name: 'Ø±ÙˆØºÙ† Ø²ÛŒØªÙˆÙ†', protein: 0, carbs: 0, fat: 14, calories: 119 }
                        ],
                        vegetables: [
                            { name: 'Ø¨Ø±ÙˆÚ©Ù„ÛŒ', protein: 3, carbs: 6, fat: 0.4, calories: 25 },
                            { name: 'Ø§Ø³ÙÙ†Ø§Ø¬', protein: 3, carbs: 4, fat: 0.4, calories: 23 }
                        ]
                    },
                    meals: {
                        breakfast: [
                            { 
                                name: 'Ø§ÙˆÙ…Ù„Øª Ø³Ø¨Ø²ÛŒØ¬Ø§Øª', 
                                ingredients: ['ØªØ®Ù… Ù…Ø±Øº', 'Ø§Ø³ÙÙ†Ø§Ø¬', 'Ú¯ÙˆØ¬Ù‡', 'Ù¾Ù†ÛŒØ±'],
                                calories: 320,
                                protein: 24,
                                suitableFor: ['weight_loss', 'muscle_gain']
                            }
                        ],
                        lunch: [
                            { 
                                name: 'Ø³ÛŒÙ†Ù‡ Ù…Ø±Øº Ø¨Ø§ Ø¨Ø±Ù†Ø¬', 
                                ingredients: ['Ø³ÛŒÙ†Ù‡ Ù…Ø±Øº', 'Ø¨Ø±Ù†Ø¬ Ù‚Ù‡ÙˆÙ‡â€ŒØ§ÛŒ', 'Ø³Ø¨Ø²ÛŒØ¬Ø§Øª'],
                                calories: 450,
                                protein: 35,
                                suitableFor: ['muscle_gain', 'strength']
                            }
                        ],
                        dinner: [
                            { 
                                name: 'Ù…Ø§Ù‡ÛŒ Ø¨Ø§ Ø³Ø§Ù„Ø§Ø¯', 
                                ingredients: ['Ù…Ø§Ù‡ÛŒ Ø³Ø§Ù„Ù…ÙˆÙ†', 'Ø³Ø§Ù„Ø§Ø¯ Ø³Ø¨Ø²', 'Ø¢ÙˆÙˆÚ©Ø§Ø¯Ùˆ'],
                                calories: 380,
                                protein: 30,
                                suitableFor: ['weight_loss', 'general_health']
                            }
                        ]
                    }
                };
            }

            // Generate complete personalized program
            generateCompleteProgram() {
                const weeklyProgram = this.generateIntelligentWeeklyProgram();
                const nutritionPlan = this.generatePreciseNutritionPlan();
                const supplementPlan = this.generateSupplementProtocol();
                const recoveryPlan = this.generateRecoveryProtocol();
                const progressionPlan = this.generateProgressionStrategy();

                return {
                    overview: this.generateProgramOverview(),
                    weekly: weeklyProgram,
                    nutrition: nutritionPlan,
                    supplements: supplementPlan,
                    recovery: recoveryPlan,
                    progression: progressionPlan,
                    monitoring: this.generateMonitoringPlan(),
                    contingencies: this.generateContingencyPlans()
                };
            }

            // Generate intelligent weekly program
            generateIntelligentWeeklyProgram() {
                const trainingDays = parseInt(this.userData.trainingDays);
                const sessionLength = parseInt(this.userData.sessionLength);
                const goal = this.userData.primaryGoal;
                const fitnessLevel = this.analysis.fitness.level;
                const equipment = this.userData.equipment || [];
                const exerciseTypes = this.userData.exerciseTypes || [];
                const injuries = this.userData.injuries || [];
                const somatotype = this.analysis.somatotype.name;

                const program = {
                    totalDays: trainingDays,
                    daysPerWeek: trainingDays,
                    sessionLength: sessionLength,
                    days: [],
                    restDays: 7 - trainingDays,
                    weeklyVolume: this.calculateOptimalVolume(goal, fitnessLevel, somatotype)
                };

                // Generate each training day with scientific precision
                for (let day = 1; day <= trainingDays; day++) {
                    const dayProgram = this.generateIntelligentDayProgram(
                        day, sessionLength, goal, fitnessLevel, equipment, 
                        exerciseTypes, injuries, somatotype
                    );
                    program.days.push(dayProgram);
                }

                return program;
            }

            // Calculate optimal training volume
            calculateOptimalVolume(goal, fitnessLevel, somatotype) {
                let baseVolume = 100; // base weekly volume (arbitrary units)

                // Adjust for fitness level
                const fitnessMultiplier = {
                    'ØªØ§Ø²Ù‡â€ŒÚ©Ø§Ø±': 0.5,
                    'Ù…Ø¨ØªØ¯ÛŒ': 0.7,
                    'Ù…ØªÙˆØ³Ø·': 1.0,
                    'Ù…ØªÙˆØ³Ø· Ø¨Ø§Ù„Ø§': 1.2,
                    'Ù¾ÛŒØ´Ø±ÙØªÙ‡': 1.5,
                    'ÙˆØ±Ø²Ø´Ú©Ø§Ø±': 2.0
                };
                baseVolume *= fitnessMultiplier[fitnessLevel] || 1.0;

                // Adjust for somatotype
                const somatotypeMultiplier = {
                    'Ø§Ù†Ø¯ÙˆÙ…ÙˆØ±Ù': 1.2, // Can handle more volume
                    'Ù…Ø²ÙˆÙ…ÙˆØ±Ù': 1.0,  // Optimal responder
                    'Ø§Ú©ØªÙˆÙ…ÙˆØ±Ù': 0.8  // Needs more recovery
                };
                baseVolume *= somatotypeMultiplier[somatotype] || 1.0;

                // Adjust for goal
                const goalMultiplier = {
                    'weight_loss': 1.3,    // Higher volume for calorie burn
                    'muscle_gain': 1.0,    // Moderate volume for growth
                    'strength': 0.8,       // Lower volume, higher intensity
                    'endurance': 1.5,      // High volume
                    'martial_arts': 1.1,   // Moderate-high volume
                    'flexibility': 0.6,    // Lower volume
                    'rehabilitation': 0.4   // Very low volume
                };
                baseVolume *= goalMultiplier[goal] || 1.0;

                return Math.round(baseVolume);
            }

            // Generate intelligent day program
            generateIntelligentDayProgram(dayNumber, sessionLength, goal, fitnessLevel, equipment, exerciseTypes, injuries, somatotype) {
                const dayProgram = {
                    day: dayNumber,
                    name: this.generateIntelligentDayName(dayNumber, goal, equipment),
                    duration: sessionLength,
                    focus: this.determineDayFocus(dayNumber, goal),
                    warmup: this.generateIntelligentWarmup(dayNumber, goal, injuries),
                    mainExercises: [],
                    cooldown: this.generateIntelligentCooldown(dayNumber, goal, injuries),
                    notes: [],
                    intensity: this.calculateDayIntensity(dayNumber, goal, fitnessLevel),
                    volume: this.calculateDayVolume(dayNumber, goal, sessionLength)
                };

                // Allocate time intelligently
                const warmupTime = Math.min(15, sessionLength * 0.2);
                const cooldownTime = Math.min(15, sessionLength * 0.15);
                const mainWorkoutTime = sessionLength - warmupTime - cooldownTime;

                // Generate main workout with scientific approach
                dayProgram.mainExercises = this.generateMainWorkoutIntelligent(
                    dayNumber, mainWorkoutTime, goal, fitnessLevel, equipment, 
                    exerciseTypes, injuries, somatotype
                );

                // Add intelligent notes
                dayProgram.notes = this.generateIntelligentNotes(
                    dayNumber, goal, injuries, somatotype, fitnessLevel
                );

                return dayProgram;
            }

            // Generate intelligent main workout
            generateMainWorkoutIntelligent(dayNumber, availableTime, goal, fitnessLevel, equipment, exerciseTypes, injuries, somatotype) {
                const exercises = [];
                const dayFocus = this.determineDayFocus(dayNumber, goal);
                
                // Determine exercise selection strategy
                const strategy = this.determineExerciseStrategy(goal, fitnessLevel, somatotype);
                
                // Calculate sets, reps, and rest based on goal and science
                const workoutParameters = this.calculateWorkoutParameters(goal, fitnessLevel, somatotype);

                if (goal === 'weight_loss') {
                    exercises.push(...this.generateWeightLossWorkout(availableTime, equipment, injuries, workoutParameters));
                } else if (goal === 'muscle_gain') {
                    exercises.push(...this.generateMuscleGainWorkout(dayNumber, availableTime, equipment, injuries, workoutParameters));
                } else if (goal === 'strength') {
                    exercises.push(...this.generateStrengthWorkout(dayNumber, availableTime, equipment, injuries, workoutParameters));
                } else if (goal === 'endurance') {
                    exercises.push(...this.generateEnduranceWorkout(availableTime, equipment, injuries, workoutParameters));
                } else if (goal === 'martial_arts') {
                    exercises.push(...this.generateMartialArtsWorkout(dayNumber, availableTime, equipment, workoutParameters));
                } else if (goal === 'flexibility') {
                    exercises.push(...this.generateFlexibilityWorkout(availableTime, injuries, workoutParameters));
                } else if (goal === 'rehabilitation') {
                    exercises.push(...this.generateRehabilitationWorkout(availableTime, injuries, workoutParameters));
                } else {
                    exercises.push(...this.generateGeneralHealthWorkout(availableTime, equipment, injuries, workoutParameters));
                }

                return exercises;
            }

            // Calculate workout parameters based on science
            calculateWorkoutParameters(goal, fitnessLevel, somatotype) {
                const baseParameters = {
                    sets: 3,
                    reps: 12,
                    rest: 60,
                    intensity: 70, // % of 1RM
                    density: 1.0   // exercises per minute
                };

                // Adjust for goal (based on NASM guidelines)
                const goalAdjustments = {
                    'weight_loss': { sets: 3, reps: 15, rest: 45, intensity: 65, density: 1.2 },
                    'muscle_gain': { sets: 4, reps: 10, rest: 90, intensity: 75, density: 0.8 },
                    'strength': { sets: 5, reps: 5, rest: 180, intensity: 85, density: 0.6 },
                    'endurance': { sets: 2, reps: 20, rest: 30, intensity: 60, density: 1.5 },
                    'martial_arts': { sets: 3, reps: 12, rest: 60, intensity: 70, density: 1.1 },
                    'flexibility': { sets: 1, reps: 1, rest: 15, intensity: 30, density: 2.0 }
                };

                const adjustments = goalAdjustments[goal] || baseParameters;
                
                // Adjust for fitness level
                const fitnessAdjustments = {
                    'ØªØ§Ø²Ù‡â€ŒÚ©Ø§Ø±': { sets: 0.7, intensity: 0.8, rest: 1.5 },
                    'Ù…Ø¨ØªØ¯ÛŒ': { sets: 0.8, intensity: 0.9, rest: 1.2 },
                    'Ù…ØªÙˆØ³Ø·': { sets: 1.0, intensity: 1.0, rest: 1.0 },
                    'Ù¾ÛŒØ´Ø±ÙØªÙ‡': { sets: 1.2, intensity: 1.1, rest: 0.8 }
                };

                const fitnessAdj = fitnessAdjustments[fitnessLevel] || { sets: 1, intensity: 1, rest: 1 };

                // Adjust for somatotype
                const somatotypeAdjustments = {
                    'Ø§Ù†Ø¯ÙˆÙ…ÙˆØ±Ù': { rest: 0.8, density: 1.2 }, // Less rest, more density
                    'Ù…Ø²ÙˆÙ…ÙˆØ±Ù': { rest: 1.0, density: 1.0 },  // Standard
                    'Ø§Ú©ØªÙˆÙ…ÙˆØ±Ù': { rest: 1.3, density: 0.8 }  // More rest, less density
                };

                const somAdj = somatotypeAdjustments[somatotype] || { rest: 1, density: 1 };

                return {
                    sets: Math.round(adjustments.sets * fitnessAdj.sets),
                    reps: adjustments.reps,
                    rest: Math.round(adjustments.rest * fitnessAdj.rest * somAdj.rest),
                    intensity: Math.round(adjustments.intensity * fitnessAdj.intensity),
                    density: adjustments.density * somAdj.density
                };
            }

            // Generate weight loss workout
            generateWeightLossWorkout(availableTime, equipment, injuries, params) {
                const exercises = [];
                const timePerExercise = 6; // minutes including rest
                const maxExercises = Math.floor(availableTime / timePerExercise);

                // Circuit training approach for maximum calorie burn
                const circuitExercises = this.selectExercisesForGoal(
                    'weight_loss', equipment, injuries, maxExercises
                );

                circuitExercises.forEach((exercise, index) => {
                    exercises.push({
                        name: exercise.name,
                        type: 'Ø³ÙˆØ²Ø§Ù†Ø¯Ù† Ú†Ø±Ø¨ÛŒ',
                        muscle: Array.isArray(exercise.muscle) ? exercise.muscle.join(', ') : exercise.muscle,
                        sets: `${params.sets} Ø¯ÙˆØ±`,
                        reps: `${params.reps} ØªÚ©Ø±Ø§Ø±`,
                        rest: `${params.rest} Ø«Ø§Ù†ÛŒÙ‡`,
                        intensity: `${params.intensity}% Ø­Ø¯Ø§Ú©Ø«Ø±`,
                        notes: exercise.modifications && injuries.some(injury => exercise.contraindications?.includes(injury))
                            ? `âš ï¸ ${exercise.modifications[injuries.find(injury => exercise.contraindications?.includes(injury))]}`
                            : 'ğŸ”¥ ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ø³ÙˆØ²Ø§Ù†Ø¯Ù† Ú©Ø§Ù„Ø±ÛŒ',
                        caloriesBurn: this.estimateCaloriesBurn(exercise, params),
                        form: exercise.form || 'ÙØ±Ù… ØµØ­ÛŒØ­ Ø±Ø§ Ø±Ø¹Ø§ÛŒØª Ú©Ù†ÛŒØ¯'
                    });
                });

                // Add cardio finisher if time allows
                if (availableTime > maxExercises * timePerExercise) {
                    exercises.push({
                        name: 'ÙÛŒÙ†ÛŒØ´Ø± Ú©Ø§Ø±Ø¯ÛŒÙˆ',
                        type: 'Ù‡ÙˆØ§Ø²ÛŒ Ø´Ø¯ÛŒØ¯',
                        sets: '1 Ø¯ÙˆØ±',
                        reps: '5-10 Ø¯Ù‚ÛŒÙ‚Ù‡',
                        rest: '0 Ø«Ø§Ù†ÛŒÙ‡',
                        intensity: '80-90% Ø¶Ø±Ø¨Ø§Ù† Ù‚Ù„Ø¨ Ø­Ø¯Ø§Ú©Ø«Ø±',
                        notes: 'ğŸ’¨ Ø¢Ø®Ø±ÛŒÙ† ÙØ´Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø­Ø¯Ø§Ú©Ø«Ø± Ø³ÙˆØ²Ø§Ù†Ø¯Ù†',
                        caloriesBurn: this.estimateCardioCalories(8, 85) // 8 minutes at 85% intensity
                    });
                }

                return exercises;
            }

            // Generate muscle gain workout  
            generateMuscleGainWorkout(dayNumber, availableTime, equipment, injuries, params) {
                const exercises = [];
                const muscleGroups = this.getMuscleGroupSplit(dayNumber);
                const timePerExercise = 8; // More time for muscle building
                const maxExercises = Math.floor(availableTime / timePerExercise);

                // Progressive overload focused approach
                const selectedExercises = this.selectMuscleGainExercises(
                    muscleGroups, equipment, injuries, maxExercises
                );

                selectedExercises.forEach(exercise => {
                    exercises.push({
                        name: exercise.name,
                        type: 'Ø¹Ø¶Ù„Ù‡â€ŒØ³Ø§Ø²ÛŒ',
                        muscle: Array.isArray(exercise.muscle) ? exercise.muscle.join(', ') : exercise.muscle,
                        sets: `${params.sets} Ø³Øª`,
                        reps: `${params.reps} ØªÚ©Ø±Ø§Ø±`,
                        rest: `${params.rest} Ø«Ø§Ù†ÛŒÙ‡`,
                        intensity: `${params.intensity}% 1RM`,
                        notes: this.getMuscleGainNotes(exercise, params),
                        progression: exercise.progression || 'Ø§ÙØ²Ø§ÛŒØ´ ÙˆØ²Ù† Ù‡Ø± Ù‡ÙØªÙ‡',
                        form: exercise.form || 'Ú©Ù†ØªØ±Ù„ Ú©Ø§Ù…Ù„ Ø¯Ø± Ù‡Ø± ØªÚ©Ø±Ø§Ø±',
                        tempo: '3-1-2-1 (Ù¾Ø§ÛŒÛŒÙ†-ØªÙˆÙ‚Ù-Ø¨Ø§Ù„Ø§-ØªÙˆÙ‚Ù)'
                    });
                });

                return exercises;
            }

            // Generate strength workout
            generateStrengthWorkout(dayNumber, availableTime, equipment, injuries, params) {
                const exercises = [];
                const strengthPattern = this.getStrengthPattern(dayNumber);
                const timePerExercise = 10; // Maximum time for strength
                const maxExercises = Math.floor(availableTime / timePerExercise);

                // Focus on compound movements
                const strengthExercises = this.selectStrengthExercises(
                    strengthPattern, equipment, injuries, maxExercises
                );

                strengthExercises.forEach(exercise => {
                    exercises.push({
                        name: exercise.name,
                        type: 'Ù‚Ø¯Ø±Øª',
                        muscle: Array.isArray(exercise.muscle) ? exercise.muscle.join(', ') : exercise.muscle,
                        sets: `${params.sets} Ø³Øª`,
                        reps: `${params.reps} ØªÚ©Ø±Ø§Ø±`,
                        rest: `${params.rest} Ø«Ø§Ù†ÛŒÙ‡`,
                        intensity: `${params.intensity}% 1RM`,
                        notes: 'ğŸ’ª ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ù‚Ø¯Ø±Øª Ø­Ø¯Ø§Ú©Ø«Ø±',
                        warmupSets: this.calculateWarmupSets(params.intensity),
                        form: exercise.form || 'ÙØ±Ù… Ø¹Ø§Ù„ÛŒ Ø¨Ø± Ø³Ø±Ø¹Øª Ø§ÙˆÙ„ÙˆÛŒØª Ø¯Ø§Ø±Ø¯',
                        rpe: this.calculateRPE(params.intensity)
                    });
                });

                return exercises;
            }

            // Estimate calories burned for exercise
            estimateCaloriesBurn(exercise, params) {
                // Simple METs calculation
                const bodyWeight = parseFloat(this.userData.weight);
                const exerciseMETs = {
                    'strength': 6,
                    'cardio': 8,
                    'compound': 7,
                    'isolation': 4
                };

                const mets = exerciseMETs[exercise.type] || 6;
                const timeInHours = (params.sets * params.reps * 3 + params.rest * params.sets) / 3600; // rough estimate
                
                return Math.round(mets * bodyWeight * timeInHours);
            }

            // Select exercises for specific goal
            selectExercisesForGoal(goal, equipment, injuries, maxExercises) {
                const availableExercises = [];
                
                // Filter exercises based on equipment
                Object.values(this.exerciseDatabase.strength.compound).forEach(level => {
                    level.forEach(exercise => {
                        if (equipment.includes(exercise.equipment) || exercise.equipment === 'bodyweight') {
                            // Check contraindications
                            if (!injuries.some(injury => exercise.contraindications?.includes(injury))) {
                                availableExercises.push(exercise);
                            }
                        }
                    });
                });

                // Prioritize compound movements for weight loss
                if (goal === 'weight_loss') {
                    availableExercises.sort((a, b) => {
                        const aIsCompound = Array.isArray(a.muscle) && a.muscle.length > 2;
                        const bIsCompound = Array.isArray(b.muscle) && b.muscle.length > 2;
                        if (aIsCompound && !bIsCompound) return -1;
                        if (!aIsCompound && bIsCompound) return 1;
                        return 0;
                    });
                }

                return availableExercises.slice(0, maxExercises);
            }

            // Get muscle group split for muscle gain
            getMuscleGroupSplit(dayNumber) {
                // Intelligent split based on day number
                const splits = {
                    2: { // 2-day split
                        1: ['Ø³ÛŒÙ†Ù‡', 'Ø´Ø§Ù†Ù‡', 'Ø³Ù‡â€ŒØ³Ø±'],
                        2: ['Ù¾Ø´Øª', 'Ø¯ÙˆØ³Ø±', 'Ù¾Ø§']
                    },
                    3: { // 3-day split
                        1: ['Ø³ÛŒÙ†Ù‡', 'Ø³Ù‡â€ŒØ³Ø±'],
                        2: ['Ù¾Ø´Øª', 'Ø¯ÙˆØ³Ø±'],
                        3: ['Ù¾Ø§', 'Ø´Ø§Ù†Ù‡']
                    },
                    4: { // 4-day split
                        1: ['Ø³ÛŒÙ†Ù‡', 'Ø³Ù‡â€ŒØ³Ø±'],
                        2: ['Ù¾Ø´Øª', 'Ø¯ÙˆØ³Ø±'],
                        3: ['Ù¾Ø§'],
                        4: ['Ø´Ø§Ù†Ù‡', 'Ù…Ø±Ú©Ø²ÛŒ']
                    },
                    5: { // 5-day split
                        1: ['Ø³ÛŒÙ†Ù‡'],
                        2: ['Ù¾Ø´Øª'],
                        3: ['Ù¾Ø§'],
                        4: ['Ø´Ø§Ù†Ù‡'],
                        5: ['Ø¨Ø§Ø²Ùˆ']
                    }
                };

                const totalDays = parseInt(this.userData.trainingDays);
                const split = splits[totalDays] || splits[3];
                return split[((dayNumber - 1) % totalDays) + 1] || ['Ú©Ù„ Ø¨Ø¯Ù†'];
            }

            // Generate precise nutrition plan
            generatePreciseNutritionPlan() {
                const metabolic = this.analysis.metabolic;
                const goal = this.userData.primaryGoal;
                const somatotype = this.analysis.somatotype.name;
                const activityLevel = this.userData.dailyActivity;
                const trainingDays = parseInt(this.userData.trainingDays);

                // Calculate precise calorie needs
                const targetCalories = this.calculatePreciseCalories(metabolic, goal, activityLevel, trainingDays);
                
                // Calculate optimal macros
                const macros = this.calculateOptimalMacros(goal, somatotype, targetCalories);
                
                // Generate meal plan
                const mealPlan = this.generateIntelligentMealPlan(targetCalories, macros);
                
                // Calculate timing
                const nutrientTiming = this.generateNutrientTiming(trainingDays, goal);
                
                // Hydration plan
                const hydrationPlan = this.generateAdvancedHydrationPlan();

                return {
                    summary: {
                        dailyCalories: targetCalories,
                        macros: macros,
                        metabolicType: metabolic.metabolicProfile.type.type,
                        approach: this.getNutritionalApproach(goal, somatotype)
                    },
                    detailed: {
                        meals: mealPlan,
                        timing: nutrientTiming,
                        hydration: hydrationPlan,
                        supplements: this.analysis.recommendations.supplements
                    },
                    guidelines: this.generateNutritionalGuidelines(goal, somatotype),
                    tracking: this.generateNutritionTracking()
                };
            }

            // Calculate precise calories
            calculatePreciseCalories(metabolic, goal, activityLevel, trainingDays) {
                let baseCalories = metabolic.tdee.correctedTDEE;
                
                // Adjust for training frequency
                const trainingBonus = trainingDays * 50; // 50 calories per training day
                baseCalories += trainingBonus;
                
                // Goal-specific adjustments
                const goalAdjustments = {
                    'weight_loss': -500,     // 0.5kg per week loss
                    'muscle_gain': 300,      // Moderate surplus
                    'strength': 200,         // Small surplus
                    'endurance': 400,        // Higher needs
                    'martial_arts': 250,     // Moderate surplus
                    'flexibility': 0,        // Maintenance
                    'rehabilitation': -100,  // Slight deficit
                    'general_health': 0      // Maintenance
                };
                
                const adjustment = goalAdjustments[goal] || 0;
                return Math.round(baseCalories + adjustment);
            }

            // Calculate optimal macros
            calculateOptimalMacros(goal, somatotype, calories) {
                // Base ratios by goal
                const goalRatios = {
                    'weight_loss': { protein: 0.35, carbs: 0.30, fat: 0.35 },
                    'muscle_gain': { protein: 0.30, carbs: 0.45, fat: 0.25 },
                    'strength': { protein: 0.25, carbs: 0.50, fat: 0.25 },
                    'endurance': { protein: 0.20, carbs: 0.60, fat: 0.20 },
                    'martial_arts': { protein: 0.28, carbs: 0.42, fat: 0.30 },
                    'flexibility': { protein: 0.25, carbs: 0.45, fat: 0.30 },
                    'general_health': { protein: 0.25, carbs: 0.45, fat: 0.30 }
                };

                let ratios = goalRatios[goal] || goalRatios['general_health'];

                // Adjust for somatotype
                if (somatotype === 'Ø§Ù†Ø¯ÙˆÙ…ÙˆØ±Ù') {
                    ratios.carbs *= 0.85;  // Reduce carbs
                    ratios.protein *= 1.1; // Increase protein
                    ratios.fat *= 1.05;    // Slight increase in fat
                } else if (somatotype === 'Ø§Ú©ØªÙˆÙ…ÙˆØ±Ù') {
                    ratios.carbs *= 1.15;  // Increase carbs
                    ratios.fat *= 1.1;     // Increase fat
                    ratios.protein *= 0.95; // Slight decrease protein
                }

                // Normalize ratios
                const total = ratios.protein + ratios.carbs + ratios.fat;
                ratios.protein /= total;
                ratios.carbs /= total;
                ratios.fat /= total;

                // Convert to grams
                return {
                    protein: Math.round((calories * ratios.protein) / 4),
                    carbs: Math.round((calories * ratios.carbs) / 4),
                    fat: Math.round((calories * ratios.fat) / 9),
                    ratios: {
                        protein: Math.round(ratios.protein * 100),
                        carbs: Math.round(ratios.carbs * 100),
                        fat: Math.round(ratios.fat * 100)
                    }
                };
            }

            // Generate intelligent meal plan
            generateIntelligentMealPlan(totalCalories, macros) {
                const mealsCount = parseInt(this.userData.mealsPerDay) || 3;
                const mealDistribution = this.calculateMealDistribution(mealsCount);
                
                const meals = [];
                
                mealDistribution.forEach((ratio, index) => {
                    const mealCalories = Math.round(totalCalories * ratio);
                    const mealMacros = {
                        protein: Math.round(macros.protein * ratio),
                        carbs: Math.round(macros.carbs * ratio),
                        fat: Math.round(macros.fat * ratio)
                    };

                    const mealName = this.getMealName(index, mealsCount);
                    const suggestions = this.generateMealSuggestions(mealName, mealCalories, mealMacros);

                    meals.push({
                        name: mealName,
                        time: this.getMealTime(index, mealsCount),
                        calories: mealCalories,
                        macros: mealMacros,
                        suggestions: suggestions,
                        tips: this.getMealTips(mealName, this.userData.primaryGoal)
                    });
                });

                return meals;
            }

            // Calculate meal distribution
            calculateMealDistribution(mealsCount) {
                const distributions = {
                    2: [0.4, 0.6], // Bigger dinner
                    3: [0.3, 0.4, 0.3], // Standard
                    4: [0.25, 0.1, 0.35, 0.3], // Breakfast, snack, lunch, dinner
                    5: [0.25, 0.1, 0.3, 0.1, 0.25], // Added afternoon snack
                    6: [0.2, 0.1, 0.25, 0.1, 0.25, 0.1] // 6 small meals
                };

                return distributions[mealsCount] || distributions[3];
            }

            // Generate meal suggestions
            generateMealSuggestions(mealName, calories, macros) {
                const suggestions = [];
                const mealDB = this.nutritionDatabase.meals;
                
                // Find suitable meals from database
                const suitableMeals = mealDB[this.getMealCategory(mealName)] || [];
                
                suitableMeals.forEach(meal => {
                    if (Math.abs(meal.calories - calories) < calories * 0.3) { // Within 30%
                        suggestions.push({
                            name: meal.name,
                            ingredients: meal.ingredients,
                            calories: meal.calories,
                            protein: meal.protein || macros.protein,
                            suitability: this.calculateMealSuitability(meal, macros)
                        });
                    }
                });

                // Generate custom suggestions if not enough from database
                if (suggestions.length < 2) {
                    suggestions.push(...this.generateCustomMealSuggestions(mealName, calories, macros));
                }

                return suggestions.slice(0, 3); // Return top 3 suggestions
            }

            // Generate program overview
            generateProgramOverview() {
                return {
                    title: 'Ø¨Ø±Ù†Ø§Ù…Ù‡ ØªÙ…Ø±ÛŒÙ†ÛŒ Ùˆ ØªØºØ°ÛŒÙ‡â€ŒØ§ÛŒ Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒâ€ŒØ´Ø¯Ù‡',
                    goal: this.getGoalDescription(this.userData.primaryGoal),
                    duration: '12 Ù‡ÙØªÙ‡',
                    frequency: `${this.userData.trainingDays} Ø±ÙˆØ² ØªÙ…Ø±ÛŒÙ† Ø¯Ø± Ù‡ÙØªÙ‡`,
                    approach: this.getProgramApproach(),
                    expectedResults: this.generateExpectedResults(),
                    keyPrinciples: this.getKeyPrinciples(),
                    successFactors: this.getSuccessFactors()
                };
            }

            // Get program approach
            getProgramApproach() {
                const goal = this.userData.primaryGoal;
                const somatotype = this.analysis.somatotype.name;
                const fitness = this.analysis.fitness.level;

                const approaches = {
                    'weight_loss': `Ø±ÙˆÛŒÚ©Ø±Ø¯ ØªØ±Ú©ÛŒØ¨ÛŒ Ù‚Ø¯Ø±Øª-Ù‡ÙˆØ§Ø²ÛŒ Ø¨Ø§ ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ø³ÙˆØ²Ø§Ù†Ø¯Ù† Ú†Ø±Ø¨ÛŒ Ùˆ Ø­ÙØ¸ Ø¹Ø¶Ù„Ù‡. 
                                   Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ ${somatotype} Ø¨Ø§ Ø³Ø·Ø­ ${fitness}.`,
                    'muscle_gain': `Ø±ÙˆÛŒÚ©Ø±Ø¯ Ù‡Ø§ÛŒÙ¾Ø±ØªØ±ÙˆÙÛŒ Ø¨Ø§ ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ø­Ø¬Ù… Ùˆ Ù¾ÛŒØ´Ø±ÙØª ØªØ¯Ø±ÛŒØ¬ÛŒ. 
                                    Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ${somatotype} Ø¯Ø± Ø³Ø·Ø­ ${fitness}.`,
                    'strength': `Ø±ÙˆÛŒÚ©Ø±Ø¯ Ù‚Ø¯Ø±Øª Ø®Ø§Ù„Øµ Ø¨Ø§ ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ø­Ø±Ú©Ø§Øª Ø§ØµÙ„ÛŒ Ùˆ Ø´Ø¯Øª Ø¨Ø§Ù„Ø§. 
                                Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ${somatotype} Ø¨Ø§ ØªØ¬Ø±Ø¨Ù‡ ${fitness}.`
                };

                return approaches[goal] || `Ø±ÙˆÛŒÚ©Ø±Ø¯ Ø¬Ø§Ù…Ø¹ Ù…ØªÙ†Ø§Ø³Ø¨ Ø¨Ø§ ${somatotype} Ùˆ Ø³Ø·Ø­ ${fitness}.`;
            }

            // Generate expected results
            generateExpectedResults() {
                const goal = this.userData.primaryGoal;
                const fitness = this.analysis.fitness.level;
                const somatotype = this.analysis.somatotype.name;

                const baseResults = {
                    'weight_loss': [
                        'Ú©Ø§Ù‡Ø´ 4-8 Ú©ÛŒÙ„Ùˆ ÙˆØ²Ù† Ø¯Ø± 12 Ù‡ÙØªÙ‡',
                        'Ú©Ø§Ù‡Ø´ 3-6% Ú†Ø±Ø¨ÛŒ Ø¨Ø¯Ù†',
                        'Ø¨Ù‡Ø¨ÙˆØ¯ 25-40% Ø¢Ù…Ø§Ø¯Ú¯ÛŒ Ù‚Ù„Ø¨ÛŒ',
                        'Ø§ÙØ²Ø§ÛŒØ´ 15-25% Ù‚Ø¯Ø±Øª Ø¹Ø¶Ù„Ø§Ù†ÛŒ'
                    ],
                    'muscle_gain': [
                        'Ø§ÙØ²Ø§ÛŒØ´ 2-5 Ú©ÛŒÙ„Ùˆ Ø¹Ø¶Ù„Ù‡ Ø¯Ø± 12 Ù‡ÙØªÙ‡',
                        'Ø§ÙØ²Ø§ÛŒØ´ 20-35% Ù‚Ø¯Ø±Øª',
                        'Ø¨Ù‡Ø¨ÙˆØ¯ ØªØ±Ú©ÛŒØ¨ Ø¨Ø¯Ù†',
                        'Ø§ÙØ²Ø§ÛŒØ´ Ø­Ø¬Ù… Ø¹Ø¶Ù„Ø§Ù†ÛŒ Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡'
                    ],
                    'strength': [
                        'Ø§ÙØ²Ø§ÛŒØ´ 30-60% Ù‚Ø¯Ø±Øª Ø¯Ø± Ø­Ø±Ú©Ø§Øª Ø§ØµÙ„ÛŒ',
                        'Ø¨Ù‡Ø¨ÙˆØ¯ ØªÚ©Ù†ÛŒÚ© Ùˆ ÙØ±Ù…',
                        'Ø§ÙØ²Ø§ÛŒØ´ ØªØ±Ø§Ú©Ù… Ø§Ø³ØªØ®ÙˆØ§Ù†',
                        'Ø¨Ù‡Ø¨ÙˆØ¯ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¹ØµØ¨ÛŒ-Ø¹Ø¶Ù„Ø§Ù†ÛŒ'
                    ]
                };

                let results = baseResults[goal] || [
                    'Ø¨Ù‡Ø¨ÙˆØ¯ Ø³Ù„Ø§Ù…Øª Ú©Ù„ÛŒ
</script></body></html>